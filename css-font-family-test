From: L. David Baron <dbaron@dbaron.org>

Add test for font-family issue that some other browsers get wrong (from bug 499421).

diff --git a/layout/reftests/font-matching/CSS21-t1502-no-inherited-font-family-ref.xhtml b/layout/reftests/font-matching/CSS21-t1502-no-inherited-font-family-ref.xhtml
new file mode 100644
--- /dev/null
+++ b/layout/reftests/font-matching/CSS21-t1502-no-inherited-font-family-ref.xhtml
@@ -0,0 +1,43 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml">
+	<head>
+		<title>CSS 2.1: Font matching algorithm (reference)</title>
+		<link rel="author" title="L. David Baron" href="http://dbaron.org/" />
+		<link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
+	</head>
+	<body>
+
+<div style="font-family: FontDoesNotExist">
+  Every line of text in this page should be in the same font.
+</div>
+
+<div style="font-family: FontDoesNotExist">
+  Every line of text in this page should be in the same font.
+</div>
+
+<div style="font-family: FontDoesNotExist">
+  Every line of text in this page should be in the same font.
+</div>
+
+<div style="font-family: FontDoesNotExist">
+  Every line of text in this page should be in the same font.
+</div>
+
+<div style="font-family: FontDoesNotExist">
+  Every line of text in this page should be in the same font.
+</div>
+
+<div style="font-family: FontDoesNotExist">
+  Every line of text in this page should be in the same font.
+</div>
+
+<div style="font-family: FontDoesNotExist">
+  Every line of text in this page should be in the same font.
+</div>
+
+<div style="font-family: FontDoesNotExist">
+  Every line of text in this page should be in the same font.
+</div>
+
+	</body>
+</html>
diff --git a/layout/reftests/font-matching/CSS21-t1502-no-inherited-font-family.xhtml b/layout/reftests/font-matching/CSS21-t1502-no-inherited-font-family.xhtml
new file mode 100644
--- /dev/null
+++ b/layout/reftests/font-matching/CSS21-t1502-no-inherited-font-family.xhtml
@@ -0,0 +1,61 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
+<html xmlns="http://www.w3.org/1999/xhtml">
+	<head>
+		<title>CSS 2.1: Font matching algorithm</title>
+		<link rel="author" title="L. David Baron" href="http://dbaron.org/" />
+		<link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
+		<link rel="help" href="http://www.w3.org/TR/CSS21/fonts.html#algorithm" />
+		<meta name="assert" content="That the 'UA-dependent default 'font-family'' described in step (5) does not vary based on the ancestor's font-family property." />
+	</head>
+	<body>
+
+<div style="font-family: Arial, Helvetica, sans-serif">
+  <div style="font-family: FontDoesNotExist">
+    Every line of text in this page should be in the same font.
+  </div>
+</div>
+
+<div style="font-family: Arial, Helvetica">
+  <div style="font-family: FontDoesNotExist">
+    Every line of text in this page should be in the same font.
+  </div>
+</div>
+
+<div style="font-family: Arial">
+  <div style="font-family: FontDoesNotExist">
+    Every line of text in this page should be in the same font.
+  </div>
+</div>
+
+<div style="font-family: Times New Roman, Times, serif">
+  <div style="font-family: FontDoesNotExist">
+    Every line of text in this page should be in the same font.
+  </div>
+</div>
+
+<div style="font-family: Times New Roman, Times">
+  <div style="font-family: FontDoesNotExist">
+    Every line of text in this page should be in the same font.
+  </div>
+</div>
+
+<div style="font-family: Times New Roman">
+  <div style="font-family: FontDoesNotExist">
+    Every line of text in this page should be in the same font.
+  </div>
+</div>
+
+<div style="font-family: Courier New, Courier, monospace">
+  <div style="font-family: FontDoesNotExist">
+    Every line of text in this page should be in the same font.
+  </div>
+</div>
+
+<div style="font-family: Verdana">
+  <div style="font-family: FontDoesNotExist">
+    Every line of text in this page should be in the same font.
+  </div>
+</div>
+
+	</body>
+</html>
diff --git a/layout/reftests/font-matching/reftest.list b/layout/reftests/font-matching/reftest.list
new file mode 100644
--- /dev/null
+++ b/layout/reftests/font-matching/reftest.list
@@ -0,0 +1,1 @@
+== CSS21-t1502-no-inherited-font-family.xhtml CSS21-t1502-no-inherited-font-family-ref.xhtml
diff --git a/layout/reftests/reftest.list b/layout/reftests/reftest.list
--- a/layout/reftests/reftest.list
+++ b/layout/reftests/reftest.list
@@ -66,16 +66,19 @@ include first-letter/reftest.list
 include first-line/reftest.list
 
 # floats/
 include floats/reftest.list
 
 # font-face
 include font-face/reftest.list
 
+# font matching
+include font-matching/reftest.list
+
 # forms
 include forms/reftest.list
 
 # block-inside-inline splits
 include ib-split/reftest.list
 
 # image/
 include image/reftest.list
