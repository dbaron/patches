From: L. David Baron <dbaron@dbaron.org>

Make setting property after setting transition-duration and transition-delay to 0 stop running transitions on that property.  (Bug 522643)

diff --git a/layout/style/test/test_transitions_dynamic_changes.html b/layout/style/test/test_transitions_dynamic_changes.html
--- a/layout/style/test/test_transitions_dynamic_changes.html
+++ b/layout/style/test/test_transitions_dynamic_changes.html
@@ -35,12 +35,24 @@ p.style.MozTransitionDelay = "0";
 is(cs.textIndent, "50px", "changing delay doesn't change transitioning");
 p.style.MozTransitionProperty = "text-indent";
 is(cs.textIndent, "50px",
    "irrelevant change to transition property doesn't change transitioning");
 p.style.MozTransitionProperty = "font";
 is(cs.textIndent, "0px",
    "relevant change to transition property does change transitioning");
 
+/** Test for Bug 522643 */
+p.style.MozTransitionProperty = "text-indent";
+p.style.textIndent = "100px";
+is(cs.textIndent, "50px", "transition is halfway");
+p.style.MozTransitionDuration = "0";
+p.style.MozTransitionDelay = "0";
+is(cs.textIndent, "50px",
+   "changing duration and delay doesn't change transitioning");
+p.style.textIndent = "0px";
+is(cs.textIndent, "0px",
+   "changing property after changing duration and delay stops transition");
+
 </script>
 </pre>
 </body>
 </html>
