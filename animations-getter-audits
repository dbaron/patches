From: L. David Baron <dbaron@dbaron.org>

Audit whether we should have fewer animation codepaths here.

diff --git a/layout/base/nsLayoutUtils.cpp b/layout/base/nsLayoutUtils.cpp
--- a/layout/base/nsLayoutUtils.cpp
+++ b/layout/base/nsLayoutUtils.cpp
@@ -368,16 +368,18 @@ TextAlignTrueEnabledPrefChangeCallback(c
   MOZ_ASSERT(sIndexOfTrueInTextAlignTable >= 0);
   nsCSSProps::kTextAlignKTable[sIndexOfTrueInTextAlignTable] =
     isTextAlignTrueEnabled ? eCSSKeyword_true : eCSSKeyword_UNKNOWN;
   MOZ_ASSERT(sIndexOfTrueInTextAlignLastTable >= 0);
   nsCSSProps::kTextAlignLastKTable[sIndexOfTrueInTextAlignLastTable] =
     isTextAlignTrueEnabled ? eCSSKeyword_true : eCSSKeyword_UNKNOWN;
 }
 
+// FIXME: There are way too many subtly-different variants below;
+// probably many of the differences represent bugs.
 bool
 nsLayoutUtils::HasAnimationsForCompositor(const nsIFrame* aFrame,
                                           nsCSSProperty aProperty)
 {
   nsPresContext* presContext = aFrame->PresContext();
   return presContext->AnimationManager()->GetAnimationsForCompositor(aFrame, aProperty) ||
          presContext->TransitionManager()->GetAnimationsForCompositor(aFrame, aProperty);
 }
diff --git a/layout/style/AnimationCommon.cpp b/layout/style/AnimationCommon.cpp
--- a/layout/style/AnimationCommon.cpp
+++ b/layout/style/AnimationCommon.cpp
@@ -707,16 +707,18 @@ AnimationCollection::CanPerformOnComposi
   // No properties to animate
   if (!existsProperty) {
     return false;
   }
 
   return true;
 }
 
+// FIXME: Why would a caller ever want this rather than
+// HasCurrentAnimationsForProperty?
 bool
 AnimationCollection::HasCurrentAnimationOfProperty(nsCSSProperty
                                                      aProperty) const
 {
   for (Animation* animation : mAnimations) {
     if (animation->HasCurrentEffect() &&
         animation->GetEffect()->HasAnimationOfProperty(aProperty)) {
       return true;
