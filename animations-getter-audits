From: L. David Baron <dbaron@dbaron.org>

Audit whether we should have fewer animation codepaths here.

diff --git a/layout/base/nsLayoutUtils.cpp b/layout/base/nsLayoutUtils.cpp
--- a/layout/base/nsLayoutUtils.cpp
+++ b/layout/base/nsLayoutUtils.cpp
@@ -363,16 +363,18 @@ TextAlignTrueEnabledPrefChangeCallback(c
   MOZ_ASSERT(sIndexOfTrueInTextAlignTable >= 0);
   nsCSSProps::kTextAlignKTable[sIndexOfTrueInTextAlignTable] =
     isTextAlignTrueEnabled ? eCSSKeyword_true : eCSSKeyword_UNKNOWN;
   MOZ_ASSERT(sIndexOfTrueInTextAlignLastTable >= 0);
   nsCSSProps::kTextAlignLastKTable[sIndexOfTrueInTextAlignLastTable] =
     isTextAlignTrueEnabled ? eCSSKeyword_true : eCSSKeyword_UNKNOWN;
 }
 
+// FIXME: There are way too many subtly-different variants below;
+// probably many of the differences represent bugs.
 bool
 nsLayoutUtils::HasAnimationsForCompositor(nsIContent* aContent,
                                           nsCSSProperty aProperty)
 {
   return nsAnimationManager::GetAnimationsForCompositor(aContent, aProperty) ||
          nsTransitionManager::GetAnimationsForCompositor(aContent, aProperty);
 }
 
diff --git a/layout/style/AnimationCommon.cpp b/layout/style/AnimationCommon.cpp
--- a/layout/style/AnimationCommon.cpp
+++ b/layout/style/AnimationCommon.cpp
@@ -669,16 +669,18 @@ AnimationPlayerCollection::PostUpdateLay
           mManager->mPresContext->RestyleManager()->
             PostRestyleEvent(element, nsRestyleHint(0), changeHint);
         }
       }
     }
   }
 }
 
+// FIXME: Why would a caller ever want this rather than
+// HasCurrentAnimationsForProperty?
 bool
 AnimationPlayerCollection::HasAnimationOfProperty(
   nsCSSProperty aProperty) const
 {
   for (size_t playerIdx = mPlayers.Length(); playerIdx-- != 0; ) {
     const KeyframeEffectReadonly* effect = mPlayers[playerIdx]->GetEffect();
     if (effect && effect->HasAnimationOfProperty(aProperty) &&
         !effect->IsFinishedTransition()) {
