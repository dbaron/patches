# HG changeset patch
# User L. David Baron <dbaron@dbaron.org>
# Date 1230041219 18000
# Node ID 441f119f1a0c0ded15ad4c4e9b563befd64497cc
# Parent  d24fad239a51141aa0ddedfffea78f9f8e539d3b
Readd test for computed style for large integers (even though patch was backed out).  (Bug 470769)  r+sr=bzbarsky

diff --git a/layout/style/test/Makefile.in b/layout/style/test/Makefile.in
--- a/layout/style/test/Makefile.in
+++ b/layout/style/test/Makefile.in
@@ -93,16 +93,17 @@ _TEST_FILES =	test_acid3_test46.html \
 		test_bug391221.html \
 		test_bug397427.html \
 		test_bug401046.html \
 		test_bug405818.html \
 		test_bug412901.html \
 		test_bug437915.html \
 		test_bug450191.html \
 		test_bug453896_deck.html \
+		test_bug470769.html \
 		test_cascade.html \
 		test_compute_data_with_start_struct.html \
 		test_css_eof_handling.html \
 		test_dont_use_document_colors.html \
 		test_font_face_parser.html \
 		test_hover.html \
 		test_inherit_computation.html \
 		test_inherit_storage.html \
diff --git a/layout/style/test/test_bug470769.html b/layout/style/test/test_bug470769.html
new file mode 100644
--- /dev/null
+++ b/layout/style/test/test_bug470769.html
@@ -0,0 +1,32 @@
+<!DOCTYPE HTML>
+<html>
+<!--
+https://bugzilla.mozilla.org/show_bug.cgi?id=470769
+-->
+<head>
+  <title>Test for Bug 470769</title>
+  <script type="application/javascript" src="/MochiKit/MochiKit.js"></script>
+  <script type="application/javascript" src="/tests/SimpleTest/SimpleTest.js"></script>
+  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css"/>
+</head>
+<body>
+<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=470769">Mozilla Bug 470769</a>
+<p id="display"></p>
+<div id="content" style="display: none">
+  
+</div>
+<pre id="test">
+<script type="application/javascript">
+
+/** Test for Bug 470769 **/
+
+var e = document.getElementById("display");
+e.setAttribute("style", "z-index: 2147483647"); // maximum signed 32-bit
+is(e.style.zIndex, "2147483647", "element.style should roundtrip correctly");
+todo_is(window.getComputedStyle(e, "").zIndex, "2147483647",
+   "getComputedStyle should roundtrip correctly");
+
+</script>
+</pre>
+</body>
+</html>
