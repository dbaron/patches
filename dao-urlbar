Make double-clicking in the URL bar again place the selected text in the X selection.  Patch by DÃ£o Gottwald <dao@design-noir.de>  b=393828  r=mano

diff --git a/browser/base/content/urlbarBindings.xml b/browser/base/content/urlbarBindings.xml
--- a/browser/base/content/urlbarBindings.xml
+++ b/browser/base/content/urlbarBindings.xml
@@ -438,7 +438,7 @@
           if (aEvent.type == "mousedown" &&
               aEvent.button == 0 && aEvent.detail == 2 &&
               this.doubleClickSelectsAll) {
-            this.inputField.select();
+            this.editor.selectAll();
             aEvent.preventDefault();
           }
         ]]></body>
diff --git a/toolkit/content/widgets/textbox.xml b/toolkit/content/widgets/textbox.xml
--- a/toolkit/content/widgets/textbox.xml
+++ b/toolkit/content/widgets/textbox.xml
@@ -157,7 +157,7 @@
             else if (this.mIgnoreFocus)
               this.mIgnoreFocus = false;
             else if (this.clickSelectsAll)
-              this.inputField.select();
+              this.editor.selectAll();
 
             this.setAttribute("focused", "true");
           }
@@ -185,7 +185,7 @@
         <![CDATA[
           if (!this.mIgnoreClick && this.clickSelectsAll &&
               this.inputField.selectionStart == this.inputField.selectionEnd)
-            this.inputField.select();
+            this.editor.selectAll();
         ]]>
       </handler>
     </handlers>
@@ -371,8 +371,7 @@
                              getService(CI.mozIJSSubScriptLoader);
               loader.loadSubScript("chrome://global/content/inlineSpellCheckUI.js", this);
               if ("InlineSpellCheckerUI" in this)
-                this.InlineSpellCheckerUI.init(
-                  textbox.inputField.QueryInterface(CI.nsIDOMNSEditableElement).editor);
+                this.InlineSpellCheckerUI.init(textbox.editor);
             } catch(ex) { }
           }
 
