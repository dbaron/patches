From: L. David Baron <dbaron@dbaron.org>

Make JSSLOT_CLASS_MASK_BITS a type that is the same size as pointers, so that (classword & ~JSSLOT_CLASS_MASK_BITS) doesn't lose the upper 32 bits on 64-bit platforms.  (Bug 510522)

diff --git a/js/src/jsobj.h b/js/src/jsobj.h
--- a/js/src/jsobj.h
+++ b/js/src/jsobj.h
@@ -92,17 +92,17 @@ struct JSObjectMap {
 };
 
 const uint32 JS_INITIAL_NSLOTS = 5;
 
 const uint32 JSSLOT_PROTO   = 0;
 const uint32 JSSLOT_PARENT  = 1;
 const uint32 JSSLOT_PRIVATE = 2;
 
-const uint32 JSSLOT_CLASS_MASK_BITS = 3;
+const jsuword JSSLOT_CLASS_MASK_BITS = 3;
 
 /*
  * JSObject struct, with members sized to fit in 32 bytes on 32-bit targets,
  * 64 bytes on 64-bit systems. The JSFunction struct is an extension of this
  * struct allocated from a larger GC size-class.
  *
  * The classword member stores the JSClass pointer for this object, with the
  * least two bits encoding whether this object is a "delegate" or a "system"
