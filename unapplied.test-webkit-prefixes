From: L. David Baron <dbaron@dbaron.org>

NOT FOR CHECKIN:  Patch for testing the effect of supporting -webkit- prefixes or unprefixed properties.

FIXME: Test that names are all correct

FIXME: Add aliases for transition/animation events.

diff --git a/dom/interfaces/css/nsIDOMCSS2Properties.idl b/dom/interfaces/css/nsIDOMCSS2Properties.idl
--- a/dom/interfaces/css/nsIDOMCSS2Properties.idl
+++ b/dom/interfaces/css/nsIDOMCSS2Properties.idl
@@ -798,16 +798,115 @@ interface nsIDOMCSS2Properties : nsISupp
                                         // raises(DOMException) on setting
 
            attribute DOMString        MozBorderImage;
                                         // raises(DOMException) on setting
 
            attribute DOMString        MozColorCorrection;
                                         // raises(DOMException) on setting
 
+           attribute DOMString         webkitAnimation;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitAnimationDelay;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitAnimationDirection;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitAnimationDuration;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitAnimationFillMode;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitAnimationIterationCount;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitAnimationName;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitAnimationPlayState;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitAnimationTimingFunction;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitTextSizeAdjust;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitTransform;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitTransformOrigin;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitTransformStyle;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitTransition;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitTransitionDelay;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitTransitionDuration;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitTransitionProperty;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitTransitionTimingFunction;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitBorderRadius;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitBorderTopLeftRadius;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitBorderTopRightRadius;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitBorderBottomLeftRadius;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitBorderBottomRightRadius;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitAppearance;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitBackgroundClip;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitBackgroundOrigin;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitBackgroundSize;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitBorderImage;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitBoxShadow;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         webkitUserSelect;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         textSizeAdjust;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         appearance;
+                                        // raises(DOMException) on setting
+
+           attribute DOMString         userSelect;
+                                        // raises(DOMException) on setting
+
 /* XXXdholbert NOTE: Flexbox properties are commented out here, until our
    layout engine responds to them.  In builds with MOZ_FLEXBOX enabled, this
    block should be uncommented (and this interface's uuid should be revved).
    (This would be #ifdef MOZ_FLEXBOX, if that worked in IDL files.)
            attribute DOMString        MozAlignItems;
                                         // raises(DOMException) on setting
 
            attribute DOMString        MozAlignSelf;
diff --git a/layout/style/nsCSSParser.cpp b/layout/style/nsCSSParser.cpp
--- a/layout/style/nsCSSParser.cpp
+++ b/layout/style/nsCSSParser.cpp
@@ -1504,16 +1504,17 @@ CSSParserImpl::ParseAtRule(RuleAppendFun
     parseFunc = &CSSParserImpl::ParseFontFaceRule;
     newSection = eCSSSection_General;
 
   } else if (mToken.mIdent.LowerCaseEqualsLiteral("page")) {
     parseFunc = &CSSParserImpl::ParsePageRule;
     newSection = eCSSSection_General;
 
   } else if (mToken.mIdent.LowerCaseEqualsLiteral("-moz-keyframes") ||
+             mToken.mIdent.LowerCaseEqualsLiteral("-webkit-keyframes") ||
              mToken.mIdent.LowerCaseEqualsLiteral("keyframes")) {
     parseFunc = &CSSParserImpl::ParseKeyframesRule;
     newSection = eCSSSection_General;
 
   } else {
     if (!NonMozillaVendorIdentifier(mToken.mIdent)) {
       REPORT_UNEXPECTED_TOKEN(PEUnknownAtRule);
       OUTPUT_ERROR();
diff --git a/layout/style/nsCSSPropAliasList.h b/layout/style/nsCSSPropAliasList.h
--- a/layout/style/nsCSSPropAliasList.h
+++ b/layout/style/nsCSSPropAliasList.h
@@ -51,8 +51,50 @@ CSS_PROP_ALIAS(-moz-animation, animation
 CSS_PROP_ALIAS(-moz-animation-delay, animation_delay, MozAnimationDelay, "")
 CSS_PROP_ALIAS(-moz-animation-direction, animation_direction, MozAnimationDirection, "")
 CSS_PROP_ALIAS(-moz-animation-duration, animation_duration, MozAnimationDuration, "")
 CSS_PROP_ALIAS(-moz-animation-fill-mode, animation_fill_mode, MozAnimationFillMode, "")
 CSS_PROP_ALIAS(-moz-animation-iteration-count, animation_iteration_count, MozAnimationIterationCount, "")
 CSS_PROP_ALIAS(-moz-animation-name, animation_name, MozAnimationName, "")
 CSS_PROP_ALIAS(-moz-animation-play-state, animation_play_state, MozAnimationPlayState, "")
 CSS_PROP_ALIAS(-moz-animation-timing-function, animation_timing_function, MozAnimationTimingFunction, "")
+
+// -webkit- prefixes
+CSS_PROP_ALIAS(-webkit-animation, animation, WebkitAnimation, "")
+CSS_PROP_ALIAS(-webkit-animation-delay, animation_delay, WebkitAnimationDelay, "")
+CSS_PROP_ALIAS(-webkit-animation-direction, animation_direction, WebkitAnimationDirection, "")
+CSS_PROP_ALIAS(-webkit-animation-duration, animation_duration, WebkitAnimationDuration, "")
+CSS_PROP_ALIAS(-webkit-animation-fill-mode, animation_fill_mode, WebkitAnimationFillMode, "")
+CSS_PROP_ALIAS(-webkit-animation-iteration-count, animation_iteration_count, WebkitAnimationIterationCount, "")
+CSS_PROP_ALIAS(-webkit-animation-name, animation_name, WebkitAnimationName, "")
+CSS_PROP_ALIAS(-webkit-animation-play-state, animation_play_state, WebkitAnimationPlayState, "")
+CSS_PROP_ALIAS(-webkit-animation-timing-function, animation_timing_function, WebkitAnimationTimingFunction, "")
+
+CSS_PROP_ALIAS(-webkit-text-size-adjust, text_size_adjust, WebkitTextSizeAdjust, "")
+
+CSS_PROP_ALIAS(-webkit-transform, transform, WebkitTransform, "")
+CSS_PROP_ALIAS(-webkit-transform-origin, transform_origin, WebkitTransformOrigin, "")
+CSS_PROP_ALIAS(-webkit-transform-style, transform_style, WebkitTransformStyle, "")
+
+CSS_PROP_ALIAS(-webkit-transition, transition, WebkitTransition, "")
+CSS_PROP_ALIAS(-webkit-transition-delay, transition_delay, WebkitTransitionDelay, "")
+CSS_PROP_ALIAS(-webkit-transition-duration, transition_duration, WebkitTransitionDuration, "")
+CSS_PROP_ALIAS(-webkit-transition-property, transition_property, WebkitTransitionProperty, "")
+CSS_PROP_ALIAS(-webkit-transition-timing-function, transition_timing_function, WebkitTransitionTimingFunction, "")
+
+CSS_PROP_ALIAS(-webkit-border-radius, border_radius, WebkitBorderRadius, "")
+CSS_PROP_ALIAS(-webkit-border-top-left-radius, border_top_left_radius, WebkitBorderTopLeftRadius, "") // really no dom property
+CSS_PROP_ALIAS(-webkit-border-top-right-radius, border_top_right_radius, WebkitBorderTopRightRadius, "") // really no dom property
+CSS_PROP_ALIAS(-webkit-border-bottom-left-radius, border_bottom_left_radius, WebkitBorderBottomLeftRadius, "") // really no dom property
+CSS_PROP_ALIAS(-webkit-border-bottom-right-radius, border_bottom_right_radius, WebkitBorderBottomRightRadius, "") // really no dom property
+
+CSS_PROP_ALIAS(-webkit-appearance, appearance, WebkitAppearance, "")
+CSS_PROP_ALIAS(-webkit-background-clip, background_clip, WebkitBackgroundClip, "")
+CSS_PROP_ALIAS(-webkit-background-origin, background_origin, WebkitBackgroundOrigin, "")
+CSS_PROP_ALIAS(-webkit-background-size, background_size, WebkitBackgroundSize, "")
+CSS_PROP_ALIAS(-webkit-border-image, border_image, WebkitBorderImage, "")
+CSS_PROP_ALIAS(-webkit-box-shadow, box_shadow, WebkitBoxShadow, "")
+CSS_PROP_ALIAS(-webkit-user-select, user_select, WebkitUserSelect, "")
+
+// no prefixes
+CSS_PROP_ALIAS(text-size-adjust, text_size_adjust, TextSizeAdjust, "")
+CSS_PROP_ALIAS(appearance, appearance, Appearance, "")
+CSS_PROP_ALIAS(user-select, user_select, UserSelect, "")
