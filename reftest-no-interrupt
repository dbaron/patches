From: L. David Baron <dbaron@dbaron.org>

Bug 992324 - Disable interruptible reflow in reftest harness.

diff --git a/layout/tools/reftest/reftest-preferences.js b/layout/tools/reftest/reftest-preferences.js
--- a/layout/tools/reftest/reftest-preferences.js
+++ b/layout/tools/reftest/reftest-preferences.js
@@ -35,9 +35,17 @@
     // pages to be 800px (instead of the default of 980px). This ensures that
     // in our 800px window we don't zoom out by default to try to fit the
     // assumed 980px content.
     branch.setIntPref("browser.viewport.desktopWidth", 800);
     // Disable the fade out (over time) of overlay scrollbars, since we
     // can't guarantee taking both reftest snapshots at the same point
     // during the fade.
     branch.setBoolPref("layout.testing.overlay-scrollbars.always-visible", true);
-
+    // Disable interruptible reflow since (1) it's normally not going to
+    // happen, but (2) it might happen if we somehow end up with both
+    // pending user events and clock skew.  So to avoid having to change
+    // MakeProgress to deal with waiting for interruptible reflows to
+    // complete for a rare edge case, we just disable interruptible
+    // reflow so that that rare edge case doesn't lead to reftest
+    // failures.
+    // FIXME: Need a pref to control interruptible reflow, not just an
+    // env var.
