From: L. David Baron <dbaron@dbaron.org>

Bug 1149848 - Stop calling NotifyAnimated (and thus repeatedly cycling layer activity) when sending OMT animations to the compositor.

I checked in gdb that with the patch, we're no longer calling
PresShell::Paint repeatedly on the testcase (whereas we are without the
patch).

FIXME: Remove the aFlags parameter!

diff --git a/layout/style/AnimationCommon.cpp b/layout/style/AnimationCommon.cpp
--- a/layout/style/AnimationCommon.cpp
+++ b/layout/style/AnimationCommon.cpp
@@ -137,28 +137,16 @@ CommonAnimationManager::GetAnimationsFor
     return nullptr;
   }
 
   if (!(aFlags & GetCompositorAnimationOptions::NotifyActiveLayerTracker)) {
     return collection;
   }
 
   // This animation can be done on the compositor.
-  // Mark the frame as active, in case we are able to throttle this animation.
-  nsIFrame* frame = nsLayoutUtils::GetStyleFrame(collection->mElement);
-  if (frame) {
-    const auto& info = sLayerAnimationInfo;
-    for (size_t i = 0; i < ArrayLength(info); i++) {
-      if (aProperty == info[i].mProperty) {
-        ActiveLayerTracker::NotifyAnimated(frame, aProperty);
-        break;
-      }
-    }
-  }
-
   return collection;
 }
 
 /*
  * nsISupports implementation
  */
 
 NS_IMPL_ISUPPORTS(CommonAnimationManager, nsIStyleRuleProcessor)
