TestHarness.h should give errors with TEST-UNEXPECTED-FAIL.  (Bug 477512)

diff --git a/xpcom/tests/TestHarness.h b/xpcom/tests/TestHarness.h
--- a/xpcom/tests/TestHarness.h
+++ b/xpcom/tests/TestHarness.h
@@ -50,24 +50,24 @@
 #include "nsAutoPtr.h"
 #include "nsStringGlue.h"
 #include <stdio.h>
 #include <stdlib.h>
 #include <stdarg.h>
 
 /**
  * Prints the given failure message and arguments using printf, prepending
- * "FAIL " for the benefit of the test harness and appending "\n" to eliminate
- * having to type it at each call site.
+ * "TEST-UNEXPECTED-FAIL " for the benefit of the test harness and
+ * appending "\n" to eliminate having to type it at each call site.
  */
 void fail(const char* msg, ...)
 {
   va_list ap;
 
-  printf("FAIL ");
+  printf("TEST-UNEXPECTED-FAIL | ");
 
   va_start(ap, msg);
   vprintf(msg, ap);
   va_end(ap);
 
   putchar('\n');
 }
 
diff --git a/xpcom/tests/TestPipe.cpp b/xpcom/tests/TestPipe.cpp
--- a/xpcom/tests/TestPipe.cpp
+++ b/xpcom/tests/TestPipe.cpp
@@ -199,17 +199,17 @@ nsresult TestBackwardsAllocator()
   nsCOMPtr<nsIAsyncOutputStream> output;
   rv = TP_NewPipe2(getter_AddRefs(input),
                    getter_AddRefs(output),
                    PR_FALSE,
                    PR_FALSE,
                    SEGMENT_SIZE, SEGMENT_COUNT, allocator); 
   if (NS_FAILED(rv))
   {
-    printf("FAIL TP_NewPipe2 failed: %x\n", rv);
+    fail("TP_NewPipe2 failed: %x", rv);
     return rv;
   }
 
   const PRUint32 BUFFER_LENGTH = 100;
   const char written[] =
     "0123456789"
     "1123456789"
     "2123456789"
