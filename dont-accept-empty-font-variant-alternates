From: L. David Baron <dbaron@dbaron.org>

Don't accept an empty value for font-variant-alternates.

This is needed to prevent a test failure with the next patch (which
removes the ExpectEndProperty check from the CSS_PROPERTY_PARSE_VALUE
case in CSSParserImpl::ParseProperty(nsCSSProperty) since its callers
handle checking for appropriate endings), since the way this function
returns success for empty values leads var() functions alone inside
font-variant-alternates to be rejected, since
CSSParserImpl::ParseProperty(nsCSSProperty) won't try reparsing with
variables.

diff --git a/layout/style/nsCSSParser.cpp b/layout/style/nsCSSParser.cpp
--- a/layout/style/nsCSSParser.cpp
+++ b/layout/style/nsCSSParser.cpp
@@ -11129,16 +11129,21 @@ CSSParserImpl::ParseFontVariantAlternate
       } else {
         list->mNext = new nsCSSValueList;
         list = list->mNext;
       }
       list->mValue = value;
     }
   }
 
+  if (featureFlags == 0) {
+    // ParseSingleAlternate failed the first time through the loop.
+    return false;
+  }
+
   nsCSSValue featureValue;
   featureValue.SetIntValue(featureFlags, eCSSUnit_Enumerated);
   aValue.SetPairValue(featureValue, listValue);
 
   return true;
 }
 
 // aMasks - array of masks for mutually-exclusive property values,
