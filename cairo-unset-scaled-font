From: L. David Baron <dbaron@dbaron.org>

Unset both gstate->scaled_font and gstate->previous_scaled_font when they need to be invalidated, rather than caching scaled_font in previous_scaled_font.  (Bug 518172)

diff --git a/gfx/cairo/cairo/src/cairo-gstate.c b/gfx/cairo/cairo/src/cairo-gstate.c
--- a/gfx/cairo/cairo/src/cairo-gstate.c
+++ b/gfx/cairo/cairo/src/cairo-gstate.c
@@ -1456,24 +1456,25 @@ _cairo_gstate_copy_clip_rectangle_list (
     _cairo_clip_fini (&clip);
 
     return list;
 }
 
 static void
 _cairo_gstate_unset_scaled_font (cairo_gstate_t *gstate)
 {
-    if (gstate->scaled_font == NULL)
-	return;
+    if (gstate->scaled_font != NULL) {
+	cairo_scaled_font_destroy (gstate->scaled_font);
+	gstate->scaled_font = NULL;
+    }
 
-    if (gstate->previous_scaled_font != NULL)
+    if (gstate->previous_scaled_font != NULL) {
 	cairo_scaled_font_destroy (gstate->previous_scaled_font);
-
-    gstate->previous_scaled_font = gstate->scaled_font;
-    gstate->scaled_font = NULL;
+	gstate->previous_scaled_font = NULL;
+    }
 }
 
 cairo_status_t
 _cairo_gstate_select_font_face (cairo_gstate_t       *gstate,
 				const char           *family,
 				cairo_font_slant_t    slant,
 				cairo_font_weight_t   weight)
 {
