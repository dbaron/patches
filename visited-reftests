# HG changeset patch
# Parent b5a503b6996984c2a24fddb57d09f4bf999f77c5
# User L. David Baron <dbaron@dbaron.org>
Reftests for :visited handling.  (Bug 147777)

diff --git a/layout/reftests/css-visited/color-on-link-1.html b/layout/reftests/css-visited/color-on-link-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-visited/color-on-link-1.html
@@ -0,0 +1,6 @@
+<!DOCTYPE HTML>
+<style type="text/css">
+:link { color: fuchsia; }
+:visited { color: purple; }
+</style>
+<a href="unvisited-page.html">link</a>
diff --git a/layout/reftests/css-visited/color-on-link-before-1.html b/layout/reftests/css-visited/color-on-link-before-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-visited/color-on-link-before-1.html
@@ -0,0 +1,6 @@
+<!DOCTYPE HTML>
+<style type="text/css">
+:link:before { content: "link"; color: fuchsia; }
+:visited:before { content: "link"; color: purple; }
+</style>
+<a href="unvisited-page.html"></a>
diff --git a/layout/reftests/css-visited/color-on-visited-1.html b/layout/reftests/css-visited/color-on-visited-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-visited/color-on-visited-1.html
@@ -0,0 +1,6 @@
+<!DOCTYPE HTML>
+<style type="text/css">
+:link { color: fuchsia; }
+:visited { color: purple; }
+</style>
+<a href="visited-page.html">link</a>
diff --git a/layout/reftests/css-visited/color-on-visited-before-1.html b/layout/reftests/css-visited/color-on-visited-before-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-visited/color-on-visited-before-1.html
@@ -0,0 +1,6 @@
+<!DOCTYPE HTML>
+<style type="text/css">
+:link:before { content: "link"; color: fuchsia; }
+:visited:before { content: "link"; color: purple; }
+</style>
+<a href="visited-page.html"></a>
diff --git a/layout/reftests/css-visited/reftests.list b/layout/reftests/css-visited/reftests.list
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-visited/reftests.list
@@ -0,0 +1,4 @@
+load visited-page.html
+!= color-on-link-1.html color-on-visited-1.html
+!= color-on-link-before-1.html color-on-visited-before-1.html
+== width-on-link-1.html width-on-visited-1.html
diff --git a/layout/reftests/css-visited/visited-page.html b/layout/reftests/css-visited/visited-page.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-visited/visited-page.html
@@ -0,0 +1,1 @@
+<!DOCTYPE HTML>
diff --git a/layout/reftests/css-visited/width-on-link-1.html b/layout/reftests/css-visited/width-on-link-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-visited/width-on-link-1.html
@@ -0,0 +1,14 @@
+<!DOCTYPE HTML>
+<style type="text/css">
+:link, :visited { display: block }
+:link { width: 100px; }
+:visited { width: 200px; }
+</style>
+<table>
+  <tr>
+    <a href="unvisited-page.html"></a>
+  </tr>
+  <tr>
+    text in next cell
+  </tr>
+</table>
diff --git a/layout/reftests/css-visited/width-on-visited-1.html b/layout/reftests/css-visited/width-on-visited-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-visited/width-on-visited-1.html
@@ -0,0 +1,14 @@
+<!DOCTYPE HTML>
+<style type="text/css">
+:link, :visited { display: block }
+:link { width: 100px; }
+:visited { width: 200px; }
+</style>
+<table>
+  <tr>
+    <a href="visited-page.html"></a>
+  </tr>
+  <tr>
+    text in next cell
+  </tr>
+</table>
diff --git a/layout/reftests/reftest.list b/layout/reftests/reftest.list
--- a/layout/reftests/reftest.list
+++ b/layout/reftests/reftest.list
@@ -57,16 +57,19 @@ include css-namespace/reftest.list
 include css-parsing/reftest.list
 
 # css transitions
 include css-transitions/reftest.list
 
 # css values and units
 include css-valuesandunits/reftest.list
 
+# css :visited
+include css-visited/reftest.list
+
 # columns/
 include columns/reftest.list
 
 # content/
 include ../../content/test/reftest/reftest.list
 
 # counters/
 include counters/reftest.list
