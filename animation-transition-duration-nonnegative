From: L. David Baron <dbaron@dbaron.org>

Require animation-duration and transtion-duration to be nonnegative at parse time.

diff --git a/layout/style/nsCSSPropList.h b/layout/style/nsCSSPropList.h
--- a/layout/style/nsCSSPropList.h
+++ b/layout/style/nsCSSPropList.h
@@ -377,17 +377,17 @@ CSS_PROP_DISPLAY(
     eStyleAnimType_None)
 CSS_PROP_DISPLAY(
     -moz-animation-duration,
     animation_duration,
     CSS_PROP_DOMPROP_PREFIXED(AnimationDuration),
     CSS_PROPERTY_PARSE_VALUE_LIST |
         CSS_PROPERTY_VALUE_LIST_USES_COMMAS,
     "",
-    VARIANT_TIME, // used by list parsing
+    VARIANT_TIME | VARIANT_NONNEGATIVE_DIMENSION, // used by list parsing
     nsnull,
     CSS_PROP_NO_OFFSET,
     eStyleAnimType_None)
 CSS_PROP_DISPLAY(
     -moz-animation-fill-mode,
     animation_fill_mode,
     CSS_PROP_DOMPROP_PREFIXED(AnimationFillMode),
     CSS_PROPERTY_PARSE_VALUE_LIST |
@@ -2724,17 +2724,17 @@ CSS_PROP_DISPLAY(
     eStyleAnimType_None)
 CSS_PROP_DISPLAY(
     -moz-transition-duration,
     transition_duration,
     CSS_PROP_DOMPROP_PREFIXED(TransitionDuration),
     CSS_PROPERTY_PARSE_VALUE_LIST |
         CSS_PROPERTY_VALUE_LIST_USES_COMMAS,
     "",
-    VARIANT_TIME, // used by list parsing
+    VARIANT_TIME | VARIANT_NONNEGATIVE_DIMENSION, // used by list parsing
     nsnull,
     CSS_PROP_NO_OFFSET,
     eStyleAnimType_None)
 CSS_PROP_DISPLAY(
     -moz-transition-property,
     transition_property,
     CSS_PROP_DOMPROP_PREFIXED(TransitionProperty),
     CSS_PROPERTY_PARSE_FUNCTION |
