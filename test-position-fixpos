From: L. David Baron <dbaron@dbaron.org>

Bug 1227766 - Add test that position does not create a fixed-position containing block.  r?dholbert

I confirmed that the new test fails without the previous patch (since
the abspos element is 50px from the left edge of the viewport instead of
150px, and at the top edge instead of 100px from the top).  The test
passes with the patch.

diff --git a/layout/reftests/w3c-css/submitted/will-change/reftest.list b/layout/reftests/w3c-css/submitted/will-change/reftest.list
--- a/layout/reftests/w3c-css/submitted/will-change/reftest.list
+++ b/layout/reftests/w3c-css/submitted/will-change/reftest.list
@@ -9,10 +9,11 @@
 == will-change-stacking-context-position-1.html green-square-100-by-100-ref.html
 == will-change-stacking-context-transform-1.html green-square-100-by-100-ref.html
 == will-change-stacking-context-transform-style-1.html green-square-100-by-100-ref.html
 == will-change-stacking-context-z-index-1.html green-square-100-by-100-ref.html
 test-pref(layout.css.contain.enabled,true) == will-change-fixpos-cb-contain-1.html green-square-100-by-100-offset-ref.html
 == will-change-fixpos-cb-filter-1.html green-square-100-by-100-offset-ref.html
 == will-change-fixpos-cb-height-1.html green-square-100-by-100-offset-ref.html
 == will-change-fixpos-cb-perspective-1.html green-square-100-by-100-offset-ref.html
+== will-change-fixpos-cb-position-1.html green-square-100-by-100-offset-ref.html
 == will-change-fixpos-cb-transform-1.html green-square-100-by-100-offset-ref.html
 == will-change-fixpos-cb-transform-style-1.html green-square-100-by-100-offset-ref.html
diff --git a/layout/reftests/w3c-css/submitted/will-change/will-change-fixpos-cb-height-1.html b/layout/reftests/w3c-css/submitted/will-change/will-change-fixpos-cb-position-1.html
copy from layout/reftests/w3c-css/submitted/will-change/will-change-fixpos-cb-height-1.html
copy to layout/reftests/w3c-css/submitted/will-change/will-change-fixpos-cb-position-1.html
--- a/layout/reftests/w3c-css/submitted/will-change/will-change-fixpos-cb-height-1.html
+++ b/layout/reftests/w3c-css/submitted/will-change/will-change-fixpos-cb-position-1.html
@@ -1,23 +1,23 @@
 <!DOCTYPE html>
 <meta charset="utf-8">
-<title>CSS will-change: 'will-change: height' does not create a containing block for fixed positioned elements</title>
+<title>CSS will-change: 'will-change: position' does not create a containing block for fixed positioned elements but does create a containing block for absolutely positioned elements</title>
 <link rel="author" title="L. David Baron" href="http://dbaron.org/">
 <link rel="author" title="Mozilla" href="http://www.mozilla.org/">
 <link rel="help" href="https://drafts.csswg.org/css-will-change-1/#will-change">
 <link rel="match" href="green-square-100-by-100-offset-ref.html">
 <meta name="assert" content="If any non-initial value of a property would cause the element to generate a containing block for fixed-position elements, specifying that property in will-change must cause the element to generate a containing block for fixed-position elements.">
 <style>
 html, body { margin: 0; padding: 0; }
 div { width: 100px; height: 100px }
-#wc { will-change: height; margin: 100px 0 0 100px; background: red }
-.child { top: 100px; left: 100px; width: 50px; background: green }
-#fixpos { position: fixed }
-#abspos { position: absolute; left: 150px }
+#wc { will-change: position; margin: 100px 0 0 100px; background: red }
+.child { width: 50px; background: green }
+#fixpos { position: fixed; top: 100px; left: 100px }
+#abspos { position: absolute; top: 0; left: 50px }
 </style>
 <body>
   <div id="wc">
     <div class="child" id="fixpos">
     </div>
     <div class="child" id="abspos">
     </div>
   </div>
