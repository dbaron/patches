From: L. David Baron <dbaron@dbaron.org>

Bug 847287 patch N - Invalidate style rule.

diff --git a/layout/style/nsAnimationManager.cpp b/layout/style/nsAnimationManager.cpp
--- a/layout/style/nsAnimationManager.cpp
+++ b/layout/style/nsAnimationManager.cpp
@@ -834,16 +834,20 @@ nsAnimationManager::UpdateCascadeResults
       }
     }
   }
 
   if (changed) {
     nsPresContext* presContext = aElementAnimations->mManager->PresContext();
     presContext->RestyleManager()->IncrementAnimationGeneration();
     aElementAnimations->UpdateAnimationGeneration(presContext);
+
+    // Invalidate our style rule.
+    aElementAnimations->mNeedsRefreshes = true;
+    aElementAnimations->mStyleRuleRefreshTime = TimeStamp();
   }
 }
 
 /* virtual */ void
 nsAnimationManager::WillRefresh(mozilla::TimeStamp aTime)
 {
   MOZ_ASSERT(mPresContext,
              "refresh driver should not notify additional observers "
