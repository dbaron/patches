Always delete the old content array so that we run destructors.  b=397022

diff --git a/layout/style/nsStyleStruct.cpp b/layout/style/nsStyleStruct.cpp
--- a/layout/style/nsStyleStruct.cpp
+++ b/layout/style/nsStyleStruct.cpp
@@ -1274,6 +1274,45 @@ nsStyleContentData& nsStyleContentData::
   return *this;
 }
 
+// ADOPTS string buffer
+void
+nsStyleContentData::Set(nsStyleContentType aType, PRUnichar *aString)
+{
+  NS_ASSERTION(aType != eStyleContentType_Image &&
+               aType != eStyleContentType_Counter &&
+               aType != eStyleContentType_Counters,
+               "bad type");
+  this->~nsStyleContentData();
+  mType = aType;
+  mContent.mString = aString;
+}
+
+// Takes a reference to |aImage|.
+void
+nsStyleContentData::Set(nsStyleContentType aType, imgIRequest *aImage)
+{
+  NS_ASSERTION(aType == eStyleContentType_Image,
+               "bad type");
+  this->~nsStyleContentData();
+  mType = aType;
+  mContent.mImage = aImage;
+  NS_IF_ADDREF(mContent.mImage);
+}
+
+// Takes a reference to |aCounters|.
+void
+nsStyleContentData::Set(nsStyleContentType aType, nsCSSValue::Array *aCounters)
+{
+  NS_ASSERTION(aType == eStyleContentType_Counter ||
+               aType == eStyleContentType_Counters,
+               "bad type");
+  this->~nsStyleContentData();
+  mType = aType;
+  mContent.mCounters = aCounters;
+  mContent.mCounters->AddRef();
+}
+
+
 PRBool nsStyleContentData::operator==(const nsStyleContentData& aOther) const
 {
   if (mType != aOther.mType)
diff --git a/layout/style/nsStyleStruct.h b/layout/style/nsStyleStruct.h
--- a/layout/style/nsStyleStruct.h
+++ b/layout/style/nsStyleStruct.h
@@ -909,6 +909,16 @@ struct nsStyleContentData {
   nsStyleContentData() : mType(nsStyleContentType(0)) { mContent.mString = nsnull; }
   ~nsStyleContentData();
   nsStyleContentData& operator=(const nsStyleContentData& aOther);
+
+  // ADOPTS string buffer
+  void Set(nsStyleContentType aType, PRUnichar *aString = nsnull);
+
+  // Takes a reference to |aImage|.
+  void Set(nsStyleContentType aType, imgIRequest *aImage);
+
+  // Takes a reference to |aCounters|.
+  void Set(nsStyleContentType aType, nsCSSValue::Array *aCounters);
+
   PRBool operator==(const nsStyleContentData& aOther) const;
 
   PRBool operator!=(const nsStyleContentData& aOther) const {
