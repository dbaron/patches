Deal with floating reference and reference counting of GTK widgets in nsNativeKeyBindings.  (Bug 487705)

diff --git a/widget/src/gtk2/nsNativeKeyBindings.cpp b/widget/src/gtk2/nsNativeKeyBindings.cpp
--- a/widget/src/gtk2/nsNativeKeyBindings.cpp
+++ b/widget/src/gtk2/nsNativeKeyBindings.cpp
@@ -235,31 +235,34 @@ nsNativeKeyBindings::Init(NativeKeyBindi
       // select_all only exists in gtk >= 2.2.2.  Prior to that,
       // ctrl+a is bound to (move to beginning, select to end).
       g_signal_connect(G_OBJECT(mNativeTarget), "select_all",
                        G_CALLBACK(select_all_cb), this);
     }
     break;
   }
 
+  g_object_ref_sink(mNativeTarget);
+
   g_signal_connect(G_OBJECT(mNativeTarget), "copy_clipboard",
                    G_CALLBACK(copy_clipboard_cb), this);
   g_signal_connect(G_OBJECT(mNativeTarget), "cut_clipboard",
                    G_CALLBACK(cut_clipboard_cb), this);
   g_signal_connect(G_OBJECT(mNativeTarget), "delete_from_cursor",
                    G_CALLBACK(delete_from_cursor_cb), this);
   g_signal_connect(G_OBJECT(mNativeTarget), "move_cursor",
                    G_CALLBACK(move_cursor_cb), this);
   g_signal_connect(G_OBJECT(mNativeTarget), "paste_clipboard",
                    G_CALLBACK(paste_clipboard_cb), this);
 }
 
 nsNativeKeyBindings::~nsNativeKeyBindings()
 {
   gtk_widget_destroy(mNativeTarget);
+  g_object_unref(mNativeTarget);
 }
 
 NS_IMPL_ISUPPORTS1(nsNativeKeyBindings, nsINativeKeyBindings)
 
 PRBool
 nsNativeKeyBindings::KeyDown(const nsNativeKeyEvent& aEvent,
                              DoCommandCallback aCallback, void *aCallbackData)
 {
