From: L. David Baron <dbaron@dbaron.org>

Use ParseSingleValueProperty for the components inside the 'transition' shorthand as well.  (Bug 636029)  r=bzbarsky

diff --git a/layout/style/nsCSSParser.cpp b/layout/style/nsCSSParser.cpp
--- a/layout/style/nsCSSParser.cpp
+++ b/layout/style/nsCSSParser.cpp
@@ -8093,32 +8093,17 @@ CSSParserImpl::ParseTransition()
       }
 
       // else, try to parse the next transition sub-property
       for (PRUint32 i = 0; !foundProperty && i < numProps; ++i) {
         if (!parsedProperty[i]) {
           // if we haven't found this property yet, try to parse it
           PRInt32 variantMask;
           const PRInt32* table = nsnull;
-          switch (kTransitionProperties[i]) {
-            case eCSSProperty_transition_property:
-              variantMask = VARIANT_IDENTIFIER | VARIANT_NONE | VARIANT_ALL;
-              break;
-            case eCSSProperty_transition_duration:
-            case eCSSProperty_transition_delay:
-              variantMask = VARIANT_TIME;
-              break;
-            case eCSSProperty_transition_timing_function:
-              variantMask = VARIANT_TIMING_FUNCTION;
-              table = nsCSSProps::kTransitionTimingFunctionKTable;
-              break;
-            default:
-              NS_ABORT_IF_FALSE(PR_FALSE, "Invalid transition property");
-          }
-          if (ParseVariant(tempValue, variantMask, table)) {
+          if (ParseSingleValueProperty(tempValue, kTransitionProperties[i])) {
             parsedProperty[i] = PR_TRUE;
             cur[i] = AppendValueToList(values[i], cur[i], tempValue);
             foundProperty = PR_TRUE;
             break; // out of inner loop; continue looking for next sub-property
           }
         }
       }
       if (!foundProperty) {
diff --git a/layout/style/nsCSSPropList.h b/layout/style/nsCSSPropList.h
--- a/layout/style/nsCSSPropList.h
+++ b/layout/style/nsCSSPropList.h
@@ -2593,17 +2593,17 @@ CSS_PROP_DISPLAY(
 CSS_PROP_DISPLAY(
     -moz-transition-property,
     transition_property,
     MozTransitionProperty,
     CSS_PROPERTY_PARSE_FUNCTION |
         CSS_PROPERTY_VALUE_LIST_USES_COMMAS,
     Display,
     mTransitionProperty,
-    0,
+    VARIANT_IDENTIFIER | VARIANT_NONE | VARIANT_ALL, // used only in shorthand
     nsnull,
     CSS_PROP_NO_OFFSET,
     eStyleAnimType_None)
 CSS_PROP_DISPLAY(
     -moz-transition-timing-function,
     transition_timing_function,
     MozTransitionTimingFunction,
     CSS_PROPERTY_PARSE_VALUE_LIST |
