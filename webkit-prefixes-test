From: L. David Baron <dbaron@dbaron.org>

Bug 837211 patch 5 - Add test that -webkit- prefixes are unsupported.  r=bzbarsky

diff --git a/layout/style/test/mochitest.ini b/layout/style/test/mochitest.ini
--- a/layout/style/test/mochitest.ini
+++ b/layout/style/test/mochitest.ini
@@ -280,8 +280,9 @@ skip-if = buildapp == 'b2g' || toolkit =
 [test_visited_image_loading_empty.html]
 skip-if = buildapp == 'b2g' || toolkit == 'android' #TIMED_OUT # b2g(bug 870262, :visited support) b2g-debug(bug 870262, :visited support) b2g-desktop(bug 870262, :visited support)
 [test_visited_lying.html]
 skip-if = buildapp == 'b2g' || toolkit == 'android' #TIMED_OUT # b2g(bug 870262, :visited support) b2g-debug(bug 870262, :visited support) b2g-desktop(bug 870262, :visited support)
 [test_visited_pref.html]
 skip-if = buildapp == 'b2g' || toolkit == 'android' #TIMED_OUT # b2g(bug 870262, :visited support) b2g-debug(bug 870262, :visited support) b2g-desktop(bug 870262, :visited support)
 [test_visited_reftests.html]
 skip-if = buildapp == 'b2g' || toolkit == 'android' #TIMED_OUT # b2g(bug 870262, :visited support) b2g-debug(bug 870262, :visited support) b2g-desktop(bug 870262, :visited support)
+[test_webkit_prefixes_unsupported.html]
diff --git a/layout/style/test/test_webkit_prefixes_unsupported.html b/layout/style/test/test_webkit_prefixes_unsupported.html
new file mode 100644
--- /dev/null
+++ b/layout/style/test/test_webkit_prefixes_unsupported.html
@@ -0,0 +1,56 @@
+<!DOCTYPE HTML>
+<html>
+<!--
+https://bugzilla.mozilla.org/show_bug.cgi?id=837211
+-->
+<head>
+  <meta charset="utf-8">
+  <title>Test for Bug 837211</title>
+  <script type="application/javascript" src="/tests/SimpleTest/SimpleTest.js"></script>
+  <link rel="stylesheet" type="text/css" href="/tests/SimpleTest/test.css"/>
+  <style id="style"></style>
+  <script type="application/javascript">
+
+  /** Test for Bug 837211, that no effects of the -webkit- prefixes pref get turned on **/
+
+    var styleElement = document.getElementById("style");
+    var styleText = document.createTextNode("");
+    styleElement.appendChild(styleText);
+
+    var kfRuleEnd = "keyframes a { from { color: blue } to { color: green } }";
+    styleText.data = "@" + kfRuleEnd;
+    is(styleElement.sheet.cssRules.length, 1, "@keyframes rule works");
+    styleText.data = "@-webkit-" + kfRuleEnd;
+    is(styleElement.sheet.cssRules.length, 0,
+       "@-webkit-keyframes rule does not work");
+
+    var html = document.documentElement;
+    var shadowEnd = "box-shadow: 3px 3px blue";
+    html.setAttribute("style", shadowEnd);
+    is(html.style.length, 1, "box-shadow works");
+    html.setAttribute("style", "-webkit-" + shadowEnd);
+    is(html.style.length, 0, "-webkit-box-shadow does not work");
+
+    is("boxShadow" in html.style, true, "boxShadow present");
+    is("webkitBoxShadow" in html.style, false, "webkitBoxShadow not present");
+    is("WebkitBoxShadow" in html.style, false, "WebkitBoxShadow not present");
+
+    html.setAttribute("style", "");
+    html.style.setProperty("box-shadow", "3px 3px blue");
+    is(html.style.length, 1, "box-shadow works");
+    html.setAttribute("style", "");
+    html.style.setProperty("-webkit-box-shadow", "3px 3px blue");
+    is(html.style.length, 0, "-webkit-box-shadow does not work");
+
+  </script>
+</head>
+<body>
+<a target="_blank" href="https://bugzilla.mozilla.org/show_bug.cgi?id=837211">Mozilla Bug 837211</a>
+<p id="display"></p>
+<div id="content" style="display: none">
+
+</div>
+<pre id="test">
+</pre>
+</body>
+</html>
