Fix logic error handling column-spanning cells with specified widths.  b=374819

diff --git a/layout/tables/BasicTableLayoutStrategy.cpp b/layout/tables/BasicTableLayoutStrategy.cpp
--- a/layout/tables/BasicTableLayoutStrategy.cpp
+++ b/layout/tables/BasicTableLayoutStrategy.cpp
@@ -432,29 +432,28 @@ BasicTableLayoutStrategy::ComputeColumnI
                                float(totalSPref - totalSMin);
                 }
 
-                // the rest of the min width, and the pref width (in
-                // proportion to the existing pref widths)
-                float coordRatio; // for both min and pref
-                if (spanHasPref) {
-                    if (scolFrame->GetPrefCoord() == 0) {
-                        // We might have already subtracted all of
-                        // totalSPref.
-                        coordRatio = 0.0f;
-                    } else {
-                        coordRatio = float(scolFrame->GetPrefCoord()) /
-                                     float(totalSPref);
-                    }
-                } else {
-                    // distribute equally when all pref widths are 0
-                    coordRatio = 1.0f / float(scol_end - scol);
-                }
-
                 nscoord curPref;
                 if (info.hasSpecifiedWidth &&
                     !scolFrame->GetHasSpecifiedCoord()) {
                     curPref = scolFrame->GetMinCoord();
                 } else {
                     curPref = scolFrame->GetPrefCoord();
+                }
+
+                // the rest of the min width, and the pref width (in
+                // proportion to the existing pref widths)
+                float coordRatio; // for both min and pref
+                if (spanHasPref) {
+                    if (curPref == 0) {
+                        // We might have already subtracted all of
+                        // totalSPref.
+                        coordRatio = 0.0f;
+                    } else {
+                        coordRatio = float(curPref) / float(totalSPref);
+                    }
+                } else {
+                    // distribute equally when all pref widths are 0
+                    coordRatio = 1.0f / float(scol_end - scol);
                 }
 
                 // combine the two min-width distributions, and record
