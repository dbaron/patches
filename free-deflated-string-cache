From: L. David Baron <dbaron@dbaron.org>

Free strings remaining in the deflated string cache at shutdown.

diff --git a/js/src/jsstr.cpp b/js/src/jsstr.cpp
--- a/js/src/jsstr.cpp
+++ b/js/src/jsstr.cpp
@@ -3984,16 +3984,20 @@ DeflatedStringCache::init()
 }
 
 DeflatedStringCache::~DeflatedStringCache()
 {
 #ifdef JS_THREADSAFE
     if (lock)
         JS_DESTROY_LOCK(lock);
 #endif
+    for (Map::Enum e(map); !e.empty(); e.popFront()) {
+        char *bytes = e.front().value;
+        js_free(bytes);
+    }
 }
 
 void
 DeflatedStringCache::sweep(JSContext *cx)
 {
     /*
      * We must take a lock even during the GC as JS_GetStringBytes() can be
      * called outside the request.
