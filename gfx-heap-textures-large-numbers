From: L. David Baron <dbaron@dbaron.org>

Bug 969898:  Make gfx/heap-textures memory reporter support 64-bit numbers on 64-bit platforms.  r=njn

diff --git a/gfx/layers/ipc/ISurfaceAllocator.cpp b/gfx/layers/ipc/ISurfaceAllocator.cpp
--- a/gfx/layers/ipc/ISurfaceAllocator.cpp
+++ b/gfx/layers/ipc/ISurfaceAllocator.cpp
@@ -25,17 +25,17 @@
 
 using namespace mozilla::ipc;
 
 namespace mozilla {
 namespace layers {
 
 NS_IMPL_ISUPPORTS1(GfxMemoryImageReporter, nsIMemoryReporter)
 
-mozilla::Atomic<int32_t> GfxMemoryImageReporter::sAmount(0);
+mozilla::Atomic<size_t> GfxMemoryImageReporter::sAmount(0);
 
 mozilla::ipc::SharedMemory::SharedMemoryType OptimalShmemType()
 {
   return mozilla::ipc::SharedMemory::TYPE_BASIC;
 }
 
 bool
 IsSurfaceDescriptorValid(const SurfaceDescriptor& aSurface)
diff --git a/gfx/layers/ipc/ISurfaceAllocator.h b/gfx/layers/ipc/ISurfaceAllocator.h
--- a/gfx/layers/ipc/ISurfaceAllocator.h
+++ b/gfx/layers/ipc/ISurfaceAllocator.h
@@ -178,15 +178,15 @@ public:
                             nsISupports* aData)
   {
     return MOZ_COLLECT_REPORT(
       "explicit/gfx/heap-textures", KIND_HEAP, UNITS_BYTES, sAmount,
       "Heap memory shared between threads by texture clients and hosts.");
   }
 
 private:
-  static mozilla::Atomic<int32_t> sAmount;
+  static mozilla::Atomic<size_t> sAmount;
 };
 
 } // namespace
 } // namespace
 
 #endif
