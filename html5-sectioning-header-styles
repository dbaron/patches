From: L. David Baron <dbaron@dbaron.org>

Add appropriate styles for the effects of HTML5 sectioning elements on headers.  (Bug 562835)

diff --git a/layout/reftests/bugs/562835-1.html b/layout/reftests/bugs/562835-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/562835-1.html
@@ -0,0 +1,14 @@
+<!DOCTYPE HTML>
+<title>Fonts and margins of HTML headers</title>
+<style type="text/css">
+
+div { border: medium solid blue }
+
+</style>
+
+<div><h1>Level 1</h1></div>
+<div><h2>Level 2</h2></div>
+<div><h3>Level 3</h3></div>
+<div><h4>Level 4</h4></div>
+<div><h5>Level 5</h5></div>
+<div><h6>Level 6</h6></div>
diff --git a/layout/reftests/bugs/562835-2.html b/layout/reftests/bugs/562835-2.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/562835-2.html
@@ -0,0 +1,30 @@
+<!DOCTYPE HTML>
+<title>Fonts and margins of HTML headers</title>
+<style type="text/css">
+
+div { border: medium solid blue }
+
+</style>
+
+<div><h1>Level 1</h1></div>
+<article>
+<div><h1>Level 2</h1></div>
+<nav>
+<div><h1>Level 3</h1></div>
+</nav>
+<section>
+<aside>
+<div><h1>Level 4</h1></div>
+</aside>
+</section>
+<section>
+<nav>
+<nav>
+<div><h1>Level 5</h1></div>
+<aside>
+<div><h1>Level 6</h1></div>
+</aside>
+</nav>
+</nav>
+</section>
+</article>
diff --git a/layout/reftests/bugs/562835-ref.html b/layout/reftests/bugs/562835-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/562835-ref.html
@@ -0,0 +1,15 @@
+<!DOCTYPE HTML>
+<title>Fonts and margins of HTML headers</title>
+<style type="text/css">
+
+body > div { border: medium solid blue }
+body > div > div { font-weight: bold }
+
+</style>
+
+<div><div style="font-size: 2.00em; margin: 0.67em 0">Level 1</div></div>
+<div><div style="font-size: 1.50em; margin: 0.83em 0">Level 2</div></div>
+<div><div style="font-size: 1.17em; margin: 1.00em 0">Level 3</div></div>
+<div><div style="font-size: 1.00em; margin: 1.33em 0">Level 4</div></div>
+<div><div style="font-size: 0.83em; margin: 1.67em 0">Level 5</div></div>
+<div><div style="font-size: 0.67em; margin: 2.33em 0">Level 6</div></div>
diff --git a/layout/reftests/bugs/reftest.list b/layout/reftests/bugs/reftest.list
--- a/layout/reftests/bugs/reftest.list
+++ b/layout/reftests/bugs/reftest.list
@@ -1424,8 +1424,10 @@ random-if(!haveTestPlugin) == 546071-1.h
 == 549184-1.html 549184-1-ref.html
 == 550716-1.html 550716-1-ref.html
 == 551463-1.html 551463-1-ref.html
 == 551699-1.html 551699-1-ref.html
 == 552334-1.html 552334-1-ref.html
 == 556661-1.html 556661-1-ref.html
 == 557736-1.html 557736-1-ref.html
 == 559284-1.html 559284-1-ref.html
+== 562835-1.html 562835-ref.html
+== 562835-2.html 562835-ref.html
diff --git a/layout/style/html.css b/layout/style/html.css
--- a/layout/style/html.css
+++ b/layout/style/html.css
@@ -180,44 +180,65 @@ pre[_moz_quote=true] {
 
 h1 {
   display: block;
   font-size: 2em;
   font-weight: bold;
   margin: .67em 0;
 }
 
-h2 {
+h2,
+:-moz-any(article, aside, nav, section)
+h1 {
   display: block;
   font-size: 1.5em;
   font-weight: bold;
   margin: .83em 0;
 }
 
-h3 {
+h3,
+:-moz-any(article, aside, nav, section)
+:-moz-any(article, aside, nav, section)
+h1 {
   display: block;
   font-size: 1.17em;
   font-weight: bold;
   margin: 1em 0;
 }
 
-h4 {
+h4,
+:-moz-any(article, aside, nav, section)
+:-moz-any(article, aside, nav, section)
+:-moz-any(article, aside, nav, section)
+h1 {
   display: block;
+  font-size: 1.00em;
   font-weight: bold;
   margin: 1.33em 0;
 }
 
-h5 {
+h5,
+:-moz-any(article, aside, nav, section)
+:-moz-any(article, aside, nav, section)
+:-moz-any(article, aside, nav, section)
+:-moz-any(article, aside, nav, section)
+h1 {
   display: block;
   font-size: 0.83em;
   font-weight: bold;
   margin: 1.67em 0;
 }
 
-h6 {
+h6,
+:-moz-any(article, aside, nav, section)
+:-moz-any(article, aside, nav, section)
+:-moz-any(article, aside, nav, section)
+:-moz-any(article, aside, nav, section)
+:-moz-any(article, aside, nav, section)
+h1 {
   display: block;
   font-size: 0.67em;
   font-weight: bold;
   margin: 2.33em 0;
 }
 
 listing {
   display: block;
