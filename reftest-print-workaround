From: L. David Baron <dbaron@dbaron.org>

Work around all reftest-print reftests causing two assertions (Bug 534478) in the reftest harness to avoid lots of manifest annotation.  (Bug 472557)

diff --git a/layout/tools/reftest/reftest.js b/layout/tools/reftest/reftest.js
--- a/layout/tools/reftest/reftest.js
+++ b/layout/tools/reftest/reftest.js
@@ -692,16 +692,23 @@ function OnDocumentLoad(event)
 
        ps.headerStrLeft = "";
        ps.headerStrCenter = "";
        ps.headerStrRight = "";
        ps.footerStrLeft = "";
        ps.footerStrCenter = "";
        ps.footerStrRight = "";
        gBrowser.docShell.contentViewer.setPageMode(true, ps);
+
+       // WORKAROUND FOR ASSERTIONS IN BUG 534478:  Calling setPageMode
+       // above causes 2 assertions.  So that we don't have to annotate
+       // the manifests for every reftest-print reftest, bump the
+       // assertion count by two right here.
+       gURLs[0].minAsserts += 2;
+       gURLs[0].maxAsserts += 2;
     }
 
     setupZoom(contentRootElement);
 
     if (shouldWait()) {
         // The testcase will let us know when the test snapshot should be made.
         // Register a mutation listener to know when the 'reftest-wait' class
         // gets removed.
