From: L. David Baron <dbaron@dbaron.org>

Let SMIL animation animate stroke-dasharray.  (Bug 523355)

diff --git a/content/smil/nsSMILCSSProperty.cpp b/content/smil/nsSMILCSSProperty.cpp
--- a/content/smil/nsSMILCSSProperty.cpp
+++ b/content/smil/nsSMILCSSProperty.cpp
@@ -217,19 +217,20 @@ nsSMILCSSProperty::IsPropertyAnimatable(
 
     // PROPERTIES OF TYPE eCSSType_Rect
     case eCSSProperty_clip:
       // XXXdholbert Rect type not yet supported by nsStyleAnimation
       return PR_FALSE;
 
     // PROPERTIES OF TYPE eCSSType_ValueList
     case eCSSProperty_cursor:
+      // XXXdholbert Cursor list type not yet supported by nsStyleAnimation
+      return PR_FALSE;
     case eCSSProperty_stroke_dasharray:
-      // XXXdholbert List type not yet supported by nsStyleAnimation
-      return PR_FALSE;
+      return PR_TRUE;
 
     // PROPERTIES OF TYPE eCSSType_ValuePair
     case eCSSProperty_fill:
     case eCSSProperty_stroke:
       return PR_TRUE;
 
     // PROPERTIES OF TYPE eCSSType_Value
     // XXXdholbert: Some properties' types aren't yet supported by
diff --git a/content/smil/nsSMILCSSValueType.cpp b/content/smil/nsSMILCSSValueType.cpp
--- a/content/smil/nsSMILCSSValueType.cpp
+++ b/content/smil/nsSMILCSSValueType.cpp
@@ -191,18 +191,19 @@ nsSMILCSSValueType::Add(nsSMILValue& aDe
       *GetZeroValueForUnit(valueToAddWrapper->mCSSValue.GetUnit());
     destWrapper->mPropID = valueToAddWrapper->mPropID;
     destWrapper->mPresContext = valueToAddWrapper->mPresContext;
   }
   NS_ABORT_IF_FALSE(valueToAddWrapper->mPropID != eCSSProperty_UNKNOWN &&
                     !valueToAddWrapper->mCSSValue.IsNull(),
                     "Added amount should be a parsed value");
 
-  // Special case: font-size-adjust is explicitly non-additive
-  if (destWrapper->mPropID == eCSSProperty_font_size_adjust) {
+  // Special case: some properties are explicitly non-additive
+  if (destWrapper->mPropID == eCSSProperty_font_size_adjust ||
+      destWrapper->mPropID == eCSSProperty_stroke_dasharray) {
     return NS_ERROR_FAILURE;
   }
   return nsStyleAnimation::Add(destWrapper->mCSSValue,
                                valueToAddWrapper->mCSSValue, aCount) ?
     NS_OK : NS_ERROR_FAILURE;
 }
 
 nsresult
