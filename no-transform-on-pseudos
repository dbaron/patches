Disable -moz-transform and -moz-transform-origin for :first-line and :first-letter pseudo-elements.  (Bug 466845)

diff --git a/layout/style/nsHTMLCSSStyleSheet.cpp b/layout/style/nsHTMLCSSStyleSheet.cpp
--- a/layout/style/nsHTMLCSSStyleSheet.cpp
+++ b/layout/style/nsHTMLCSSStyleSheet.cpp
@@ -76,24 +76,26 @@ public:
   // functions.
   void CommonMapRuleInfoInto(nsRuleData* aRuleData);
 
 #ifdef DEBUG
   NS_IMETHOD List(FILE* out = stdout, PRInt32 aIndent = 0) const;
 #endif
 protected:
   nsCSSValueList mInheritList;
+  nsCSSValueList mNoneList;
   nsCSSValuePairList mInheritQuotes;
   nsCSSValuePairList mNoneCounter;
 };
 
 CSSDisablePropsRule::CSSDisablePropsRule()
 {
   nsCSSValue none(eCSSUnit_None);
   mNoneCounter.mXValue = none;
+  mNoneList.mValue = none;
   nsCSSValue inherit(eCSSUnit_Inherit);
   mInheritList.mValue = inherit;
   mInheritQuotes.mXValue = inherit;
 }
 
 class CSSFirstLineRule : public CSSDisablePropsRule {
 public:
   CSSFirstLineRule() {}
@@ -180,16 +182,22 @@ CSSDisablePropsRule::CommonMapRuleInfoIn
     nsCSSValue staticposition(NS_STYLE_POSITION_STATIC, eCSSUnit_Enumerated);
     aData->mDisplayData->mPosition = staticposition;
 
     nsCSSValue visible(NS_STYLE_OVERFLOW_VISIBLE, eCSSUnit_Enumerated);
     aData->mDisplayData->mOverflowX = visible;
     aData->mDisplayData->mOverflowY = visible;
 
     aData->mDisplayData->mClear = none;
+
+    aData->mDisplayData->mTransform = &mNoneList;
+
+    nsCSSValue fiftyPercent(0.5f, eCSSUnit_Percent);
+    aData->mDisplayData->mTransformOrigin.mXValue = fiftyPercent;
+    aData->mDisplayData->mTransformOrigin.mYValue = fiftyPercent;
 
     // Nobody will care about 'break-before' or 'break-after', since
     // they only apply to blocks (assuming we implement them correctly).
   }
 
   // NOTE:  We'll never do anything with what's in nsCSSList,
   // nsCSSTable, nsCSSBreaks, nsCSSPage, nsCSSAural, nsCSSXUL, or
   // nsCSSSVG, so don't bother.
