From: L. David Baron <dbaron@dbaron.org>

Fix GL version checks to handle versions other than x.y.  (FIXME: x.y is mandatory, but they can be arbitrary length)  (Bug 605992)

diff --git a/gfx/thebes/GLContextProviderGLX.cpp b/gfx/thebes/GLContextProviderGLX.cpp
--- a/gfx/thebes/GLContextProviderGLX.cpp
+++ b/gfx/thebes/GLContextProviderGLX.cpp
@@ -169,23 +169,25 @@ GLXLibrary::EnsureInitialized()
 
     Display *display = DefaultXDisplay();
     int screen = DefaultScreen(display);
     const char *vendor = xQueryServerString(display, screen, GLX_VENDOR);
     const char *serverVersionStr = xQueryServerString(display, screen, GLX_VERSION);
     const char *clientVersionStr = xGetClientString(display, GLX_VERSION);
 
     int serverVersion = 0, clientVersion = 0;
+    // FIXME: What about "2" or "1.10"?
     if (serverVersionStr &&
         strlen(serverVersionStr) >= 3 &&
         serverVersionStr[1] == '.')
     {
         serverVersion = (serverVersionStr[0] - '0') << 8 | (serverVersionStr[2] - '0');
     }
 
+    // FIXME: What about "2" or "1.10"?
     if (clientVersionStr &&
         strlen(clientVersionStr) >= 3 &&
         clientVersionStr[1] == '.')
     {
         clientVersion = (clientVersionStr[0] - '0') << 8 | (clientVersionStr[2] - '0');
     }
 
     gGLXVersion = PR_MIN(clientVersion, serverVersion);
