From: L. David Baron <dbaron@dbaron.org>

Add -moz-text-size-adjust styles so that we can run Android reftests with font size inflation.

diff --git a/layout/reftests/svg/sizing/inline--display-block--01-ref.xhtml b/layout/reftests/svg/sizing/inline--display-block--01-ref.xhtml
--- a/layout/reftests/svg/sizing/inline--display-block--01-ref.xhtml
+++ b/layout/reftests/svg/sizing/inline--display-block--01-ref.xhtml
@@ -6,17 +6,17 @@
   <head>
 
     <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=294086 -->
 
     <title>Reference for test inline--display-block--01.xhtml</title>
     <link rel="stylesheet" type="text/css" href="ahem.css" />
 
   </head>
-  <body style="font: 10px/12px Ahem">
+  <body style="font: 10px/12px Ahem; -moz-text-size-adjust: none">
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
diff --git a/layout/reftests/svg/sizing/inline--display-block--01.xhtml b/layout/reftests/svg/sizing/inline--display-block--01.xhtml
--- a/layout/reftests/svg/sizing/inline--display-block--01.xhtml
+++ b/layout/reftests/svg/sizing/inline--display-block--01.xhtml
@@ -11,17 +11,17 @@
     <link rel="stylesheet" type="text/css" href="ahem.css" />
 
     <!--
     This testcase checks that SVG embedded inline with display:block is
     positioned correctly.
     -->
 
   </head>
-  <body style="font: 10px/12px Ahem">
+  <body style="font: 10px/12px Ahem; -moz-text-size-adjust: none">
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
diff --git a/layout/reftests/svg/sizing/inline--display-inline--01-ref.xhtml b/layout/reftests/svg/sizing/inline--display-inline--01-ref.xhtml
--- a/layout/reftests/svg/sizing/inline--display-inline--01-ref.xhtml
+++ b/layout/reftests/svg/sizing/inline--display-inline--01-ref.xhtml
@@ -6,17 +6,17 @@
   <head>
 
     <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=294086 -->
 
     <title>Reference for test inline--display-inline--01.xhtml</title>
     <link rel="stylesheet" type="text/css" href="ahem.css" />
 
   </head>
-  <body style="font: 10px/12px Ahem">
+  <body style="font: 10px/12px Ahem; -moz-text-size-adjust: none">
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
diff --git a/layout/reftests/svg/sizing/inline--display-inline--01.xhtml b/layout/reftests/svg/sizing/inline--display-inline--01.xhtml
--- a/layout/reftests/svg/sizing/inline--display-inline--01.xhtml
+++ b/layout/reftests/svg/sizing/inline--display-inline--01.xhtml
@@ -11,17 +11,17 @@
     <link rel="stylesheet" type="text/css" href="ahem.css" />
 
     <!--
     This testcase checks that SVG embedded inline with display:inline is
     positioned correctly.
     -->
 
   </head>
-  <body style="font: 10px/12px Ahem">
+  <body style="font: 10px/12px Ahem; -moz-text-size-adjust: none">
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
diff --git a/layout/reftests/svg/sizing/inline--display-inline-block--01-ref.xhtml b/layout/reftests/svg/sizing/inline--display-inline-block--01-ref.xhtml
--- a/layout/reftests/svg/sizing/inline--display-inline-block--01-ref.xhtml
+++ b/layout/reftests/svg/sizing/inline--display-inline-block--01-ref.xhtml
@@ -6,17 +6,17 @@
   <head>
 
     <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=294086 -->
 
     <title>Reference for test inline--display-inline-block--01.xhtml</title>
     <link rel="stylesheet" type="text/css" href="ahem.css" />
 
   </head>
-  <body style="font: 10px/12px Ahem">
+  <body style="font: 10px/12px Ahem; -moz-text-size-adjust: none">
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
diff --git a/layout/reftests/svg/sizing/inline--display-inline-block--01.xhtml b/layout/reftests/svg/sizing/inline--display-inline-block--01.xhtml
--- a/layout/reftests/svg/sizing/inline--display-inline-block--01.xhtml
+++ b/layout/reftests/svg/sizing/inline--display-inline-block--01.xhtml
@@ -11,17 +11,17 @@
     <link rel="stylesheet" type="text/css" href="ahem.css" />
 
     <!--
     This testcase checks that SVG embedded inline with display:inline-block is
     positioned correctly.
     -->
 
   </head>
-  <body style="font: 10px/12px Ahem">
+  <body style="font: 10px/12px Ahem; -moz-text-size-adjust: none">
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
diff --git a/layout/reftests/svg/sizing/inline--position-relative--01-ref.xhtml b/layout/reftests/svg/sizing/inline--position-relative--01-ref.xhtml
--- a/layout/reftests/svg/sizing/inline--position-relative--01-ref.xhtml
+++ b/layout/reftests/svg/sizing/inline--position-relative--01-ref.xhtml
@@ -6,17 +6,17 @@
   <head>
 
     <!-- From https://bugzilla.mozilla.org/show_bug.cgi?id=294086 -->
 
     <title>Reference for test inline--position-relative--01.xhtml</title>
     <link rel="stylesheet" type="text/css" href="ahem.css" />
 
   </head>
-  <body style="font: 10px/12px Ahem">
+  <body style="font: 10px/12px Ahem; -moz-text-size-adjust: none">
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
diff --git a/layout/reftests/svg/sizing/inline--position-relative--01.xhtml b/layout/reftests/svg/sizing/inline--position-relative--01.xhtml
--- a/layout/reftests/svg/sizing/inline--position-relative--01.xhtml
+++ b/layout/reftests/svg/sizing/inline--position-relative--01.xhtml
@@ -11,17 +11,17 @@
     <link rel="stylesheet" type="text/css" href="ahem.css" />
 
     <!--
     This testcase checks that SVG embedded inline with position:relative is
     positioned correctly.
     -->
 
   </head>
-  <body style="font: 10px/12px Ahem">
+  <body style="font: 10px/12px Ahem; -moz-text-size-adjust: none">
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
     Padding text. Padding text. Padding text. Padding text. Padding text.
diff --git a/layout/reftests/table-anonymous-boxes/3-blocks-ref.html b/layout/reftests/table-anonymous-boxes/3-blocks-ref.html
--- a/layout/reftests/table-anonymous-boxes/3-blocks-ref.html
+++ b/layout/reftests/table-anonymous-boxes/3-blocks-ref.html
@@ -1,11 +1,11 @@
 <!DOCTYPE html>
 <html>
-  <body style="font-family: monospace; white-space: nowrap">
+  <body style="font-family: monospace; -moz-text-size-adjust: none; white-space: nowrap">
     <div>
       Row 1, Col 1Row 1, Col 2Row 1, Col 3
     </div>
     <div>
       Row 22, Col 1Row 22, Col 2Row 22, Col 3
     </div>
     <div>
       Row 333, Col 1Row 333, Col 2Row 333, Col 3
diff --git a/layout/reftests/table-anonymous-boxes/3-tables-ref.html b/layout/reftests/table-anonymous-boxes/3-tables-ref.html
--- a/layout/reftests/table-anonymous-boxes/3-tables-ref.html
+++ b/layout/reftests/table-anonymous-boxes/3-tables-ref.html
@@ -1,11 +1,11 @@
 <!DOCTYPE html>
 <html>
-  <body style="font-family: monospace; white-space: nowrap">
+  <body style="font-family: monospace; -moz-text-size-adjust: none; white-space: nowrap">
     <table cellpadding="0" cellspacing="0" style="margin: 0; padding: 0; border: none">
       <tr>
         <td>Row 1, Col 1</td>
         <td>Row 1, Col 2</td>
         <td>Row 1, Col 3</td>
       </tr>
     </table>
     <table cellpadding="0" cellspacing="0" style="margin: 0; padding: 0; border: none">
diff --git a/layout/reftests/table-anonymous-boxes/3x3-cols-ref.html b/layout/reftests/table-anonymous-boxes/3x3-cols-ref.html
--- a/layout/reftests/table-anonymous-boxes/3x3-cols-ref.html
+++ b/layout/reftests/table-anonymous-boxes/3x3-cols-ref.html
@@ -1,11 +1,11 @@
 <!DOCTYPE html>
 <html>
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <table cellpadding="0" cellspacing="0" style="margin: 0; padding: 0; border: none">
       <colgroup><col style="background: yellow"><col style="background: cyan"><col style="background: lime"></colgroup>
       <tr>
         <td>Row 1, Col 1</td>
         <td>Row 1, Col 2</td>
         <td>Row 1, Col 3</td>
       </tr>
       <tr>
diff --git a/layout/reftests/table-anonymous-boxes/3x3-ref.html b/layout/reftests/table-anonymous-boxes/3x3-ref.html
--- a/layout/reftests/table-anonymous-boxes/3x3-ref.html
+++ b/layout/reftests/table-anonymous-boxes/3x3-ref.html
@@ -1,11 +1,11 @@
 <!DOCTYPE html>
 <html>
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <table cellpadding="0" cellspacing="0" style="margin: 0; padding: 0; border: none">
       <tr>
         <td>Row 1, Col 1</td>
         <td>Row 1, Col 2</td>
         <td>Row 1, Col 3</td>
       </tr>
       <tr>
         <td>Row 22, Col 1</td>
diff --git a/layout/reftests/table-anonymous-boxes/blocks-divide-tables-1.html b/layout/reftests/table-anonymous-boxes/blocks-divide-tables-1.html
--- a/layout/reftests/table-anonymous-boxes/blocks-divide-tables-1.html
+++ b/layout/reftests/table-anonymous-boxes/blocks-divide-tables-1.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace; white-space: nowrap">
+  <body style="font-family: monospace; -moz-text-size-adjust: none; white-space: nowrap">
     <span style="display: block"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: block"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span style="display: table-cell">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/blocks-divide-tables-2.html b/layout/reftests/table-anonymous-boxes/blocks-divide-tables-2.html
--- a/layout/reftests/table-anonymous-boxes/blocks-divide-tables-2.html
+++ b/layout/reftests/table-anonymous-boxes/blocks-divide-tables-2.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace; white-space: nowrap">
+  <body style="font-family: monospace; -moz-text-size-adjust: none; white-space: nowrap">
     <span style="display: table-row"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: block"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span style="display: table-cell">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/cols-test-1.html b/layout/reftests/table-anonymous-boxes/cols-test-1.html
--- a/layout/reftests/table-anonymous-boxes/cols-test-1.html
+++ b/layout/reftests/table-anonymous-boxes/cols-test-1.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display:table">
       <span style="display: table-column; background: yellow"></span>
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
       <span style="display: table-column; background: cyan"></span>
       <span style="display: table-row-group"> 
         <span style="display: table-row">
diff --git a/layout/reftests/table-anonymous-boxes/cols-test-2.html b/layout/reftests/table-anonymous-boxes/cols-test-2.html
--- a/layout/reftests/table-anonymous-boxes/cols-test-2.html
+++ b/layout/reftests/table-anonymous-boxes/cols-test-2.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display:table">
       <span style="display: table-column; background: yellow"></span>
       <span style="display: table-column; background: cyan"></span>
       <span style="display: table-column; background: lime"></span>
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
       <span style="display: table-row-group"> 
diff --git a/layout/reftests/table-anonymous-boxes/cols-test-3.html b/layout/reftests/table-anonymous-boxes/cols-test-3.html
--- a/layout/reftests/table-anonymous-boxes/cols-test-3.html
+++ b/layout/reftests/table-anonymous-boxes/cols-test-3.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display:table">
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
       <span style="display: table-row-group"> 
         <span style="display: table-row">
           <span style="display: table-cell">Row 22, Col 1</span>
           <span style="display: table-cell">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-insert-cell-1.html b/layout/reftests/table-anonymous-boxes/dynamic-insert-cell-1.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-insert-cell-1.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-insert-cell-1.html
@@ -12,17 +12,17 @@
         c.style.display = "table-cell";
         c.textContent = "Row 22, Col 1";
         var t = document.getElementById("t");
         t.parentNode.insertBefore(c, t);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display:table">
       <span style="display: table-row-group"> 
         <span style="display: table-row">
           <span style="display: table-cell">Row 1, Col 1</span>
           <span style="display: table-cell">Row 1, Col 2</span>
           <span style="display: table-cell">Row 1, Col 3</span>
         </span>
         <span style="display: table-cell" id="t">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-1.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-1.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-1.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-1.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var t = document.getElementById("t");
         t.parentNode.removeChild(t);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span id="t">To be removed</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-13.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-13.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-13.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-13.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var t = document.getElementById("t");
         t.parentNode.removeChild(t);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span id="t" style="position: absolute">To be removed</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-14.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-14.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-14.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-14.html
@@ -12,17 +12,17 @@
           document.normalize();
         } catch(e) {}
         var n = document.getElementById("t").nextSibling;
         n.parentNode.removeChild(n);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row">
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row" id="t">
       <span style="display: table-cell">Row 22, Col 1</span>
       <span style="display: table-cell">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-15.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-15.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-15.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-15.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var n = document.getElementById("t");
         n.parentNode.removeChild(n);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row">
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row">
       <span style="display: table-cell">Row 22, Col 1</span>
       <span style="display: table-cell">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-16.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-16.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-16.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-16.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var t = document.getElementById("t");
         t.parentNode.removeChild(t);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span style="display: table-cell">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-17.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-17.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-17.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-17.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var n = document.getElementById("t");
         n.parentNode.removeChild(n);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group">
       <span style="display: table-row">
         <span style="display: table-cell">Row 1, Col 1</span>
         <span style="display: table-cell">Row 1, Col 2</span>
         <span style="display: table-cell">Row 1, Col 3</span>
       </span>
     </span>
     <span style="display: table-cell">Row 22, Col 1</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-2.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-2.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-2.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-2.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var t = document.getElementById("t");
         t.parentNode.removeChild(t);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span id="t" style="display: table-cell">To be removed</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-3.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-3.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-3.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-3.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var t = document.getElementById("t");
         t.parentNode.removeChild(t);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span id="t" style="display: table-row">To be removed</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-4.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-4.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-4.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-4.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var t = document.getElementById("t");
         t.parentNode.removeChild(t);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span id="t" style="display: table-row-group">To be removed</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-5.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-5.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-5.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-5.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var t = document.getElementById("t");
         t.parentNode.removeChild(t);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span id="t" style="display: table">To be removed</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-6.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-6.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-6.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-6.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var t = document.getElementById("t");
         t.parentNode.removeChild(t);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span id="t" style="display: table-column">To be removed</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-7.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-7.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-7.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-7.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var t = document.getElementById("t");
         t.parentNode.removeChild(t);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span id="t" style="display: table-column-group">To be removed</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-removal-8.html b/layout/reftests/table-anonymous-boxes/dynamic-removal-8.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-removal-8.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-removal-8.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var t = document.getElementById("t");
         t.parentNode.removeChild(t);
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span id="t" style="display: table-caption">To be removed</span>
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-1.html b/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-1.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-1.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-1.html
@@ -8,17 +8,17 @@
     <meta name="flags" content="dom" />
     <script>
       function doTest() {
         document.getElementById("t").style.display = "table-cell";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display:table">
       <span style="display: table-row-group"> 
         <span style="display: table-row">
           <span style="display: table-cell">Row 1, Col 1</span>
           <span style="display: table-cell">Row 1, Col 2</span>
           <span style="display: table-cell">Row 1, Col 3</span>
         </span>
         <span style="display: table-row">
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-2.html b/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-2.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-2.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-2.html
@@ -8,17 +8,17 @@
     <meta name="flags" content="dom" />
     <script>
       function doTest() {
         document.getElementById("t").style.display = "table-cell";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display:table">
       <span style="display: table-row-group"> 
         <span style="display: table-row">
           <span style="display: table-cell">Row 1, Col 1</span>
           <span style="display: table-cell">Row 1, Col 2</span>
           <span style="display: table-cell">Row 1, Col 3</span>
         </span>
         <span style="display: table-row">
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-3.html b/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-3.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-3.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-3.html
@@ -8,17 +8,17 @@
     <meta name="flags" content="dom" />
     <script>
       function doTest() {
         document.getElementById("t").style.display = "table-cell";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display:table">
       <span style="display: table-row-group"> 
         <span style="display: table-row">
           <span style="display: table-cell">Row 1, Col 1</span>
           <span style="display: table-cell">Row 1, Col 2</span>
           <span style="display: table-cell">Row 1, Col 3</span>
         </span>
         <span style="display: table-row">
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-4.html b/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-4.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-4.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-4.html
@@ -8,17 +8,17 @@
     <meta name="flags" content="dom" />
     <script>
       function doTest() {
         document.getElementById("t").style.display = "table-cell";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display:table">
       <span style="display: table-row-group"> 
         <span style="display: table-row">
           <span style="display: table-cell">Row 1, Col 1</span>
           <span style="display: table-cell">Row 1, Col 2</span>
           <span style="display: table-cell">Row 1, Col 3</span>
         </span>
         <span style="display: table-row">
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-5.html b/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-5.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-5.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-switch-block-to-cell-5.html
@@ -8,17 +8,17 @@
     <meta name="flags" content="dom" />
     <script>
       function doTest() {
         document.getElementById("t").style.display = "table-cell";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display:table">
       <span style="display: table-row-group"> 
         <span style="display: table-row">
           <span style="display: table-cell">Row 1, Col 1</span>
           <span style="display: table-cell">Row 1, Col 2</span>
           <span style="display: table-cell">Row 1, Col 3</span>
         </span>
         <span style="display: table-row">
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-1.html b/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-1.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-1.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-1.html
@@ -8,17 +8,17 @@
     <meta name="flags" content="dom" />
     <script>
       function doTest() {
         document.getElementById("t").style.display = "table-cell";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display:table">
       <span style="display: table-row">
         <span id="t">Row 1, Col 1</span>
         <span>Row 1, Col 2</span>
         <span style="display: table-cell">Row 1, Col 3</span>
       </span>
       <span style="display: table-row-group"> 
         <span style="display: table-row">
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-2.html b/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-2.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-2.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-2.html
@@ -8,17 +8,17 @@
     <meta name="flags" content="dom" />
     <script>
       function doTest() {
         document.getElementById("t").style.display = "table-cell";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display:table">
       <span style="display: table-row">
         <span>Row 1, Col 1</span>
         <span id="t">Row 1, Col 2</span>
         <span style="display: table-cell">Row 1, Col 3</span>
       </span>
       <span style="display: table-row-group"> 
         <span style="display: table-row">
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-3.html b/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-3.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-3.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-3.html
@@ -8,17 +8,17 @@
     <meta name="flags" content="dom" />
     <script>
       function doTest() {
         document.getElementById("t").style.display = "table-cell";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display:table">
       <span style="display: table-row">
         <span>Row 1, Col 1</span>
         <span id="t">Row 1, Col 2</span>
         <span>Row 1, Col 3</span>
       </span>
       <span style="display: table-row-group"> 
         <span style="display: table-row">
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-4.html b/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-4.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-4.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-4.html
@@ -8,17 +8,17 @@
     <meta name="flags" content="dom" />
     <script>
       function doTest() {
         document.getElementById("t").style.display = "table-cell";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display:table">
       <span style="display: table-row">
         <span style="display: table-cell">Row 1, Col 1</span>
         <span id="t">Row 1, Col 2</span>
         <span>Row 1, Col 3</span>
       </span>
       <span style="display: table-row-group"> 
         <span style="display: table-row">
diff --git a/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-5.html b/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-5.html
--- a/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-5.html
+++ b/layout/reftests/table-anonymous-boxes/dynamic-switch-inline-to-cell-5.html
@@ -8,17 +8,17 @@
     <meta name="flags" content="dom" />
     <script>
       function doTest() {
         document.getElementById("t").style.display = "table-cell";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display:table">
       <span style="display: table-row">
         <span style="display: table-cell">Row 1, Col 1</span>
         <span>Row 1, Col 2</span>
         <span id="t">Row 1, Col 3</span>
       </span>
       <span style="display: table-row-group"> 
         <span style="display: table-row">
diff --git a/layout/reftests/table-anonymous-boxes/infer-cells-1.html b/layout/reftests/table-anonymous-boxes/infer-cells-1.html
--- a/layout/reftests/table-anonymous-boxes/infer-cells-1.html
+++ b/layout/reftests/table-anonymous-boxes/infer-cells-1.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace; white-space: nowrap">
+  <body style="font-family: monospace; -moz-text-size-adjust: none; white-space: nowrap">
     <!-- The test in the first row might not be correct, depending on spec
          clarifications -->
     <span style="display: table-row"> 
       <span>Row 1,</span>
       <span>Col 1Row 1,</span>
       <span>Col 2Row 1,</span>
       <span>Col 3</span>
     </span>
diff --git a/layout/reftests/table-anonymous-boxes/infer-cells-2.html b/layout/reftests/table-anonymous-boxes/infer-cells-2.html
--- a/layout/reftests/table-anonymous-boxes/infer-cells-2.html
+++ b/layout/reftests/table-anonymous-boxes/infer-cells-2.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display: table-row"> 
       <!-- Trailing spaces in the spans needed only if the first test in
            infer-cells-1.html is valid -->
       <span>Row 1, </span>
       <span>Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span>Row 1, Col 3</span>
     </span>
diff --git a/layout/reftests/table-anonymous-boxes/infer-cells-3.html b/layout/reftests/table-anonymous-boxes/infer-cells-3.html
--- a/layout/reftests/table-anonymous-boxes/infer-cells-3.html
+++ b/layout/reftests/table-anonymous-boxes/infer-cells-3.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display: table-row"> 
       <!-- Trailing spaces in the spans needed only if the first test in
            infer-cells-1.html is valid -->
       <span>Row 1, </span>
       <span>Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-row">Row 1, Col 3</span>
     </span>
diff --git a/layout/reftests/table-anonymous-boxes/infer-cells-4.html b/layout/reftests/table-anonymous-boxes/infer-cells-4.html
--- a/layout/reftests/table-anonymous-boxes/infer-cells-4.html
+++ b/layout/reftests/table-anonymous-boxes/infer-cells-4.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display: table-row"> 
       <!-- Trailing spaces in the spans needed only if the first test in
            infer-cells-1.html is valid -->
       <span>Row 1, </span>
       <span>Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table">Row 1, Col 3</span>
     </span>
diff --git a/layout/reftests/table-anonymous-boxes/infer-first-row-and-table.html b/layout/reftests/table-anonymous-boxes/infer-first-row-and-table.html
--- a/layout/reftests/table-anonymous-boxes/infer-first-row-and-table.html
+++ b/layout/reftests/table-anonymous-boxes/infer-first-row-and-table.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display: table-cell">Row 1, Col 1</span>
     <span style="display: table-cell">Row 1, Col 2</span>
     <span style="display: table-cell">Row 1, Col 3</span>
     <span style="display: table-row-group"> 
       <span style="display: table-row">
         <span style="display: table-cell">Row 22, Col 1</span>
         <span style="display: table-cell">Row 22, Col 2</span>
         <span style="display: table-cell">Row 22, Col 3</span>
diff --git a/layout/reftests/table-anonymous-boxes/infer-first-row.html b/layout/reftests/table-anonymous-boxes/infer-first-row.html
--- a/layout/reftests/table-anonymous-boxes/infer-first-row.html
+++ b/layout/reftests/table-anonymous-boxes/infer-first-row.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display:table">
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
       <span style="display: table-row-group"> 
         <span style="display: table-row">
           <span style="display: table-cell">Row 22, Col 1</span>
           <span style="display: table-cell">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/infer-rows-inside-rowgroups.html b/layout/reftests/table-anonymous-boxes/infer-rows-inside-rowgroups.html
--- a/layout/reftests/table-anonymous-boxes/infer-rows-inside-rowgroups.html
+++ b/layout/reftests/table-anonymous-boxes/infer-rows-inside-rowgroups.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display: table-footer-group"> 
       <span style="display: table-cell">Row 333, Col 1</span>
       <span style="display: table-cell">Row 333, Col 2</span>
       <span style="display: table-cell">Row 333, Col 3</span>
     </span>
     <span style="display: table-row-group"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span style="display: table-cell">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/infer-second-row-and-table.html b/layout/reftests/table-anonymous-boxes/infer-second-row-and-table.html
--- a/layout/reftests/table-anonymous-boxes/infer-second-row-and-table.html
+++ b/layout/reftests/table-anonymous-boxes/infer-second-row-and-table.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display: table-row-group">
       <span style="display: table-row">
         <span style="display: table-cell">Row 1, Col 1</span>
         <span style="display: table-cell">Row 1, Col 2</span>
         <span style="display: table-cell">Row 1, Col 3</span>
       </span>
     </span>
     <span style="display: table-cell">Row 22, Col 1</span>
diff --git a/layout/reftests/table-anonymous-boxes/infer-second-row.html b/layout/reftests/table-anonymous-boxes/infer-second-row.html
--- a/layout/reftests/table-anonymous-boxes/infer-second-row.html
+++ b/layout/reftests/table-anonymous-boxes/infer-second-row.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display:table">
       <span style="display: table-row-group">
         <span style="display: table-row">
           <span style="display: table-cell">Row 1, Col 1</span>
           <span style="display: table-cell">Row 1, Col 2</span>
           <span style="display: table-cell">Row 1, Col 3</span>
         </span>
       </span>
diff --git a/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-1.html b/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-1.html
--- a/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-1.html
+++ b/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-1.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display: table-header-group"> 
       <span style="display: table-row">
         <span style="display: table-cell">Row 1, Col 1</span>
         <span style="display: table-cell">Row 1, Col 2</span>
         <span style="display: table-cell">Row 1, Col 3</span>
       </span>
     </span>
     <span style="display: table-row-group"> 
diff --git a/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-2.html b/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-2.html
--- a/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-2.html
+++ b/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-2.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display: table-row-group"> 
       <span style="display: table-row">
         <span style="display: table-cell">Row 22, Col 1</span>
         <span style="display: table-cell">Row 22, Col 2</span>
         <span style="display: table-cell">Row 22, Col 3</span>
       </span>
     </span>
     <span style="display: table-header-group"> 
diff --git a/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-3.html b/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-3.html
--- a/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-3.html
+++ b/layout/reftests/table-anonymous-boxes/infer-table-around-headers-footers-3.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display: table-footer-group"> 
       <span style="display: table-row">
         <span style="display: table-cell">Row 333, Col 1</span>
         <span style="display: table-cell">Row 333, Col 2</span>
         <span style="display: table-cell">Row 333, Col 3</span>
       </span>
     </span>
     <span style="display: table-row-group"> 
diff --git a/layout/reftests/table-anonymous-boxes/infer-table-row-cell.html b/layout/reftests/table-anonymous-boxes/infer-table-row-cell.html
--- a/layout/reftests/table-anonymous-boxes/infer-table-row-cell.html
+++ b/layout/reftests/table-anonymous-boxes/infer-table-row-cell.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display: table-row-group">
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: block">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row-group">
       <span style="display: table-row">
         <span style="display: table-cell">Row 22, Col 1</span>
diff --git a/layout/reftests/table-anonymous-boxes/infer-table.html b/layout/reftests/table-anonymous-boxes/infer-table.html
--- a/layout/reftests/table-anonymous-boxes/infer-table.html
+++ b/layout/reftests/table-anonymous-boxes/infer-table.html
@@ -1,16 +1,16 @@
 <!DOCTYPE html>
 <html>
     <title>CSS 2.1 Test Suite: anonymous table boxes</title>
     <link rel="author" title="Boris Zbarsky" href="mailto:bzbarsky@mit.edu" />
     <link rel="author" title="Mozilla Corporation" href="http://mozilla.com/" />
     <link rel="help" href="http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes"/>
     <meta name="flags" content="" />
-  <body style="font-family: monospace">
+  <body style="font-family: monospace; -moz-text-size-adjust: none">
     <span style="display: table-row"> 
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row"> 
       <span style="display: table-cell">Row 22, Col 1</span>
       <span style="display: table-cell">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/white-space-1.html b/layout/reftests/table-anonymous-boxes/white-space-1.html
--- a/layout/reftests/table-anonymous-boxes/white-space-1.html
+++ b/layout/reftests/table-anonymous-boxes/white-space-1.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var n = document.getElementById("t").nextSibling;
         n.data = "Row 22, Col 1Row 22, Col 2Row 22, Col 3";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace; white-space: nowrap" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none; white-space: nowrap" onload="doTest()">
     <span style="display: table-cell">Row 1, Col 1</span>
     <span style="display: table-cell">Row 1, Col 2</span>
     <span style="display: table-cell" id="t">Row 1, Col 3</span>
     <span style="display: table-cell">Row 333, Col 1</span>
     <span style="display: table-cell">Row 333, Col 2</span>
     <span style="display: table-cell">Row 333, Col 3</span>
   </body>
 </html>
diff --git a/layout/reftests/table-anonymous-boxes/white-space-2.html b/layout/reftests/table-anonymous-boxes/white-space-2.html
--- a/layout/reftests/table-anonymous-boxes/white-space-2.html
+++ b/layout/reftests/table-anonymous-boxes/white-space-2.html
@@ -12,17 +12,17 @@
           document.normalize();
         } catch (e) {}
         var n = document.getElementById("t").nextSibling;
         n.data = " ";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row">
       <span style="display: table-cell">Row 1, Col 1</span>
       <span style="display: table-cell">Row 1, Col 2</span>
       <span style="display: table-cell">Row 1, Col 3</span>
     </span>
     <span style="display: table-row" id="t">
       <span style="display: table-cell">Row 22, Col 1</span>
       <span style="display: table-cell">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/white-space-3.html b/layout/reftests/table-anonymous-boxes/white-space-3.html
--- a/layout/reftests/table-anonymous-boxes/white-space-3.html
+++ b/layout/reftests/table-anonymous-boxes/white-space-3.html
@@ -12,17 +12,17 @@
           document.normalize();
         } catch (e) {}
         var n = document.getElementById("t").nextSibling;
         n.data = " ";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group">
       <span style="display: table-row">
         <span style="display: table-cell">Row 1, Col 1</span>
         <span style="display: table-cell">Row 1, Col 2</span>
         <span style="display: table-cell">Row 1, Col 3</span>
       </span>
       <span style="display: table-row">
         <span style="display: table-cell" id="t">Row 22, Col 1</span>This is a test<span style="display: table-cell">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/white-space-4.html b/layout/reftests/table-anonymous-boxes/white-space-4.html
--- a/layout/reftests/table-anonymous-boxes/white-space-4.html
+++ b/layout/reftests/table-anonymous-boxes/white-space-4.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var n = document.getElementById("t").nextSibling;
         n.data = "Row 22, Col 1";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group">
       <span style="display: table-row" id="t">
         <span style="display: table-cell">Row 1, Col 1</span>
         <span style="display: table-cell">Row 1, Col 2</span>
         <span style="display: table-cell">Row 1, Col 3</span>
       </span>
       <span style="display: table-cell">Row 22, Col 2</span>
       <span style="display: table-cell">Row 22, Col 3</span>
diff --git a/layout/reftests/table-anonymous-boxes/white-space-5.html b/layout/reftests/table-anonymous-boxes/white-space-5.html
--- a/layout/reftests/table-anonymous-boxes/white-space-5.html
+++ b/layout/reftests/table-anonymous-boxes/white-space-5.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var n = document.getElementById("t").nextSibling;
         n.data = "Row 22, Col 2";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group">
       <span style="display: table-row">
         <span style="display: table-cell">Row 1, Col 1</span>
         <span style="display: table-cell">Row 1, Col 2</span>
         <span style="display: table-cell">Row 1, Col 3</span>
       </span>
       <span style="display: table-cell" id="t">Row 22, Col 1</span>
       <span style="display: table-cell">Row 22, Col 3</span>
diff --git a/layout/reftests/table-anonymous-boxes/white-space-6.html b/layout/reftests/table-anonymous-boxes/white-space-6.html
--- a/layout/reftests/table-anonymous-boxes/white-space-6.html
+++ b/layout/reftests/table-anonymous-boxes/white-space-6.html
@@ -9,17 +9,17 @@
     <script>
       function doTest() {
         var n = document.getElementById("t").nextSibling;
         n.data = "Row 22, Col 3";
         document.documentElement.className = "";
       }
     </script>
   </head>
-  <body style="font-family: monospace" onload="doTest()">
+  <body style="font-family: monospace; -moz-text-size-adjust: none" onload="doTest()">
     <span style="display: table-row-group">
       <span style="display: table-row">
         <span style="display: table-cell">Row 1, Col 1</span>
         <span style="display: table-cell">Row 1, Col 2</span>
         <span style="display: table-cell">Row 1, Col 3</span>
       </span>
       <span style="display: table-cell">Row 22, Col 1</span>
       <span style="display: table-cell" id="t">Row 22, Col 2</span>
diff --git a/layout/reftests/table-anonymous-boxes/white-space-pre-1.html b/layout/reftests/table-anonymous-boxes/white-space-pre-1.html
--- a/layout/reftests/table-anonymous-boxes/white-space-pre-1.html
+++ b/layout/reftests/table-anonymous-boxes/white-space-pre-1.html
@@ -12,11 +12,11 @@
     <script>
       function doTest() {
         var f = document.getElementById("f");
         f.parentNode.removeChild(f);
       }
     </script>
   </head>
   <body onload="doTest()">
-    <div style="font-family: monospace; width: 10em; white-space: pre-wrap"><span id="f" style="float: left; width: 80%; height: 0.5em"></span><span id="x">a <script>document.body.offsetWidth;</script> <span style="display: table-cell">b</span></span></div>
+    <div style="font-family: monospace; -moz-text-size-adjust: none; width: 10em; white-space: pre-wrap"><span id="f" style="float: left; width: 80%; height: 0.5em"></span><span id="x">a <script>document.body.offsetWidth;</script> <span style="display: table-cell">b</span></span></div>
   </body>
 </html>
diff --git a/layout/reftests/table-anonymous-boxes/white-space-pre-ref.html b/layout/reftests/table-anonymous-boxes/white-space-pre-ref.html
--- a/layout/reftests/table-anonymous-boxes/white-space-pre-ref.html
+++ b/layout/reftests/table-anonymous-boxes/white-space-pre-ref.html
@@ -1,6 +1,6 @@
 <!DOCTYPE html>
 <html>
   <body>
-    <div style="font-family: monospace; white-space: pre-wrap">a  b cd</div>
+    <div style="font-family: monospace; -moz-text-size-adjust: none; white-space: pre-wrap">a  b cd</div>
   </body>
 </html>
diff --git a/layout/reftests/text/justification-1-ref.html b/layout/reftests/text/justification-1-ref.html
--- a/layout/reftests/text/justification-1-ref.html
+++ b/layout/reftests/text/justification-1-ref.html
@@ -1,11 +1,11 @@
 <!DOCTYPE HTML>
 <html>
-<body style="width:6em; text-align:justify; border:1px solid black; overflow:hidden;">
+<body style="width:6em; text-align:justify; border:1px solid black; overflow:hidden; -moz-text-size-adjust: none;">
 
 <p>I am the very model of a modern major-general.
 <p style="width:100em;">I am the very model of a modern major-general.
 <p style="width:100em;">I &nbsp;am the<br>very model of a modern major-general.
 <p style="text-align:left;">I&nbsp;&nbsp;&#x200b;am&nbsp;&#x200b;the<br>very&nbsp;&#x200b;model&nbsp;&#x200b;of&nbsp;&#x200b;a&nbsp;&#x200b;modern&nbsp;&#x200b;major-general.
 <p>I am the<br>very model of a modern major-general.
 
 </body>
diff --git a/layout/reftests/text/justification-1.html b/layout/reftests/text/justification-1.html
--- a/layout/reftests/text/justification-1.html
+++ b/layout/reftests/text/justification-1.html
@@ -1,11 +1,11 @@
 <!DOCTYPE HTML>
 <html>
-<body style="width:6em; text-align:justify; border:1px solid black;">
+<body style="width:6em; text-align:justify; border:1px solid black; -moz-text-size-adjust: none;">
 
 <!-- Test which white-space values are allowed to take justification -->
 
 <p style="white-space:normal;">I  am the
 very model of a modern major-general.
 <p style="white-space:nowrap;">I  am the
 very model of a modern major-general.
 <p style="white-space:pre;">I  am the
