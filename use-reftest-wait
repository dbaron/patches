From: L. David Baron <dbaron@dbaron.org>

Bug 1123979 - Make the crashtest for bug 769303 more reliable by using reftest-wait correctly.  r=mats

Once we do this, we'll be able to get a better sense of how common this
intermittent failure is and where it occurs.

diff --git a/layout/generic/crashtests/769303-1.html b/layout/generic/crashtests/769303-1.html
--- a/layout/generic/crashtests/769303-1.html
+++ b/layout/generic/crashtests/769303-1.html
@@ -1,8 +1,9 @@
+<html class="reftest-wait">
 <style>
 p::first-letter {
     float: left;
     }
 p:before {
     content: counter(e2);
     }
 p:not([type=image]) {
@@ -16,13 +17,17 @@ document.removeEventListener("DOMContent
 test2 = test1.cloneNode(false);
 test3 = test2.cloneNode(false);
 document.documentElement.appendChild(test3);
 setTimeout("CFcrash()", 21);
 }
 document.addEventListener("DOMContentLoaded", initCF, false);
 window.onload = initCF;
 
+var gCallCount = 0;
 function CFcrash() {
 test3.appendChild(document.createTextNode(" bBCV5.3kvwoaU O8k l i!4c`Ei;N-#/ Qg QBZi$8A [8xlL#cN U4l  !%lP   S% Z9[H } {2Jk A00F8 TjQQ1KHx zf   k]F-G ,%lz8?@ 2ZB!-"));
 window.scrollBy(-463, -480);
+if (++gCallCount == 2) {
+  document.documentElement.classList.remove("reftest-wait");
+}
 }
 </script>
