Make plugin placeholders inline-block.  b=367247

diff -r 2020c7852e44 layout/base/nsCSSFrameConstructor.cpp
--- a/layout/base/nsCSSFrameConstructor.cpp	Thu Jan 25 23:03:04 2007 -0800
+++ b/layout/base/nsCSSFrameConstructor.cpp	Thu Jan 25 23:03:10 2007 -0800
@@ -6392,9 +6392,7 @@ nsCSSFrameConstructor::ConstructFrameByD
   // If the frame is a block-level frame and is scrollable, then wrap it
   // in a scroll frame.
   // XXX Ignore tables for the time being
-  if (aDisplay->IsBlockLevel() &&
-      aDisplay->mDisplay != NS_STYLE_DISPLAY_TABLE &&
-      aDisplay->mDisplay != NS_STYLE_DISPLAY_INLINE_TABLE &&
+  if (aDisplay->IsBlockInside() &&
       aDisplay->IsScrollableOverflow() &&
       !propagatedScrollToViewport) {
 
diff -r 2020c7852e44 layout/style/nsStyleStruct.h
--- a/layout/style/nsStyleStruct.h	Thu Jan 25 23:03:04 2007 -0800
+++ b/layout/style/nsStyleStruct.h	Thu Jan 25 23:03:10 2007 -0800
@@ -785,9 +785,37 @@ struct nsStyleDisplay : public nsStyleSt
   PRUint8 mOverflowY;           // [reset] see nsStyleConsts.h
   PRUint8   mClipFlags;         // [reset] see nsStyleConsts.h
   
-  PRBool IsBlockLevel() const {return (NS_STYLE_DISPLAY_BLOCK == mDisplay) ||
-                                      (NS_STYLE_DISPLAY_LIST_ITEM == mDisplay) ||
-                                      (NS_STYLE_DISPLAY_TABLE == mDisplay);}
+  // XXX Deprecated.  Prefer |IsBlockOutside|.
+  PRBool IsBlockLevel() const {
+    return IsBlockOutside();
+  }
+
+  PRBool IsBlockInside() const {
+    return NS_STYLE_DISPLAY_BLOCK == mDisplay ||
+           NS_STYLE_DISPLAY_LIST_ITEM == mDisplay ||
+           NS_STYLE_DISPLAY_INLINE_BLOCK == mDisplay;
+    // Should TABLE_CELL and TABLE_CAPTION go here?  They have
+    // block frames nested inside of them.
+  }
+
+  PRBool IsBlockOutside() const {
+    return NS_STYLE_DISPLAY_BLOCK == mDisplay ||
+           NS_STYLE_DISPLAY_LIST_ITEM == mDisplay ||
+           NS_STYLE_DISPLAY_TABLE == mDisplay;
+  }
+
+  PRBool IsInlineOutside() const {
+    return NS_STYLE_DISPLAY_INLINE == mDisplay ||
+           NS_STYLE_DISPLAY_INLINE_BLOCK == mDisplay ||
+           NS_STYLE_DISPLAY_INLINE_TABLE == mDisplay ||
+           NS_STYLE_DISPLAY_INLINE_BOX == mDisplay ||
+           NS_STYLE_DISPLAY_INLINE_GRID == mDisplay ||
+           NS_STYLE_DISPLAY_INLINE_STACK == mDisplay ||
+           // Are these really inlines? :
+           NS_STYLE_DISPLAY_DECK == mDisplay ||
+           NS_STYLE_DISPLAY_POPUP == mDisplay ||
+           NS_STYLE_DISPLAY_GROUPBOX == mDisplay;
+  }
 
   PRBool IsFloating() const {
     return NS_STYLE_FLOAT_NONE != mFloats;
diff -r 2020c7852e44 toolkit/themes/pinstripe/mozapps/plugins/missingPlugin.css
--- a/toolkit/themes/pinstripe/mozapps/plugins/missingPlugin.css	Thu Jan 25 23:03:04 2007 -0800
+++ b/toolkit/themes/pinstripe/mozapps/plugins/missingPlugin.css	Thu Jan 25 23:03:10 2007 -0800
@@ -14,8 +14,10 @@ html|applet > *|* {
 
 html|a {
   text-align: -moz-center;
-  overflow: -moz-hidden-unscrollable;
-  display: block;
+  overflow: hidden;
+  display: inline-block;
+  /* overflow:hidden makes baseline vertical-alignment act like plugins */
+  vertical-align: inherit;
   border: 1px outset;
   padding: 5px;
   font-size: 12px;
diff -r 2020c7852e44 toolkit/themes/winstripe/mozapps/plugins/missingPlugin.css
--- a/toolkit/themes/winstripe/mozapps/plugins/missingPlugin.css	Thu Jan 25 23:03:04 2007 -0800
+++ b/toolkit/themes/winstripe/mozapps/plugins/missingPlugin.css	Thu Jan 25 23:03:10 2007 -0800
@@ -14,8 +14,10 @@ html|applet > *|* {
 
 html|a {
   text-align: -moz-center;
-  overflow: -moz-hidden-unscrollable;
-  display: block;
+  overflow: hidden;
+  display: inline-block;
+  /* overflow:hidden makes baseline vertical-alignment act like plugins */
+  vertical-align: inherit;
   border: 1px outset;
   padding: 5px;
   font-size: 12px;
