From: L. David Baron <dbaron@dbaron.org>

Bug 1133439 patch 2 - Distinguish animation-only SMIL restyles based on eRestyle_StyleAttribute_Animations in RestyleManager::PostRestyleEvent.

diff --git a/layout/base/RestyleManager.cpp b/layout/base/RestyleManager.cpp
--- a/layout/base/RestyleManager.cpp
+++ b/layout/base/RestyleManager.cpp
@@ -1794,23 +1794,19 @@ RestyleManager::PostRestyleEvent(Element
   if (aRestyleHint == 0 && !aMinChangeHint) {
     // Nothing to do here
     return;
   }
 
   mPendingRestyles.AddPendingRestyle(aElement, aRestyleHint, aMinChangeHint);
 
   // Set mHavePendingNonAnimationRestyles for any restyle that could
-  // possibly contain non-animation styles.  Unfortunately there's one
-  // level of the cascade and associated change hint
-  // (eRestyle_StyleAttribute) where we don't fully distinguish.
-  // FIXME (bug 1133439): We could at least distinguish by having two
-  // separate eRestyle_StyleAttribute hints, one for animations and one
-  // for other things.
+  // possibly contain non-animation styles.
   if (aRestyleHint & ~(eRestyle_CSSTransitions | eRestyle_CSSAnimations |
+                       eRestyle_StyleAttribute_Animations |
                        eRestyle_SVGAttrAnimations)) {
     mHavePendingNonAnimationRestyles = true;
   }
 
   PostRestyleEventInternal(false);
 }
 
 void
