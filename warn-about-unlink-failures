Try to assert when Unlink doesn't do what it should (needs better warning text).

diff --git a/xpcom/base/nsCycleCollector.cpp b/xpcom/base/nsCycleCollector.cpp
--- a/xpcom/base/nsCycleCollector.cpp
+++ b/xpcom/base/nsCycleCollector.cpp
@@ -1497,6 +1497,16 @@ nsCycleCollector::CollectWhite(GCGraph &
             Fault("Failed unroot call while unlinking", pinfo);
     }
 
+#ifdef DEBUG_CC
+    for (i = 0; i < count; ++i) {
+        PtrInfo *pinfo = static_cast<PtrInfo*>(mBuf.ObjectAt(i));
+        if (pinfo->mLangID == nsIProgrammingLanguage::CPLUSPLUS) {
+            NS_ASSERTION(!mPurpleBuffer.Exists(pinfo->mPointer),
+                         "Unlink failed to destroy object");
+        }
+    }
+#endif
+
     mBuf.Empty();
 
 #if defined(DEBUG_CC) && !defined(__MINGW32__) && defined(WIN32)
