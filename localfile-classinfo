Implement classinfo for local files.

diff --git a/xpcom/build/nsXPComInit.cpp b/xpcom/build/nsXPComInit.cpp
--- a/xpcom/build/nsXPComInit.cpp
+++ b/xpcom/build/nsXPComInit.cpp
@@ -408,7 +408,9 @@ static const nsModuleComponentInfo compo
 
 #undef COMPONENT_SUPPORTS
 #define NS_LOCAL_FILE_CLASSNAME "Local File Specification"
-    COMPONENT(LOCAL_FILE, nsLocalFile::nsLocalFileConstructor),
+    // XXX Is nsLocalFile the right class name to use?
+    COMPONENT_CI_FLAGS(LOCAL_FILE, nsLocalFile::nsLocalFileConstructor,
+                       nsLocalFile, nsIClassInfo::THREADSAFE),
 #define NS_DIRECTORY_SERVICE_CLASSNAME  "nsIFile Directory Service"
     COMPONENT(DIRECTORY_SERVICE, nsDirectoryService::Create),
     COMPONENT(PROCESS, nsProcessConstructor),
diff --git a/xpcom/io/nsLocalFileUnix.cpp b/xpcom/io/nsLocalFileUnix.cpp
--- a/xpcom/io/nsLocalFileUnix.cpp
+++ b/xpcom/io/nsLocalFileUnix.cpp
@@ -88,6 +88,7 @@
 
 #include "nsNativeCharsetUtils.h"
 #include "nsTraceRefcntImpl.h"
+#include "nsIClassInfoImpl.h"
 
 // On some platforms file/directory name comparisons need to
 // be case-blind.
@@ -257,10 +258,13 @@ nsLocalFile::nsLocalFile(const nsLocalFi
 {
 }
 
-NS_IMPL_THREADSAFE_ISUPPORTS3(nsLocalFile,
-                              nsIFile,
-                              nsILocalFile,
-                              nsIHashable)
+NS_IMPL_THREADSAFE_ADDREF(nsLocalFile)
+NS_IMPL_THREADSAFE_RELEASE(nsLocalFile)
+NS_IMPL_QUERYINTERFACE3_CI(nsLocalFile,
+                           nsIFile,
+                           nsILocalFile,
+                           nsIHashable)
+NS_IMPL_CI_INTERFACE_GETTER1(nsConsoleService, nsIConsoleService)
 
 nsresult
 nsLocalFile::nsLocalFileConstructor(nsISupports *outer, 
