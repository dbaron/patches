From: L. David Baron <dbaron@dbaron.org>

Fix backwards handling of zero-duration transitions.  (Bug 622461)

diff --git a/layout/style/nsTransitionManager.cpp b/layout/style/nsTransitionManager.cpp
--- a/layout/style/nsTransitionManager.cpp
+++ b/layout/style/nsTransitionManager.cpp
@@ -117,19 +117,19 @@ ElementPropertyTransition::ValuePortionF
   // 0-1).
   double duration = mDuration.ToSeconds();
   NS_ABORT_IF_FALSE(duration >= 0.0, "negative duration forbidden");
   double timePortion;
   if (duration == 0.0) {
     // When duration is zero, we can still have a transition when delay
     // is nonzero.  mStartTime already incorporates delay.
     if (aRefreshTime >= mStartTime) {
+      timePortion = 1.0;
+    } else {
       timePortion = 0.0;
-    } else {
-      timePortion = 1.0;
     }
   } else {
     timePortion = (aRefreshTime - mStartTime).ToSeconds() / duration;
     if (timePortion < 0.0)
       timePortion = 0.0; // use start value during transition-delay
     if (timePortion > 1.0)
       timePortion = 1.0; // we might be behind on flushing
   }
