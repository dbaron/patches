Fix leak of pixmaps.  b=403481  Patch by vlad.

diff --git a/gfx/thebes/src/gfxPlatformGtk.cpp b/gfx/thebes/src/gfxPlatformGtk.cpp
--- a/gfx/thebes/src/gfxPlatformGtk.cpp
+++ b/gfx/thebes/src/gfxPlatformGtk.cpp
@@ -68,6 +68,13 @@
 
 PRInt32 gfxPlatformGtk::sDPI = -1;
 gfxFontconfigUtils *gfxPlatformGtk::sFontconfigUtils = nsnull;
+
+static cairo_user_data_key_t cairo_gdk_pixmap_key;
+static void do_gdk_pixmap_unref (void *data)
+{
+    GdkPixmap *pmap = (GdkPixmap*)data;
+    gdk_pixmap_unref (pmap);
+}
 
 gfxPlatformGtk::gfxPlatformGtk()
 {
@@ -166,6 +173,13 @@ gfxPlatformGtk::CreateOffscreenSurface(c
                                             size);
         }
 
+        if (pixmap && newSurface) {
+            // set up the surface to auto-unref the gdk pixmap when the surface
+            // is released
+            newSurface->SetData(&cairo_gdk_pixmap_key,
+                                pixmap,
+                                do_gdk_pixmap_unref);
+        }
     } else {
 #ifdef MOZ_ENABLE_GLITZ
         glitz_drawable_format_t *gdformat = glitz_glx_find_pbuffer_format
