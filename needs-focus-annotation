From: L. David Baron <dbaron@dbaron.org>

Add needs-focus annotation for a bunch of tests with selects in them to try to fix intermittent failures.  (Bug 626103)

diff --git a/layout/reftests/css-invalid/select/reftest.list b/layout/reftests/css-invalid/select/reftest.list
--- a/layout/reftests/css-invalid/select/reftest.list
+++ b/layout/reftests/css-invalid/select/reftest.list
@@ -1,12 +1,12 @@
-== select-valid.html select-ref.html
-== select-invalid.html select-ref.html
-== select-disabled.html select-disabled-ref.html
-== select-dyn-disabled.html select-disabled-ref.html
-== select-dyn-not-disabled.html select-ref.html
-== select-required-invalid.html select-required-ref.html
-== select-required-valid.html select-required-ref.html
-== select-required-multiple-invalid.html select-required-multiple-ref.html
-== select-required-multiple-valid.html select-required-multiple-ref.html
-fails-if(Android) == select-disabled-fieldset-1.html select-fieldset-ref.html
-fails-if(Android) == select-disabled-fieldset-2.html select-fieldset-ref.html
-== select-fieldset-legend.html select-fieldset-legend-ref.html
+needs-focus == select-valid.html select-ref.html
+needs-focus == select-invalid.html select-ref.html
+needs-focus == select-disabled.html select-disabled-ref.html
+needs-focus == select-dyn-disabled.html select-disabled-ref.html
+needs-focus == select-dyn-not-disabled.html select-ref.html
+needs-focus == select-required-invalid.html select-required-ref.html
+needs-focus == select-required-valid.html select-required-ref.html
+needs-focus == select-required-multiple-invalid.html select-required-multiple-ref.html
+needs-focus == select-required-multiple-valid.html select-required-multiple-ref.html
+needs-focus fails-if(Android) == select-disabled-fieldset-1.html select-fieldset-ref.html
+needs-focus fails-if(Android) == select-disabled-fieldset-2.html select-fieldset-ref.html
+needs-focus == select-fieldset-legend.html select-fieldset-legend-ref.html
diff --git a/layout/reftests/css-ui-invalid/select/reftest.list b/layout/reftests/css-ui-invalid/select/reftest.list
--- a/layout/reftests/css-ui-invalid/select/reftest.list
+++ b/layout/reftests/css-ui-invalid/select/reftest.list
@@ -1,18 +1,18 @@
-== select-valid.html select-ref.html
-== select-invalid.html select-ref.html
-== select-invalid-reset.html select-required-ref.html
-== select-disabled.html select-disabled-ref.html
-== select-dyn-disabled.html select-disabled-ref.html
-== select-dyn-not-disabled.html select-ref.html
-== select-required-invalid-1.html select-required-ref.html
-== select-required-invalid-2.html select-required-ref.html
-== select-required-invalid-changed-1.html select-required-ref.html
-== select-required-invalid-changed-2.html select-required-ref.html
-== select-required-valid.html select-required-ref.html
-== select-required-multiple-invalid.html select-required-multiple-ref.html
-== select-required-multiple-invalid-changed.html select-required-multiple-ref.html
-== select-required-multiple-valid.html select-required-multiple-ref.html
-fails-if(Android) == select-disabled-fieldset-1.html select-fieldset-ref.html
-fails-if(Android) == select-disabled-fieldset-2.html select-fieldset-ref.html
-== select-fieldset-legend.html select-fieldset-legend-ref.html
-== select-novalidate.html select-required-ref.html
+needs-focus == select-valid.html select-ref.html
+needs-focus == select-invalid.html select-ref.html
+needs-focus == select-invalid-reset.html select-required-ref.html
+needs-focus == select-disabled.html select-disabled-ref.html
+needs-focus == select-dyn-disabled.html select-disabled-ref.html
+needs-focus == select-dyn-not-disabled.html select-ref.html
+needs-focus == select-required-invalid-1.html select-required-ref.html
+needs-focus == select-required-invalid-2.html select-required-ref.html
+needs-focus == select-required-invalid-changed-1.html select-required-ref.html
+needs-focus == select-required-invalid-changed-2.html select-required-ref.html
+needs-focus == select-required-valid.html select-required-ref.html
+needs-focus == select-required-multiple-invalid.html select-required-multiple-ref.html
+needs-focus == select-required-multiple-invalid-changed.html select-required-multiple-ref.html
+needs-focus == select-required-multiple-valid.html select-required-multiple-ref.html
+needs-focus fails-if(Android) == select-disabled-fieldset-1.html select-fieldset-ref.html
+needs-focus fails-if(Android) == select-disabled-fieldset-2.html select-fieldset-ref.html
+needs-focus == select-fieldset-legend.html select-fieldset-legend-ref.html
+needs-focus == select-novalidate.html select-required-ref.html
diff --git a/layout/reftests/css-ui-valid/select/reftest.list b/layout/reftests/css-ui-valid/select/reftest.list
--- a/layout/reftests/css-ui-valid/select/reftest.list
+++ b/layout/reftests/css-ui-valid/select/reftest.list
@@ -1,18 +1,18 @@
-== select-valid.html select-ref.html
-== select-valid-reset.html select-required-ref.html
-== select-invalid.html select-ref.html
-== select-disabled.html select-disabled-ref.html
-== select-dyn-disabled.html select-disabled-ref.html
-== select-dyn-not-disabled.html select-ref.html
-== select-required-invalid.html select-required-ref.html
-== select-required-valid-1.html select-required-ref.html
-== select-required-valid-2.html select-required-ref.html
-== select-required-valid-changed-1.html select-required-ref.html
-== select-required-valid-changed-2.html select-required-ref.html
-== select-required-multiple-invalid.html select-required-multiple-ref.html
-== select-required-multiple-valid.html select-required-multiple-ref.html
-== select-required-multiple-valid-changed.html select-required-multiple-ref.html
-fails-if(Android) == select-disabled-fieldset-1.html select-fieldset-ref.html
-fails-if(Android) == select-disabled-fieldset-2.html select-fieldset-ref.html
-== select-fieldset-legend.html select-fieldset-legend-ref.html
-== select-novalidate.html select-required-ref.html
+needs-focus == select-valid.html select-ref.html
+needs-focus == select-valid-reset.html select-required-ref.html
+needs-focus == select-invalid.html select-ref.html
+needs-focus == select-disabled.html select-disabled-ref.html
+needs-focus == select-dyn-disabled.html select-disabled-ref.html
+needs-focus == select-dyn-not-disabled.html select-ref.html
+needs-focus == select-required-invalid.html select-required-ref.html
+needs-focus == select-required-valid-1.html select-required-ref.html
+needs-focus == select-required-valid-2.html select-required-ref.html
+needs-focus == select-required-valid-changed-1.html select-required-ref.html
+needs-focus == select-required-valid-changed-2.html select-required-ref.html
+needs-focus == select-required-multiple-invalid.html select-required-multiple-ref.html
+needs-focus == select-required-multiple-valid.html select-required-multiple-ref.html
+needs-focus == select-required-multiple-valid-changed.html select-required-multiple-ref.html
+needs-focus fails-if(Android) == select-disabled-fieldset-1.html select-fieldset-ref.html
+needs-focus fails-if(Android) == select-disabled-fieldset-2.html select-fieldset-ref.html
+needs-focus == select-fieldset-legend.html select-fieldset-legend-ref.html
+needs-focus == select-novalidate.html select-required-ref.html
diff --git a/layout/reftests/css-valid/select/reftest.list b/layout/reftests/css-valid/select/reftest.list
--- a/layout/reftests/css-valid/select/reftest.list
+++ b/layout/reftests/css-valid/select/reftest.list
@@ -1,12 +1,12 @@
-== select-valid.html select-ref.html
-== select-invalid.html select-ref.html
-== select-disabled.html select-disabled-ref.html
-== select-dyn-disabled.html select-disabled-ref.html
-== select-dyn-not-disabled.html select-ref.html
-== select-required-invalid.html select-required-ref.html
-== select-required-valid.html select-required-ref.html
-== select-required-multiple-invalid.html select-required-multiple-ref.html
-== select-required-multiple-valid.html select-required-multiple-ref.html
-fails-if(Android) == select-disabled-fieldset-1.html select-fieldset-ref.html
-fails-if(Android) == select-disabled-fieldset-2.html select-fieldset-ref.html
-== select-fieldset-legend.html select-fieldset-legend-ref.html
+needs-focus == select-valid.html select-ref.html
+needs-focus == select-invalid.html select-ref.html
+needs-focus == select-disabled.html select-disabled-ref.html
+needs-focus == select-dyn-disabled.html select-disabled-ref.html
+needs-focus == select-dyn-not-disabled.html select-ref.html
+needs-focus == select-required-invalid.html select-required-ref.html
+needs-focus == select-required-valid.html select-required-ref.html
+needs-focus == select-required-multiple-invalid.html select-required-multiple-ref.html
+needs-focus == select-required-multiple-valid.html select-required-multiple-ref.html
+needs-focus fails-if(Android) == select-disabled-fieldset-1.html select-fieldset-ref.html
+needs-focus fails-if(Android) == select-disabled-fieldset-2.html select-fieldset-ref.html
+needs-focus == select-fieldset-legend.html select-fieldset-legend-ref.html
