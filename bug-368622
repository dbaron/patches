Allow display:inline-block to be used on :before and :after.  b=368622

diff -r 882043c02e5b layout/base/nsCSSFrameConstructor.cpp
--- a/layout/base/nsCSSFrameConstructor.cpp	Thu Feb 01 13:25:04 2007 -0800
+++ b/layout/base/nsCSSFrameConstructor.cpp	Thu Feb 01 14:30:18 2007 -0800
@@ -2203,8 +2203,9 @@ nsCSSFrameConstructor::CreateGeneratedCo
     nsIFrame*     containerFrame;
     nsFrameItems  childFrames;
 
-    if (NS_STYLE_DISPLAY_BLOCK ==
-        pseudoStyleContext->GetStyleDisplay()->mDisplay) {
+    const PRUint8 disp = pseudoStyleContext->GetStyleDisplay()->mDisplay;
+    if (disp == NS_STYLE_DISPLAY_BLOCK ||
+        disp == NS_STYLE_DISPLAY_INLINE_BLOCK) {
       containerFrame = NS_NewBlockFrame(mPresShell, pseudoStyleContext);
     } else {
       containerFrame = NS_NewInlineFrame(mPresShell, pseudoStyleContext);
diff -r 882043c02e5b layout/style/nsRuleNode.cpp
--- a/layout/style/nsRuleNode.cpp	Thu Feb 01 13:25:04 2007 -0800
+++ b/layout/style/nsRuleNode.cpp	Thu Feb 01 13:30:46 2007 -0800
@@ -2848,7 +2848,8 @@ nsRuleNode::ComputeDisplayData(nsStyleSt
 
     PRUint8 displayValue = display->mDisplay;
     if (displayValue != NS_STYLE_DISPLAY_NONE &&
-        displayValue != NS_STYLE_DISPLAY_INLINE) {
+        displayValue != NS_STYLE_DISPLAY_INLINE &&
+        displayValue != NS_STYLE_DISPLAY_INLINE_BLOCK) {
       inherited = PR_TRUE;
       // XXX IsBlockInside?  (except for the marker bit)
       if (parentDisplay->IsBlockLevel() ||
