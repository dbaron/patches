From: L. David Baron <dbaron@dbaron.org>

Replace one use of nsRestyleHint_ChangeAnimationPhase with nsRestyleHint_AllHintsWithAnimations so that we can remove the rest.

diff --git a/layout/style/nsAnimationManager.cpp b/layout/style/nsAnimationManager.cpp
--- a/layout/style/nsAnimationManager.cpp
+++ b/layout/style/nsAnimationManager.cpp
@@ -564,17 +564,17 @@ nsAnimationManager::BuildAnimations(nsSt
                          toKeyframe.mKey, toContext);
         } else {
           if (toKeyframe.mKey != 0.0f) {
             // There's no data for this property at 0%, so use the
             // cascaded value above us.
             if (!styleWithoutAnimation) {
               styleWithoutAnimation = mPresContext->StyleSet()->
                 ResolveStyleWithoutAnimation(aTarget, aStyleContext,
-                                             eRestyle_ChangeAnimationPhase);
+                                             eRestyle_AllHintsWithAnimations);
             }
             interpolated = interpolated &&
               BuildSegment(propData.mSegments, prop, src,
                            0.0f, styleWithoutAnimation, nullptr,
                            toKeyframe.mKey, toContext);
           }
         }
 
@@ -583,17 +583,17 @@ nsAnimationManager::BuildAnimations(nsSt
       }
 
       if (fromKeyframe->mKey != 1.0f) {
         // There's no data for this property at 100%, so use the
         // cascaded value above us.
         if (!styleWithoutAnimation) {
           styleWithoutAnimation = mPresContext->StyleSet()->
             ResolveStyleWithoutAnimation(aTarget, aStyleContext,
-                                         eRestyle_ChangeAnimationPhase);
+                                         eRestyle_AllHintsWithAnimations);
         }
         interpolated = interpolated &&
           BuildSegment(propData.mSegments, prop, src,
                        fromKeyframe->mKey, fromContext,
                        fromKeyframe->mRule->Declaration(),
                        1.0f, styleWithoutAnimation);
       }
 
diff --git a/layout/style/nsStyleSet.h b/layout/style/nsStyleSet.h
--- a/layout/style/nsStyleSet.h
+++ b/layout/style/nsStyleSet.h
@@ -137,17 +137,17 @@ class nsStyleSet
   ResolveStyleWithReplacement(mozilla::dom::Element* aElement,
                               mozilla::dom::Element* aPseudoElement,
                               nsStyleContext* aNewParentContext,
                               nsStyleContext* aOldStyleContext,
                               nsRestyleHint aReplacements);
 
   // Resolve style by returning a style context with the animation data
   // removed.  It is allowable to remove all animation data with
-  // eRestyle_ChangeAnimationPhase, or by using any othe hints that
+  // eRestyle_AllHintsWithAnimations, or by using any othe hints that
   // are allowed by ResolveStyleWithReplacement.
   already_AddRefed<nsStyleContext>
     ResolveStyleWithoutAnimation(mozilla::dom::Element* aElement,
                                  nsStyleContext* aStyleContext,
                                  nsRestyleHint aWhichToRemove);
 
   // Get a style context for a non-element (which no rules will match),
   // such as text nodes, placeholder frames, and the nsFirstLetterFrame
