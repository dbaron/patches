From: L. David Baron <dbaron@dbaron.org>

Bug 1144885 - Add reftests for font-size:0 and font-size-adjust:0.  r=jdaggett

diff --git a/layout/reftests/w3c-css/submitted/fonts3/font-size-adjust-zero-1.html b/layout/reftests/w3c-css/submitted/fonts3/font-size-adjust-zero-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/fonts3/font-size-adjust-zero-1.html
@@ -0,0 +1,19 @@
+<!DOCTYPE HTML>
+<title>CSS Test: font-size-adjust: 0</title>
+<link rel="author" title="L. David Baron" href="http://dbaron.org/">
+<link rel="author" title="Mozilla" href="http://www.mozilla.org/">
+<link rel="help" href="http://www.w3.org/TR/css3-fonts/#font-size-adjust-prop">
+<link rel="help" href="http://www.w3.org/TR/CSS21/box.html#collapsing-margins">
+<link rel="match" href="font-size-zero-2-ref.html">
+<meta name="flags" content="">
+<style>
+/* spec ambiguous whether font-size-adjust influences line-height: normal */
+body { line-height: 1.2 }
+
+p { margin: 1em 0 }
+p.zero { font-size-adjust: 0 }
+</style>
+
+<p>before</p>
+<p class="zero">zero</p>
+<p>after</p>
diff --git a/layout/reftests/w3c-css/submitted/fonts3/font-size-adjust-zero-2.html b/layout/reftests/w3c-css/submitted/fonts3/font-size-adjust-zero-2.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/fonts3/font-size-adjust-zero-2.html
@@ -0,0 +1,20 @@
+<!DOCTYPE HTML>
+<title>CSS Test: font-size-adjust: 0</title>
+<link rel="author" title="L. David Baron" href="http://dbaron.org/">
+<link rel="author" title="Mozilla" href="http://www.mozilla.org/">
+<link rel="help" href="http://www.w3.org/TR/css3-fonts/#font-size-adjust-prop">
+<link rel="help" href="http://www.w3.org/TR/CSS21/box.html#collapsing-margins">
+<link rel="match" href="font-size-zero-2-ref.html">
+<meta name="flags" content="">
+<style>
+/* spec ambiguous whether font-size-adjust influences line-height: normal */
+body { line-height: 1.2 }
+span { line-height: 0 }
+
+p { margin: 1em 0 }
+span.zero { font-size-adjust: 0 }
+</style>
+
+<p>before</p>
+<p><span class="zero">zero</span></p>
+<p>after</p>
diff --git a/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-1-notref.html b/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-1-notref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-1-notref.html
@@ -0,0 +1,13 @@
+<!DOCTYPE HTML>
+<title>CSS Test Reference</title>
+<link rel="author" title="L. David Baron" href="http://dbaron.org/">
+<link rel="author" title="Mozilla" href="http://www.mozilla.org/">
+<meta name="flags" content="">
+<style>
+/* spec ambiguous whether font-size-adjust influences line-height: normal */
+body { line-height: 1.2 }
+</style>
+
+<p>before</p>
+<p>zero</p>
+<p>after</p>
diff --git a/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-1-ref.html b/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-1-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-1-ref.html
@@ -0,0 +1,16 @@
+<!DOCTYPE HTML>
+<title>CSS Test Reference</title>
+<link rel="author" title="L. David Baron" href="http://dbaron.org/">
+<link rel="author" title="Mozilla" href="http://www.mozilla.org/">
+<link rel="mismatch" href="font-size-zero-1-notref.html">
+<meta name="flags" content="">
+<style>
+/* spec ambiguous whether font-size-adjust influences line-height: normal */
+body { line-height: 1.2 }
+
+p { margin: 1em 0 }
+p.first { margin-bottom: 2em }
+</style>
+
+<p class="first">before</p>
+<p>after</p>
diff --git a/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-1.html b/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-1.html
@@ -0,0 +1,19 @@
+<!DOCTYPE HTML>
+<title>CSS Test: font-size: 0</title>
+<link rel="author" title="L. David Baron" href="http://dbaron.org/">
+<link rel="author" title="Mozilla" href="http://www.mozilla.org/">
+<link rel="help" href="http://www.w3.org/TR/css3-fonts/#font-size-prop">
+<link rel="help" href="http://www.w3.org/TR/CSS21/box.html#collapsing-margins">
+<link rel="match" href="font-size-zero-1-ref.html">
+<meta name="flags" content="">
+<style>
+/* spec ambiguous whether font-size-adjust influences line-height: normal */
+body { line-height: 1.2 }
+
+p { margin: 1em 0 }
+p.zero { font-size: 0 }
+</style>
+
+<p>before</p>
+<p class="zero">zero</p>
+<p>after</p>
diff --git a/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-2-ref.html b/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-2-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-2-ref.html
@@ -0,0 +1,15 @@
+<!DOCTYPE HTML>
+<title>CSS Test Reference</title>
+<link rel="author" title="L. David Baron" href="http://dbaron.org/">
+<link rel="author" title="Mozilla" href="http://www.mozilla.org/">
+<link rel="help" href="http://www.w3.org/TR/css3-fonts/#font-size-prop">
+<link rel="help" href="http://www.w3.org/TR/CSS21/box.html#collapsing-margins">
+<meta name="flags" content="">
+<style>
+/* spec ambiguous whether font-size-adjust influences line-height: normal */
+body { line-height: 1.2 }
+</style>
+
+<p>before</p>
+<p>&nbsp;</p>
+<p>after</p>
diff --git a/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-2.html b/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-2.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/fonts3/font-size-zero-2.html
@@ -0,0 +1,19 @@
+<!DOCTYPE HTML>
+<title>CSS Test: font-size: 0</title>
+<link rel="author" title="L. David Baron" href="http://dbaron.org/">
+<link rel="author" title="Mozilla" href="http://www.mozilla.org/">
+<link rel="help" href="http://www.w3.org/TR/css3-fonts/#font-size-prop">
+<link rel="help" href="http://www.w3.org/TR/CSS21/box.html#collapsing-margins">
+<link rel="match" href="font-size-zero-2-ref.html">
+<meta name="flags" content="">
+<style>
+/* spec ambiguous whether font-size-adjust influences line-height: normal */
+body { line-height: 1.2 }
+
+p { margin: 1em 0 }
+span.zero { font-size: 0 }
+</style>
+
+<p>before</p>
+<p><span class="zero">zero</span></p>
+<p>after</p>
diff --git a/layout/reftests/w3c-css/submitted/fonts3/reftest.list b/layout/reftests/w3c-css/submitted/fonts3/reftest.list
new file mode 100644
--- /dev/null
+++ b/layout/reftests/w3c-css/submitted/fonts3/reftest.list
@@ -0,0 +1,5 @@
+== font-size-zero-1.html font-size-zero-1-ref.html
+!= font-size-zero-1-ref.html font-size-zero-1-notref.html
+== font-size-zero-2.html font-size-zero-2-ref.html
+== font-size-adjust-zero-1.html font-size-zero-2-ref.html
+== font-size-adjust-zero-2.html font-size-zero-2-ref.html
diff --git a/layout/reftests/w3c-css/submitted/reftest.list b/layout/reftests/w3c-css/submitted/reftest.list
--- a/layout/reftests/w3c-css/submitted/reftest.list
+++ b/layout/reftests/w3c-css/submitted/reftest.list
@@ -18,17 +18,17 @@ include css21/reftest.list
 
 # Conditional Rules Level 3
 include conditional3/reftest.list
 
 # Flexible Box Layout Module
 include flexbox/reftest.list
 
 # Fonts Level 3
-# include fonts3/reftest.list
+include fonts3/reftest.list
 
 # Image Values and Replaced Content Level 3
 include images3/reftest.list
 
 # Lists and Counters Level 3
 include lists-3/reftest.list
 
 # Media Queries Level 3
