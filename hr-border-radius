From: L. David Baron <dbaron@dbaron.org>

When we set border-radius on <hr>, make the ends circular rather than elliptical.  (Bug 597721)

diff --git a/content/html/content/src/nsHTMLHRElement.cpp b/content/html/content/src/nsHTMLHRElement.cpp
--- a/content/html/content/src/nsHTMLHRElement.cpp
+++ b/content/html/content/src/nsHTMLHRElement.cpp
@@ -275,23 +275,24 @@ MapAttributesIntoRule(const nsMappedAttr
                                         eCSSUnit_Enumerated);
       }
       if (borderStyle.mLeft.GetUnit() == eCSSUnit_Null) {
         borderStyle.mLeft.SetIntValue(NS_STYLE_BORDER_STYLE_SOLID,
                                       eCSSUnit_Enumerated);
       }
 
       // If it would be noticeable, set the border radius to
-      // 100% on all corners
+      // 10000px on all corners; this triggers the clamping to make
+      // circular ends.
       nsCSSCornerSizes& corners = aData->mMarginData->mBorderRadius;
 
       NS_FOR_CSS_FULL_CORNERS(c) {
         nsCSSValue& dimen = corners.GetCorner(c);
         if (dimen.GetUnit() == eCSSUnit_Null) {
-          dimen.SetPercentValue(1.0f);
+          dimen.SetFloatValue(10000.0f, eCSSUnit_Pixel);
         }
       }
     }
   }
   if (aData->mSIDs & NS_STYLE_INHERIT_BIT(Color)) {
     // color: a color
     // (we got the color attribute earlier)
     if (colorIsSet &&
