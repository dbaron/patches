From: L. David Baron <dbaron@dbaron.org>

Bug 837211 patch 1 - Add ALPHA_BUILD as the opposite of RELEASE_BUILD so we can be careful about having included the definitions we want.

diff --git a/build/moz.configure/init.configure b/build/moz.configure/init.configure
--- a/build/moz.configure/init.configure
+++ b/build/moz.configure/init.configure
@@ -658,46 +658,56 @@ def build_project(include_project_config
                                           build_env.topsrcdir))
     return ret
 
 set_config('MOZ_BUILD_APP', build_project)
 set_define('MOZ_BUILD_APP', build_project)
 add_old_configure_assignment('MOZ_BUILD_APP', build_project)
 
 
-# set RELEASE_BUILD and NIGHTLY_BUILD variables depending on the cycle we're in
+# set RELEASE_BUILD, ALPHA_BUILD, and NIGHTLY_BUILD variables depending on the
+# cycle we're in.
 # The logic works like this:
-# - if we have "a1" in GRE_MILESTONE, we're building Nightly (define NIGHTLY_BUILD)
-# - otherwise, if we have "a" in GRE_MILESTONE, we're building Nightly or Aurora
+# - if we have "a1" in GRE_MILESTONE, we're building Nightly (define
+#   NIGHTLY_BUILD and ALPHA_BUILD)
+# - otherwise, if we have "a" in GRE_MILESTONE, we're building Nightly or
+#   Aurora (define ALPHA_BUILD)
 # - otherwise, we're building Release/Beta (define RELEASE_BUILD)
 @depends(check_build_environment)
 @advanced
 def milestone(build_env):
     milestone_path = os.path.join(build_env.topsrcdir,
                                   'config',
                                   'milestone.txt')
     with open(milestone_path, 'r') as fh:
         milestone = fh.read().splitlines()[-1]
 
-    is_nightly = is_release = None
+    is_nightly = is_alpha = is_release = None
 
     if 'a1' in milestone:
         is_nightly = True
-    elif 'a' not in milestone:
+        is_alpha = True
+    elif 'a' in milestone:
+        is_alpha = True
+    else:
         is_release = True
 
     return namespace(version=milestone,
                      is_nightly=is_nightly,
+                     is_alpha=is_alpha,
                      is_release=is_release)
 
 set_config('GRE_MILESTONE', delayed_getattr(milestone, 'version'))
 set_config('NIGHTLY_BUILD', delayed_getattr(milestone, 'is_nightly'))
 set_define('NIGHTLY_BUILD', delayed_getattr(milestone, 'is_nightly'))
 add_old_configure_assignment('NIGHTLY_BUILD',
-                             delayed_getattr(milestone, 'is_nightly'))
+set_config('ALPHA_BUILD', delayed_getattr(milestone, 'is_alpha'))
+set_define('ALPHA_BUILD', delayed_getattr(milestone, 'is_alpha'))
+add_old_configure_assignment('ALPHA_BUILD',
+                             delayed_getattr(milestone, 'is_alpha'))
 set_config('RELEASE_BUILD', delayed_getattr(milestone, 'is_release'))
 set_define('RELEASE_BUILD', delayed_getattr(milestone, 'is_release'))
 add_old_configure_assignment('RELEASE_BUILD',
                              delayed_getattr(milestone, 'is_release'))
 
 
 # This is temporary until js/src/configure and configure are merged.
 # Use instead of option() in js/moz.configure
