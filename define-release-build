From: L. David Baron <dbaron@dbaron.org>

Bug 837211 patch 1 - Add ALPHA_BUILD as the opposite of RELEASE_BUILD so we can be careful about having included the definitions we want.

diff --git a/build/moz.configure/init.configure b/build/moz.configure/init.configure
--- a/build/moz.configure/init.configure
+++ b/build/moz.configure/init.configure
@@ -600,20 +600,23 @@ def build_project(include_project_config
     ret = os.path.dirname(os.path.relpath(include_project_configure,
                                           build_env.topsrcdir))
     set_config('MOZ_BUILD_APP', ret)
     set_define('MOZ_BUILD_APP', ret)
     add_old_configure_assignment('MOZ_BUILD_APP', ret)
     return ret
 
 
-# set RELEASE_BUILD and NIGHTLY_BUILD variables depending on the cycle we're in
+# set RELEASE_BUILD, ALPHA_BUILD, and NIGHTLY_BUILD variables depending on the
+# cycle we're in.
 # The logic works like this:
-# - if we have "a1" in GRE_MILESTONE, we're building Nightly (define NIGHTLY_BUILD)
-# - otherwise, if we have "a" in GRE_MILESTONE, we're building Nightly or Aurora
+# - if we have "a1" in GRE_MILESTONE, we're building Nightly (define
+#   NIGHTLY_BUILD and ALPHA_BUILD)
+# - otherwise, if we have "a" in GRE_MILESTONE, we're building Nightly or
+#   Aurora (define ALPHA_BUILD)
 # - otherwise, we're building Release/Beta (define RELEASE_BUILD)
 @depends(check_build_environment)
 @advanced
 def milestone(build_env):
     milestone_path = os.path.join(build_env.topsrcdir,
                                   'config',
                                   'milestone.txt')
     with open(milestone_path, 'r') as fh:
@@ -622,18 +625,25 @@ def milestone(build_env):
     set_config('GRE_MILESTONE', milestone)
 
     is_nightly = is_release = False
 
     if 'a1' in milestone:
         set_config('NIGHTLY_BUILD', True)
         set_define('NIGHTLY_BUILD', True)
         add_old_configure_assignment('NIGHTLY_BUILD', True)
+        set_config('ALPHA_BUILD', True)
+        set_define('ALPHA_BUILD', True)
+        add_old_configure_assignment('ALPHA_BUILD', True)
         is_nightly = True
-    elif 'a' not in milestone:
+    elif 'a' in milestone:
+        set_config('ALPHA_BUILD', True)
+        set_define('ALPHA_BUILD', True)
+        add_old_configure_assignment('ALPHA_BUILD', True)
+    else:
         set_config('RELEASE_BUILD', True)
         set_define('RELEASE_BUILD', True)
         add_old_configure_assignment('RELEASE_BUILD', True)
         is_release = True
 
     return namespace(version=milestone,
                      is_nightly=is_nightly,
                      is_release=is_release)
