Disable text run optimization for long preformatted text to work around bug 389428.

diff --git a/layout/generic/nsTextFrameThebes.cpp b/layout/generic/nsTextFrameThebes.cpp
--- a/layout/generic/nsTextFrameThebes.cpp
+++ b/layout/generic/nsTextFrameThebes.cpp
@@ -1302,6 +1302,8 @@ BuildTextRunsScanner::ContinueTextRunAcr
 
   nsStyleContext* sc1 = aFrame1->GetStyleContext();
   const nsStyleText* textStyle1 = sc1->GetStyleText();
+  // Disabled; see https://bugzilla.mozilla.org/show_bug.cgi?id=389428#c6
+#if 0
   // If the first frame ends in a preformatted newline, then we end the textrun
   // here. This avoids creating giant textruns for an entire plain text file.
   // Note that we create a single text frame for a preformatted text node,
@@ -1310,6 +1312,7 @@ BuildTextRunsScanner::ContinueTextRunAcr
   // line. That's OK though.
   if (textStyle1->WhiteSpaceIsSignificant() && HasTerminalNewline(aFrame1))
     return PR_FALSE;
+#endif
 
   nsStyleContext* sc2 = aFrame2->GetStyleContext();
   if (sc1 == sc2)
