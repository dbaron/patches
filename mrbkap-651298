From: Blake Kaplan <mrbkap@gmail.com>

Bug 651298 - Remove this assertion because document.domain makes it false.

diff --git a/js/src/jsobjinlines.h b/js/src/jsobjinlines.h
--- a/js/src/jsobjinlines.h
+++ b/js/src/jsobjinlines.h
@@ -856,34 +856,20 @@ inline bool
 JSObject::isCallable()
 {
     return isFunction() || getClass()->call;
 }
 
 inline JSPrincipals *
 JSObject::principals(JSContext *cx)
 {
-    JSPrincipals *compPrincipals = compartment()->principals;
-#ifdef DEBUG
-    if (!compPrincipals)
-        return NULL;
-
-    /*
-     * Assert that the compartment's principals are either the same or
-     * equivalent to those we would find through security hooks.
-     */
     JSSecurityCallbacks *cb = JS_GetSecurityCallbacks(cx);
-    if (JSObjectPrincipalsFinder finder = cb ? cb->findObjectPrincipals : NULL) {
-        JSPrincipals *hookPrincipals = finder(cx, this);
-        JS_ASSERT(hookPrincipals == compPrincipals ||
-                  (hookPrincipals->subsume(hookPrincipals, compPrincipals) &&
-                   compPrincipals->subsume(compPrincipals, hookPrincipals)));
-    }
-#endif
-    return compPrincipals;
+    if (JSObjectPrincipalsFinder finder = cb ? cb->findObjectPrincipals : NULL)
+        return finder(cx, this);
+    return NULL;
 }
 
 inline JSPrincipals *
 JSStackFrame::principals(JSContext *cx) const
 {
     return scopeChain().principals(cx);
 }
 
