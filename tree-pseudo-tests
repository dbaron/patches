From: L. David Baron <dbaron@dbaron.org>

Add tests for :-moz-tree-* pseudo-elements.

diff --git a/layout/style/test/test_selectors.html b/layout/style/test/test_selectors.html
--- a/layout/style/test/test_selectors.html
+++ b/layout/style/test/test_selectors.html
@@ -677,16 +677,30 @@ function run() {
     test_balanced_unparseable(":-moz-locale-dir(ltr, other)");
     test_balanced_unparseable(":-moz-locale-dir");
 
     // Test -moz-lwtheme and -moz-lwtheme-[darktext|brighttext]
     test_parseable(":-moz-lwtheme");
     test_parseable(":-moz-lwtheme-brighttext");
     test_parseable(":-moz-lwtheme-darktext");
 
+    test_parseable(":-moz-tree-row(selected)");
+    test_parseable("::-moz-tree-row(selected)");
+    test_parseable(":-moz-tree-row(selected focus)");
+    test_parseable(":-moz-tree-row(selected , focus)");
+    test_parseable("::-moz-tree-row(selected ,focus)");
+    test_parseable(":-moz-tree-row(selected, focus)");
+    test_parseable("::-moz-tree-row(selected,focus)");
+    test_parseable(":-moz-tree-row(selected     focus)");
+    test_parseable("::-moz-tree-row(selected    ,   focus)");
+    test_parseable("::-moz-tree-twisty(  hover open  )");
+    test_balanced_unparseable("::-moz-tree-row(selected {[]} )");
+    test_balanced_unparseable(":-moz-tree-twisty(open())");
+    test_balanced_unparseable("::-moz-tree-twisty(hover ())");
+
     run_deferred_tests();
 }
 
 var deferred_tests = [];
 
 function defer_clonedoc_tests(docurl, onloadfunc)
 {
     deferred_tests.push( { docurl: docurl, onloadfunc: onloadfunc } );
