From: L. David Baron <dbaron@dbaron.org>

Bug 980770 - Enable off-main-thread animations on all platforms other than Mac OS X with off-main-thread compositing, for nightly/aurora.  r=birtles

diff --git a/dom/animation/test/mochitest.ini b/dom/animation/test/mochitest.ini
--- a/dom/animation/test/mochitest.ini
+++ b/dom/animation/test/mochitest.ini
@@ -20,8 +20,9 @@ skip-if = buildapp == 'mulet'
 [css-transitions/test_animation-pausing.html]
 [css-transitions/test_animation-player-currenttime.html]
 [css-transitions/test_animation-player-ready.html]
 [css-transitions/test_animation-target.html]
 [css-transitions/test_animation-player-starttime.html]
 [css-transitions/test_element-get-animation-players.html]
 skip-if = buildapp == 'mulet'
 [mozilla/test_deferred_start.html]
+skip-if = os == 'linux' && e10s && buildapp == 'browser' # bug 1150351
diff --git a/modules/libpref/init/all.js b/modules/libpref/init/all.js
--- a/modules/libpref/init/all.js
+++ b/modules/libpref/init/all.js
@@ -4046,17 +4046,25 @@ pref("layers.offmainthreadcomposition.en
 // same effect as layers.offmainthreadcomposition.enabled, but specifically for
 // use with tests.
 pref("layers.offmainthreadcomposition.testing.enabled", false);
 
 // whether to allow use of the basic compositor
 pref("layers.offmainthreadcomposition.force-basic", false);
 
 // Whether to animate simple opacity and transforms on the compositor
+#ifdef RELEASE_BUILD
 pref("layers.offmainthreadcomposition.async-animations", false);
+#else
+#if defined(XP_MACOSX)
+pref("layers.offmainthreadcomposition.async-animations", false);
+#else
+pref("layers.offmainthreadcomposition.async-animations", true);
+#endif
+#endif
 
 // Whether to log information about off main thread animations to stderr
 pref("layers.offmainthreadcomposition.log-animations", false);
 
 pref("layers.bufferrotation.enabled", true);
 
 pref("layers.componentalpha.enabled", true);
 
