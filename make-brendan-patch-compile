Compilation fixes for brendan-trace-malloc-code-duplication.

diff --git a/tools/trace-malloc/lib/nsTraceMalloc.c b/tools/trace-malloc/lib/nsTraceMalloc.c
--- a/tools/trace-malloc/lib/nsTraceMalloc.c
+++ b/tools/trace-malloc/lib/nsTraceMalloc.c
@@ -80,7 +80,7 @@
 
 #elif defined(XP_UNIX)
 
-#include <malloc/malloc.h>
+#include <malloc.h>
 
 #define WRITE_FLAGS "w"
 
@@ -90,6 +90,7 @@ extern __ptr_t __libc_malloc(size_t);
 extern __ptr_t __libc_malloc(size_t);
 extern __ptr_t __libc_realloc(__ptr_t, size_t);
 extern void    __libc_free(__ptr_t);
+extern __ptr_t __libc_memalign(size_t, size_t);
 #ifdef WRAP_SYSTEM_INCLUDES
 #pragma GCC visibility pop
 #endif
diff --git a/tools/trace-malloc/lib/nsTraceMallocCallbacks.h b/tools/trace-malloc/lib/nsTraceMallocCallbacks.h
--- a/tools/trace-malloc/lib/nsTraceMallocCallbacks.h
+++ b/tools/trace-malloc/lib/nsTraceMallocCallbacks.h
@@ -69,13 +69,11 @@ struct tm_thread {
 /* implemented in nsTraceMalloc.c */
 tm_thread * tm_get_thread(void);
 
-#if defined(XP_WIN32) || defined(XP_MACOSX)
 /* implemented in nsTraceMalloc.c */
 PR_EXTERN(void) MallocCallback(void *aPtr, size_t aSize, PRUint32 start, PRUint32 end, tm_thread *t);
 PR_EXTERN(void) CallocCallback(void *aPtr, size_t aCount, size_t aSize, PRUint32 start, PRUint32 end, tm_thread *t);
 PR_EXTERN(void) ReallocCallback(void *aPin, void* aPout, size_t aSize, PRUint32 start, PRUint32 end, tm_thread *t);
 PR_EXTERN(void) FreeCallback(void *aPtr, PRUint32 start, PRUint32 end, tm_thread *t);
-#endif
 
 #ifdef XP_WIN32
 /* implemented in nsTraceMalloc.c */
