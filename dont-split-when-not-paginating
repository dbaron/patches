From: L. David Baron <dbaron@dbaron.org>

Don't split floats when we're not paginating.  (Bug 563584)  Fixes assertion on layout/generic/crashtests/461294-1.html .

diff --git a/layout/generic/nsBlockReflowState.cpp b/layout/generic/nsBlockReflowState.cpp
--- a/layout/generic/nsBlockReflowState.cpp
+++ b/layout/generic/nsBlockReflowState.cpp
@@ -712,17 +712,18 @@ nsBlockReflowState::FlowAndPlaceFloat(ns
   NS_ASSERTION((NS_STYLE_FLOAT_LEFT == floatDisplay->mFloats) ||
 	       (NS_STYLE_FLOAT_RIGHT == floatDisplay->mFloats),
 	       "invalid float type");
 
   // Can the float fit here?
   PRBool keepFloatOnSameLine = PR_FALSE;
 
   for (;;) {
-    if (floatAvailableSpace.mRect.height <= 0) {
+    if (mReflowState.availableHeight != NS_UNCONSTRAINEDSIZE &&
+        floatAvailableSpace.mRect.height <= 0) {
       // No space, nowhere to put anything.
       PushFloatPastBreak(aFloat);
       return PR_FALSE;
     }
 
     if (CanPlaceFloat(floatMarginWidth, floatAvailableSpace)) {
       // We found an appropriate place.
       break;
