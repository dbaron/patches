Distribute height to rows even if the rows in question are all zero-height (in which case, distribute it equally).  b=403656, 377711

diff --git a/layout/tables/nsTableFrame.cpp b/layout/tables/nsTableFrame.cpp
--- a/layout/tables/nsTableFrame.cpp
+++ b/layout/tables/nsTableFrame.cpp
@@ -3271,20 +3271,23 @@ nsTableFrame::DistributeHeightToRows(con
   // accumulate the correct divisor. This will be the total of all unstyled rows inside 
   // unstyled row groups, unless there are none, in which case, it will be all rows
   nscoord divisor = 0;
+  PRUint32 rowCount = 0;
   for (rgX = 0; rgX < rowGroups.Length(); rgX++) {
     nsTableRowGroupFrame* rgFrame = rowGroups[rgX];
     if (!firstUnStyledRG || !rgFrame->HasStyleHeight()) {
       nsTableRowFrame* rowFrame = rgFrame->GetFirstRow();
       while (rowFrame) {
         if (!firstUnStyledRG || !rowFrame->HasStyleHeight()) {
+          NS_ASSERTION(rowFrame->GetSize().height >= 0, "negative height");
           divisor += rowFrame->GetSize().height;
+          ++rowCount;
           lastElligibleRow = rowFrame;
         }
         rowFrame = rowFrame->GetNextRow();
       }
     }
   }
-  if (divisor <= 0) {
+  if (divisor < 0) {
     NS_ERROR("invalid divisor");
     return;
   }
@@ -3306,7 +3309,12 @@ nsTableFrame::DistributeHeightToRows(con
         // see if there is an eligible row
         if (!firstUnStyledRow || !rowFrame->HasStyleHeight()) {
           // The amount of additional space each row gets is proportional to its height
-          float percent = rowRect.height / ((float)divisor);
+          float percent;
+          if (divisor != 0) {
+            percent = rowRect.height / ((float)divisor);
+          } else {
+            percent = 1.0f / float(rowCount);
+          }
           // give rows their percentage, except for the last row which gets the remainder
           nscoord amountForRow = (rowFrame == lastElligibleRow) 
                                  ? aAmount - amountUsed : NSToCoordRound(((float)(pctBasis)) * percent);
