From: L. David Baron <dbaron@dbaron.org>

Bug 1189598 patch 3 - Animation collections with mNeedsRefreshes false should not restyle during the animation-only style update.

diff --git a/dom/animation/EffectCompositor.cpp b/dom/animation/EffectCompositor.cpp
--- a/dom/animation/EffectCompositor.cpp
+++ b/dom/animation/EffectCompositor.cpp
@@ -365,16 +365,23 @@ EffectCompositor::AddStyleUpdatesTo(Rest
     nsTArray<PseudoElementHashKey> elementsToRestyle(elementSet.Count());
     for (auto iter = elementSet.Iter(); !iter.Done(); iter.Next()) {
       elementsToRestyle.AppendElement(iter.Key());
     }
 
     for (auto& pseudoElem : elementsToRestyle) {
       MaybeUpdateCascadeResults(pseudoElem.mElement, pseudoElem.mPseudoType);
 
+#if 0
+      // FIXME: REWRITE THIS!
+      if (!collection->mStyleChanging) {
+        continue;
+      }
+#endif
+
       ComposeAnimationRule(pseudoElem.mElement,
                            pseudoElem.mPseudoType,
                            cascadeLevel,
                            mPresContext->RefreshDriver()->MostRecentRefresh());
 
       dom::Element* elementToRestyle =
         GetElementToRestyle(pseudoElem.mElement, pseudoElem.mPseudoType);
       if (elementToRestyle) {
