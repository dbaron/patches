From: L. David Baron <dbaron@dbaron.org>

Bug 977991 patch 7 - Use the faster eRestyle_SVGAttrAnimations hint from bug 1058346 for SMIL-animated SVG attribute changes.

This couldn't be done in bug 1058346 because it depends on patch 5 in this bug.

diff --git a/content/svg/content/src/nsSVGElement.cpp b/content/svg/content/src/nsSVGElement.cpp
--- a/content/svg/content/src/nsSVGElement.cpp
+++ b/content/svg/content/src/nsSVGElement.cpp
@@ -920,17 +920,18 @@ nsSVGElement::WalkAnimatedContentStyleRu
   nsIPresShell* shell = doc->GetShell();
   nsPresContext* context = shell ? shell->GetPresContext() : nullptr;
   if (context && context->IsProcessingRestyles() &&
       !context->IsProcessingAnimationStyleChange()) {
     // Any style changes right now could trigger CSS Transitions. We don't
     // want that to happen from SMIL-animated value of mapped attrs, so
     // ignore animated value for now, and request an animation restyle to
     // get our animated value noticed.
-    shell->RestyleForAnimation(this, eRestyle_Self);
+    shell->RestyleForAnimation(this,
+      eRestyle_SVGAttrAnimations | eRestyle_ChangeAnimationPhase);
   } else {
     // Ok, this is an animation restyle -- go ahead and update/walk the
     // animated content style rule.
     css::StyleRule* animContentStyleRule = GetAnimatedContentStyleRule();
     if (!animContentStyleRule) {
       UpdateAnimatedContentStyleRule();
       animContentStyleRule = GetAnimatedContentStyleRule();
     }
