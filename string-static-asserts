From: L. David Baron <dbaron@dbaron.org>

Add PR_STATIC_ASSERTs to check some assumptions.  (Bug 584945)  r=bsmedberg  a2.0=debug-only

diff --git a/xpcom/string/public/nsString.h b/xpcom/string/public/nsString.h
--- a/xpcom/string/public/nsString.h
+++ b/xpcom/string/public/nsString.h
@@ -74,16 +74,19 @@
 #include "nsTString.h"
 #include "string-template-undef.h"
 
   // declare nsCString, et. al.
 #include "string-template-def-char.h"
 #include "nsTString.h"
 #include "string-template-undef.h"
 
+PR_STATIC_ASSERT(sizeof(PRUnichar) == 2);
+PR_STATIC_ASSERT(sizeof(nsString::char_type) == 2);
+PR_STATIC_ASSERT(sizeof(nsCString::char_type) == 1);
 
   /**
    * A helper class that converts a UTF-16 string to ASCII in a lossy manner
    */
 class NS_LossyConvertUTF16toASCII : public nsCAutoString
   {
     public:
       explicit
