From: L. David Baron <dbaron@dbaron.org>

Add PR_STATIC_ASSERTs to check some assumptions.  (Originally mentioned in bug 508905.)

diff --git a/xpcom/string/src/nsString.cpp b/xpcom/string/src/nsString.cpp
--- a/xpcom/string/src/nsString.cpp
+++ b/xpcom/string/src/nsString.cpp
@@ -42,8 +42,12 @@
 #include "string-template-def-unichar.h"
 #include "nsTString.cpp"
 #include "string-template-undef.h"
 
   // define nsCString
 #include "string-template-def-char.h"
 #include "nsTString.cpp"
 #include "string-template-undef.h"
+
+PR_STATIC_ASSERT(sizeof(PRUnichar) == 2)
+PR_STATIC_ASSERT(sizeof(nsString::char_type) == 2)
+PR_STATIC_ASSERT(sizeof(nsCString::char_type) == 1)
