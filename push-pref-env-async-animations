From: L. David Baron <dbaron@dbaron.org>

Bug 972199 followup - use pushPrefEnv rather than setBoolPref so that all later crashtests aren't affected by the pref change.

diff --git a/layout/style/crashtests/972199-1.html b/layout/style/crashtests/972199-1.html
--- a/layout/style/crashtests/972199-1.html
+++ b/layout/style/crashtests/972199-1.html
@@ -12,28 +12,28 @@
       background-color: white;
     }
   </style>
 </head>
 <body>
 <div></div>
 <script type="application/javascript">
 
-SpecialPowers.setBoolPref("layers.offmainthreadcomposition.async-animations",
-                          true);
 window.addEventListener("load", function() {
-  document.querySelector("div").setAttribute("style",
-    "animation: 100s 300s anim linear");
-  advance_clock(200000);
-  advance_clock(300000);
+  SpecialPowers.pushPrefEnv({"set": [["layers.offmainthreadcomposition.async-animations", true]]}, function() {
+    document.querySelector("div").setAttribute("style",
+      "animation: 100s 300s anim linear");
+    advance_clock(200000);
+    advance_clock(300000);
 
-  Promise.resolve().then(function() {
-    SpecialPowers.DOMWindowUtils.restoreNormalRefresh();
-  }).then(function() {
-    document.documentElement.className = "";
+    Promise.resolve().then(function() {
+      SpecialPowers.DOMWindowUtils.restoreNormalRefresh();
+    }).then(function() {
+      document.documentElement.className = "";
+    });
   });
 });
 
 function advance_clock(milliseconds) {
   SpecialPowers.DOMWindowUtils.advanceTimeAndRefresh(milliseconds);
 }
 </script>
 </html>
