Add pixel rounding reftests for rounded backgrounds (currently broken due to at least bug 353860), initially marked as random so I can see how we're doing before marking.

diff --git a/layout/reftests/pixel-rounding/reftest.list b/layout/reftests/pixel-rounding/reftest.list
--- a/layout/reftests/pixel-rounding/reftest.list
+++ b/layout/reftests/pixel-rounding/reftest.list
@@ -142,3 +142,34 @@ random == offscreen-image-size-4.html of
 random == offscreen-image-size-4.html offscreen-0-ref.html # bug 371316
 random == offscreen-image-size-5.html offscreen-10-ref.html # bug 371316
 random == offscreen-image-size-6.html offscreen-10-ref.html # bug 371316
+
+
+# Many of these should fail due to bug 353860.
+random != rounded-background-color-base.html rounded-background-color-height-10-ref.html
+random == rounded-background-color-height-4.html rounded-background-color-base.html
+random == rounded-background-color-height-5.html rounded-background-color-height-10-ref.html
+random == rounded-background-color-height-6.html rounded-background-color-height-10-ref.html
+random != rounded-background-color-base.html rounded-background-color-top-10-ref.html
+random == rounded-background-color-top-4.html rounded-background-color-base.html
+random == rounded-background-color-top-5.html rounded-background-color-top-10-ref.html
+random == rounded-background-color-top-6.html rounded-background-color-top-10-ref.html
+random != rounded-background-color-base.html rounded-background-color-width-10-ref.html
+random == rounded-background-color-width-4.html rounded-background-color-base.html
+random == rounded-background-color-width-5.html rounded-background-color-width-10-ref.html
+random == rounded-background-color-width-6.html rounded-background-color-width-10-ref.html
+random != rounded-background-color-base.html rounded-background-color-left-10-ref.html
+random == rounded-background-color-left-4.html rounded-background-color-base.html
+random == rounded-background-color-left-5.html rounded-background-color-left-10-ref.html
+random == rounded-background-color-left-6.html rounded-background-color-left-10-ref.html
+random == rounded-background-color-top-height-4.html rounded-background-color-height-4.html
+random == rounded-background-color-top-height-5.html rounded-background-color-height-5.html
+random == rounded-background-color-top-height-6.html rounded-background-color-height-6.html
+random == rounded-background-color-left-width-4.html rounded-background-color-width-4.html
+random == rounded-background-color-left-width-5.html rounded-background-color-width-5.html
+random == rounded-background-color-left-width-6.html rounded-background-color-width-6.html
+random == rounded-background-color-height-top-4.html rounded-background-color-height-4.html
+random == rounded-background-color-height-top-5.html rounded-background-color-height-5.html
+random == rounded-background-color-height-top-6.html rounded-background-color-height-6.html
+random == rounded-background-color-width-left-4.html rounded-background-color-width-4.html
+random == rounded-background-color-width-left-5.html rounded-background-color-width-5.html
+random == rounded-background-color-width-left-6.html rounded-background-color-width-6.html
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-base-ref.html b/layout/reftests/pixel-rounding/rounded-background-color-base-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-base-ref.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0; height: 10px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-height-10-ref.html b/layout/reftests/pixel-rounding/rounded-background-color-height-10-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-height-10-ref.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0; height: 11px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-height-4.html b/layout/reftests/pixel-rounding/rounded-background-color-height-4.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-height-4.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0; height: 10.4px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-height-5.html b/layout/reftests/pixel-rounding/rounded-background-color-height-5.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-height-5.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0; height: 10.5px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-height-6.html b/layout/reftests/pixel-rounding/rounded-background-color-height-6.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-height-6.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0; height: 10.6px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-height-top-4.html b/layout/reftests/pixel-rounding/rounded-background-color-height-top-4.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-height-top-4.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: -0.1px; left: 0; height: 10.5px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 19.9px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-height-top-5.html b/layout/reftests/pixel-rounding/rounded-background-color-height-top-5.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-height-top-5.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0px; left: 0; height: 10.5px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-height-top-6.html b/layout/reftests/pixel-rounding/rounded-background-color-height-top-6.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-height-top-6.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0.1px; left: 0; height: 10.5px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20.1px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-left-10-ref.html b/layout/reftests/pixel-rounding/rounded-background-color-left-10-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-left-10-ref.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 1px; height: 10px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 21px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-left-4.html b/layout/reftests/pixel-rounding/rounded-background-color-left-4.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-left-4.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0.4px; height: 10px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20.4px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-left-5.html b/layout/reftests/pixel-rounding/rounded-background-color-left-5.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-left-5.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0.5px; height: 10px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20.5px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-left-6.html b/layout/reftests/pixel-rounding/rounded-background-color-left-6.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-left-6.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0.6px; height: 10px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20.6px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-left-width-4.html b/layout/reftests/pixel-rounding/rounded-background-color-left-width-4.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-left-width-4.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: -0.5px; height: 10px; width: 10.9px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 19.5px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-left-width-5.html b/layout/reftests/pixel-rounding/rounded-background-color-left-width-5.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-left-width-5.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: -0.5px; height: 10px; width: 11px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 19.5px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-left-width-6.html b/layout/reftests/pixel-rounding/rounded-background-color-left-width-6.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-left-width-6.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: -0.5px; height: 10px; width: 11.1px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 19.5px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-top-10-ref.html b/layout/reftests/pixel-rounding/rounded-background-color-top-10-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-top-10-ref.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 1px; left: 0; height: 10px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 21px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-top-4.html b/layout/reftests/pixel-rounding/rounded-background-color-top-4.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-top-4.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0.4px; left: 0; height: 10px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20.4px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-top-5.html b/layout/reftests/pixel-rounding/rounded-background-color-top-5.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-top-5.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0.5px; left: 0; height: 10px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20.5px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-top-6.html b/layout/reftests/pixel-rounding/rounded-background-color-top-6.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-top-6.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0.6px; left: 0; height: 10px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20.6px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-top-height-4.html b/layout/reftests/pixel-rounding/rounded-background-color-top-height-4.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-top-height-4.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: -0.5px; left: 0; height: 10.9px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 19.5px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-top-height-5.html b/layout/reftests/pixel-rounding/rounded-background-color-top-height-5.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-top-height-5.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: -0.5px; left: 0; height: 11px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 19.5px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-top-height-6.html b/layout/reftests/pixel-rounding/rounded-background-color-top-height-6.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-top-height-6.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: -0.5px; left: 0; height: 11.1px; width: 10px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 19.5px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-width-10-ref.html b/layout/reftests/pixel-rounding/rounded-background-color-width-10-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-width-10-ref.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0; height: 10px; width: 11px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-width-4.html b/layout/reftests/pixel-rounding/rounded-background-color-width-4.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-width-4.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0; height: 10px; width: 10.4px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-width-5.html b/layout/reftests/pixel-rounding/rounded-background-color-width-5.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-width-5.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0; height: 10px; width: 10.5px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-width-6.html b/layout/reftests/pixel-rounding/rounded-background-color-width-6.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-width-6.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0; height: 10px; width: 10.6px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-width-left-4.html b/layout/reftests/pixel-rounding/rounded-background-color-width-left-4.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-width-left-4.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: -0.1px; height: 10px; width: 10.5px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 19.9px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-width-left-5.html b/layout/reftests/pixel-rounding/rounded-background-color-width-left-5.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-width-left-5.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0px; height: 10px; width: 10.5px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
diff --git a/layout/reftests/pixel-rounding/rounded-background-color-width-left-6.html b/layout/reftests/pixel-rounding/rounded-background-color-width-left-6.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/pixel-rounding/rounded-background-color-width-left-6.html
@@ -0,0 +1,74 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Pixel rounding testcase</title>
+<style type="text/css">
+
+html, body { margin: 0; border: none; padding: 0; }
+
+body > div { margin: 10px; height: 80px; position: relative; }
+
+body > div > div {
+    position: absolute; top: 0; left: 0.1px; height: 10px; width: 10.5px;
+}
+
+body > div > div { background: green; }
+
+.tl { top: 20px; }
+.tr { margin-top: 40px; }
+.bl { left: 20.1px; }
+.br { margin-left: 40px; }
+
+div.one > div.tl { -moz-border-radius-topleft: 1px; }
+div.one > div.tr { -moz-border-radius-topright: 1px; }
+div.one > div.bl { -moz-border-radius-bottomleft: 1px; }
+div.one > div.br { -moz-border-radius-bottomright: 1px; }
+div.four > div.tl { -moz-border-radius-topleft: 4px; }
+div.four > div.tr { -moz-border-radius-topright: 4px; }
+div.four > div.bl { -moz-border-radius-bottomleft: 4px; }
+div.four > div.br { -moz-border-radius-bottomright: 4px; }
+
+</style>
+</head>
+<body>
+
+<div class="one">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+<div class="four">
+<div></div>
+<div class="tl"></div>
+<div class="tr"></div>
+<div class="bl"></div>
+<div class="br"></div>
+<div class="tl tr"></div>
+<div class="tl bl"></div>
+<div class="tl br"></div>
+<div class="tr bl"></div>
+<div class="tr br"></div>
+<div class="bl br"></div>
+<div class="tl tr bl"></div>
+<div class="tl tr br"></div>
+<div class="tl bl br"></div>
+<div class="tr bl br"></div>
+<div class="tl tr bl br"></div>
+</div>
+
+</body>
+</html>
