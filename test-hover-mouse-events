From: L. David Baron <dbaron@dbaron.org>

Make test_hover disable non-test mouse events to avoid random failures.  (Bug 493359)

diff --git a/layout/style/test/test_hover.html b/layout/style/test/test_hover.html
--- a/layout/style/test/test_hover.html
+++ b/layout/style/test/test_hover.html
@@ -34,16 +34,17 @@
     <div style="width: 5000px; height: 10px;"></div>
   </div>
 
 </div>
 <pre id="test">
 <script type="application/javascript">
 
 SimpleTest.waitForExplicitFinish();
+disableNonTestMouseEvents(true);
 var div = document.getElementById("display");
 var divtwo = document.getElementById("two");
 var iframe = document.getElementById("twoi");
 var divtwoparent = document.getElementById("twoparent");
 
 iframe.contentDocument.open();
 iframe.contentDocument.write("<style type='text/css'>html, body { margin: 0; padding: 0; }<\/style><body>");
 iframe.contentDocument.close();
@@ -265,15 +266,16 @@ function step16() {
     step16called = true;
     is(getComputedStyle(divtwo, "").backgroundColor, "transparent",
        ":hover does not apply");
     setTimeout(finish, 500); // time to detect oscillations if they exist
 }
 
 function finish() {
     document.getElementById("display").style.display = "none";
+    disableNonTestMouseEvents(false);
     SimpleTest.finish();
 }
 
 </script>
 </pre>
 </body>
 </html>
