From: L. David Baron <dbaron@dbaron.org>

Compute maxDescent from height and ascender instead of from descender to avoid accumulation of rounding up.  (Bug 604836)

diff --git a/gfx/thebes/gfxFT2Utils.cpp b/gfx/thebes/gfxFT2Utils.cpp
--- a/gfx/thebes/gfxFT2Utils.cpp
+++ b/gfx/thebes/gfxFT2Utils.cpp
@@ -132,17 +132,20 @@ gfxFT2LockedFace::GetMetrics(gfxFont::Me
         emHeight = ftMetrics.y_ppem;
         yScale = emHeight / emUnit;
     }
 
     TT_OS2 *os2 =
         static_cast<TT_OS2*>(FT_Get_Sfnt_Table(mFace, ft_sfnt_os2));
 
     aMetrics->maxAscent = FLOAT_FROM_26_6(ftMetrics.ascender);
-    aMetrics->maxDescent = -FLOAT_FROM_26_6(ftMetrics.descender);
+    // It's more important to us that maxAscent + maxDescent be the
+    // correct height than that either be precisely accurate, so compute
+    // maxDescent from height and ascender rather than descender.
+    aMetrics->maxDescent = FLOAT_FROM_26_6(ftMetrics.height) - aMetrics->maxAscent;
     aMetrics->maxAdvance = FLOAT_FROM_26_6(ftMetrics.max_advance);
 
     gfxFloat lineHeight;
     if (os2 && os2->sTypoAscender) {
         aMetrics->emAscent = os2->sTypoAscender * yScale;
         aMetrics->emDescent = -os2->sTypoDescender * yScale;
         FT_Short typoHeight =
             os2->sTypoAscender - os2->sTypoDescender + os2->sTypoLineGap;
