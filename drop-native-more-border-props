From: L. David Baron <dbaron@dbaron.org>

Drop native appearance when border-radius or -moz-border-start/end are set.  (Bug 601366)  r=bzbarsky  a2.0=blocking2.0:betaN

diff --git a/layout/reftests/native-theme/text-input-nonnative-when-styled-ref.html b/layout/reftests/native-theme/text-input-nonnative-when-styled-ref.html
--- a/layout/reftests/native-theme/text-input-nonnative-when-styled-ref.html
+++ b/layout/reftests/native-theme/text-input-nonnative-when-styled-ref.html
@@ -6,12 +6,18 @@
 <input type="text" value="Text Input" style="-moz-appearance: none; border-width: 3px">
 <input type="text" value="Text Input" style="-moz-appearance: none; border-width: 4px">
 <input type="text" value="Text Input" style="-moz-appearance: none; border-width: 5px">
 <input type="text" value="Text Input" style="-moz-appearance: none; border-width: 6px">
 <input type="text" value="Text Input" style="-moz-appearance: none; border-style: dotted">
 <input type="text" value="Text Input" style="-moz-appearance: none; border-color: green">
 <input type="text" value="Text Input" style="-moz-appearance: none; background-color: transparent">
 <input type="text" value="Text Input" style="-moz-appearance: none; background-color: white">
+<input type="text" value="Text Input" style="-moz-appearance: none; border-top-left-radius: 0px">
+<input type="text" value="Text Input" style="-moz-appearance: none; border-top-right-radius: 1px">
+<input type="text" value="Text Input" style="-moz-appearance: none; border-bottom-right-radius: 2px">
+<input type="text" value="Text Input" style="-moz-appearance: none; border-bottom-left-radius: 3px">
+<input type="text" value="Text Input" style="-moz-appearance: none; -moz-border-start-width: 3px">
+<input type="text" value="Text Input" style="-moz-appearance: none; -moz-border-end-width: 3px">
 
 <!-- these should let it stay native -->
 <input type="text" value="">
 <input type="text" value="">
diff --git a/layout/reftests/native-theme/text-input-nonnative-when-styled.html b/layout/reftests/native-theme/text-input-nonnative-when-styled.html
--- a/layout/reftests/native-theme/text-input-nonnative-when-styled.html
+++ b/layout/reftests/native-theme/text-input-nonnative-when-styled.html
@@ -6,12 +6,18 @@
 <input type="text" value="Text Input" style="border-width: 3px">
 <input type="text" value="Text Input" style="border-width: 4px">
 <input type="text" value="Text Input" style="border-width: 5px">
 <input type="text" value="Text Input" style="border-width: 6px">
 <input type="text" value="Text Input" style="border-style: dotted">
 <input type="text" value="Text Input" style="border-color: green">
 <input type="text" value="Text Input" style="background-color: transparent">
 <input type="text" value="Text Input" style="background-color: white">
+<input type="text" value="Text Input" style="border-top-left-radius: 0px">
+<input type="text" value="Text Input" style="border-top-right-radius: 1px">
+<input type="text" value="Text Input" style="border-bottom-right-radius: 2px">
+<input type="text" value="Text Input" style="border-bottom-left-radius: 3px">
+<input type="text" value="Text Input" style="-moz-border-start-width: 3px">
+<input type="text" value="Text Input" style="-moz-border-end-width: 3px">
 
 <!-- these should let it stay native -->
 <input type="text" value="" style="color: black">
 <input type="text" value="" style="font-weight: normal">
diff --git a/layout/style/nsRuleNode.cpp b/layout/style/nsRuleNode.cpp
--- a/layout/style/nsRuleNode.cpp
+++ b/layout/style/nsRuleNode.cpp
@@ -6640,18 +6640,27 @@ nsRuleNode::HasAuthorSpecifiedRules(nsSt
     &marginData.mBorderColor.mRight,
     &marginData.mBorderStyle.mRight,
     &marginData.mBorderWidth.mRight,
     &marginData.mBorderColor.mBottom,
     &marginData.mBorderStyle.mBottom,
     &marginData.mBorderWidth.mBottom,
     &marginData.mBorderColor.mLeft,
     &marginData.mBorderStyle.mLeft,
-    &marginData.mBorderWidth.mLeft
-    // XXX add &marginData.mBorder{Start,End}{Width,Color,Style}
+    &marginData.mBorderWidth.mLeft,
+    &marginData.mBorderStartColor,
+    &marginData.mBorderStartStyle,
+    &marginData.mBorderStartWidth,
+    &marginData.mBorderEndColor,
+    &marginData.mBorderEndStyle,
+    &marginData.mBorderEndWidth,
+    &marginData.mBorderRadius.mTopLeft,
+    &marginData.mBorderRadius.mTopRight,
+    &marginData.mBorderRadius.mBottomRight,
+    &marginData.mBorderRadius.mBottomLeft
   };
 
   nsCSSValue* paddingValues[] = {
     &marginData.mPadding.mTop,
     &marginData.mPadding.mRight,
     &marginData.mPadding.mBottom,
     &marginData.mPadding.mLeft,
     &marginData.mPaddingStart,
