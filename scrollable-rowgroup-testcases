Add testcases to ensure that we don't regress dynamic changes on tables with scrollable rowgroups.  b=386401

diff --git a/layout/reftests/bugs/386401-1-ref.html b/layout/reftests/bugs/386401-1-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/386401-1-ref.html
@@ -0,0 +1,31 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
+  "http://www.w3.org/TR/html4/strict.dtd">
+<html lang="en-US">
+<head>
+  <title>Testcase, bug 386401</title>
+  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
+  <meta http-equiv="Content-Style-Type" content="text/css">
+  <style type="text/css">
+
+  table { border-spacing: 2px; width: 30em; }
+  td { border: 1px solid; padding: 2px; }
+  tbody { overflow: scroll; }
+
+  </style>
+</head>
+<body onload="run()">
+
+<table>
+  <thead><tr><td>Header</td><td id="grow">A really big header.</td><td>Header</td></tr></thead>
+  <tfoot><tr><td>Footer</td><td>Footer</td><td>Footer</td></tr></tfoot>
+  <tbody>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+  </tbody>
+</table>
+
+</body>
+</html>
diff --git a/layout/reftests/bugs/386401-1.html b/layout/reftests/bugs/386401-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/386401-1.html
@@ -0,0 +1,45 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
+  "http://www.w3.org/TR/html4/strict.dtd">
+<html lang="en-US" class="reftest-wait">
+<head>
+  <title>Testcase, bug 386401</title>
+  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
+  <meta http-equiv="Content-Style-Type" content="text/css">
+  <meta http-equiv="Content-Script-Type" content="text/javascript">
+  <style type="text/css">
+
+  table { border-spacing: 2px; width: 30em; }
+  td { border: 1px solid; padding: 2px; }
+  tbody { overflow: scroll; }
+
+  </style>
+  <script type="text/javascript">
+
+  function run() {
+    setTimeout(run2, 0);
+  }
+
+  function run2() {
+    var t = document.getElementById("grow").firstChild;
+    t.data = "A really big header.";
+    document.documentElement.className = "";
+  }
+
+  </script>
+</head>
+<body onload="run()">
+
+<table>
+  <thead><tr><td>Header</td><td id="grow">Header</td><td>Header</td></tr></thead>
+  <tfoot><tr><td>Footer</td><td>Footer</td><td>Footer</td></tr></tfoot>
+  <tbody>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+  </tbody>
+</table>
+
+</body>
+</html>
diff --git a/layout/reftests/bugs/386401-2-ref.html b/layout/reftests/bugs/386401-2-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/386401-2-ref.html
@@ -0,0 +1,32 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
+  "http://www.w3.org/TR/html4/strict.dtd">
+<html lang="en-US">
+<head>
+  <title>Testcase, bug 386401</title>
+  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
+  <meta http-equiv="Content-Style-Type" content="text/css">
+  <meta http-equiv="Content-Script-Type" content="text/javascript">
+  <style type="text/css">
+
+  table { border-spacing: 2px; width: 30em; }
+  td { border: 1px solid; padding: 2px; }
+  tbody { overflow: scroll; }
+
+  </style>
+</head>
+<body onload="run()">
+
+<table>
+  <thead><tr><td>Header</td><td id="appendhere">Header</td><td>A really big header</td></tr></thead>
+  <tfoot><tr><td>Footer</td><td>Footer</td><td>Footer</td></tr></tfoot>
+  <tbody>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+  </tbody>
+</table>
+
+</body>
+</html>
diff --git a/layout/reftests/bugs/386401-2.html b/layout/reftests/bugs/386401-2.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/386401-2.html
@@ -0,0 +1,48 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
+  "http://www.w3.org/TR/html4/strict.dtd">
+<html lang="en-US" class="reftest-wait">
+<head>
+  <title>Testcase, bug 386401</title>
+  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
+  <meta http-equiv="Content-Style-Type" content="text/css">
+  <meta http-equiv="Content-Script-Type" content="text/javascript">
+  <style type="text/css">
+
+  table { border-spacing: 2px; width: 30em; }
+  td { border: 1px solid; padding: 2px; }
+  tbody { overflow: scroll; }
+
+  </style>
+  <script type="text/javascript">
+
+  function run() {
+    setTimeout(run2, 0);
+  }
+
+  function run2() {
+    var c = document.getElementById("appendhere");
+    var newc = document.createElement("td");
+    var t = document.createTextNode("A really big header");
+    newc.appendChild(t);
+    c.parentNode.appendChild(newc);
+    document.documentElement.className = "";
+  }
+
+  </script>
+</head>
+<body onload="run()">
+
+<table>
+  <thead><tr><td>Header</td><td id="appendhere">Header</td></tr></thead>
+  <tfoot><tr><td>Footer</td><td>Footer</td><td>Footer</td></tr></tfoot>
+  <tbody>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+  </tbody>
+</table>
+
+</body>
+</html>
diff --git a/layout/reftests/bugs/386401-3-ref.html b/layout/reftests/bugs/386401-3-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/386401-3-ref.html
@@ -0,0 +1,40 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
+  "http://www.w3.org/TR/html4/strict.dtd">
+<html lang="en-US">
+<head>
+  <title>Testcase, bug 386401</title>
+  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
+  <meta http-equiv="Content-Style-Type" content="text/css">
+  <meta http-equiv="Content-Script-Type" content="text/javascript">
+  <style type="text/css">
+
+  table#main { border-spacing: 2px; }
+  table#main td { border: 1px solid; padding: 2px; }
+  table#main tbody { overflow: scroll; }
+
+  </style>
+</head>
+<body onload="run()">
+
+<table id="outer"><tr>
+<td>
+
+<table id="main">
+  <thead><tr><td>Header</td><td>Header</td><td>A really big header</td></tr></thead>
+  <tfoot><tr><td>Footer</td><td>Footer</td><td>Footer</td></tr></tfoot>
+  <tbody>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+  </tbody>
+</table>
+
+</td>
+<td id="grow" style="width: 99%">
+</td>
+</table>
+
+</body>
+</html>
diff --git a/layout/reftests/bugs/386401-3.html b/layout/reftests/bugs/386401-3.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/386401-3.html
@@ -0,0 +1,53 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
+  "http://www.w3.org/TR/html4/strict.dtd">
+<html lang="en-US" class="reftest-wait">
+<head>
+  <title>Testcase, bug 386401</title>
+  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
+  <meta http-equiv="Content-Style-Type" content="text/css">
+  <meta http-equiv="Content-Script-Type" content="text/javascript">
+  <style type="text/css">
+
+  table#main { border-spacing: 2px; }
+  table#main td { border: 1px solid; padding: 2px; }
+  table#main tbody { overflow: scroll; }
+
+  </style>
+  <script type="text/javascript">
+
+  function run() {
+    setTimeout(run2, 0);
+  }
+
+  function run2() {
+    var c = document.getElementById("grow");
+    c.style.width="99%";
+    document.documentElement.className = "";
+  }
+
+  </script>
+</head>
+<body onload="run()">
+
+<table id="outer"><tr>
+<td>
+
+<table id="main">
+  <thead><tr><td>Header</td><td>Header</td><td>A really big header</td></tr></thead>
+  <tfoot><tr><td>Footer</td><td>Footer</td><td>Footer</td></tr></tfoot>
+  <tbody>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+    <tr><td>Cell</td><td>Cell</td><td>Cell</td></tr>
+  </tbody>
+</table>
+
+</td>
+<td id="grow">
+</td>
+</table>
+
+</body>
+</html>
diff --git a/layout/reftests/bugs/reftest.list b/layout/reftests/bugs/reftest.list
--- a/layout/reftests/bugs/reftest.list
+++ b/layout/reftests/bugs/reftest.list
@@ -384,6 +384,9 @@ fails == 386310-1b.html 386310-1-ref.htm
 fails == 386310-1b.html 386310-1-ref.html
 == 386310-1c.html 386310-1-ref.html
 fails == 386310-1d.html 386310-1-ref.html
+== 386401-1.html 386401-1-ref.html
+== 386401-2.html 386401-2-ref.html
+== 386401-3.html 386401-3-ref.html
 == 386470-1a.html 386470-1-ref.html
 == 386470-1b.html 386470-1-ref.html
 == 386470-1c.html 386470-1-ref.html
