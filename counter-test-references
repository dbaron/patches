Add <span>s so that we don't have different text frame separation between test and reference.

diff --git a/layout/reftests/counters/reftest.list b/layout/reftests/counters/reftest.list
--- a/layout/reftests/counters/reftest.list
+++ b/layout/reftests/counters/reftest.list
@@ -5,14 +5,14 @@ random == t1202-counter-02-b-test.html t
 == t1202-counter-04-b-test.html t1202-counter-04-b-reference.html
 == t1202-counter-05-b-test.html t1202-counter-05-b-reference.html
 == t1202-counter-06-b-test.html t1202-counter-06-b-reference.html
-random == t1202-counter-07-b-test.html t1202-counter-07-b-reference.html # font spacing issues
-random == t1202-counter-08-b-test.html t1202-counter-08-b-reference.html # font spacing issues
+== t1202-counter-07-b-test.html t1202-counter-07-b-reference.html
+== t1202-counter-08-b-test.html t1202-counter-08-b-reference.html
 == t1202-counter-09-b-test.html t1202-counter-09-b-reference.html
 random == t1202-counter-10-b-test.html t1202-counter-10-b-reference.html # actual failure, but we don't reliably draw missing glyph boxes
 == t1202-counter-11-b-test.html t1202-counter-11-b-reference.html
 == t1202-counter-12-b-test.html t1202-counter-12-b-reference.html
-random == t1202-counter-13-b-test.html t1202-counter-13-b-reference.html # font spacing issues
-random == t1202-counter-14-b-test.html t1202-counter-14-b-reference.html # font spacing issues
+== t1202-counter-13-b-test.html t1202-counter-13-b-reference.html
+== t1202-counter-14-b-test.html t1202-counter-14-b-reference.html
 == t1202-counter-15-b-test.html t1202-counter-15-b-reference.html
 == t1202-counter-16-f-test.html t1202-counter-16-f-reference.html
 == t1202-counters-00-b-test.html t1202-counters-00-b-reference.html
@@ -22,14 +22,14 @@ random == t1202-counter-14-b-test.html t
 == t1202-counters-04-b-test.html t1202-counters-04-b-reference.html
 == t1202-counters-05-b-test.html t1202-counters-05-b-reference.html
 == t1202-counters-06-b-test.html t1202-counters-06-b-reference.html
-random == t1202-counters-07-b-test.html t1202-counters-07-b-reference.html # font spacing issues
-random == t1202-counters-08-b-test.html t1202-counters-08-b-reference.html # font spacing issues
+== t1202-counters-07-b-test.html t1202-counters-07-b-reference.html
+== t1202-counters-08-b-test.html t1202-counters-08-b-reference.html
 == t1202-counters-09-b-test.html t1202-counters-09-b-reference.html
 random == t1202-counters-10-b-test.html t1202-counters-10-b-reference.html # actual failure, but we don't reliably draw missing glyph boxes
 == t1202-counters-11-b-test.html t1202-counters-11-b-reference.html
 == t1202-counters-12-b-test.html t1202-counters-12-b-reference.html
-random == t1202-counters-13-b-test.html t1202-counters-13-b-reference.html # font spacing issues
-random == t1202-counters-14-b-test.html t1202-counters-14-b-reference.html # font spacing issues
+== t1202-counters-13-b-test.html t1202-counters-13-b-reference.html
+== t1202-counters-14-b-test.html t1202-counters-14-b-reference.html
 == t1202-counters-15-b-test.html t1202-counters-15-b-reference.html
 == t1202-counters-16-c-test.html t1202-counters-16-c-reference.html
 == t1202-counters-17-d-test.html t1202-counters-17-d-reference.html
@@ -48,7 +48,7 @@ fails == t1204-reset-00-c-o-test.html t1
 == t1204-reset-01-c-o-test.html t1204-reset-01-c-o-reference.html
 == t1204-reset-02-c-o-test.html t1204-reset-02-c-o-reference.html
 == t1204-root-e-test.html t1204-root-e-reference.html
-random == t120401-scope-00-b-test.html t120401-scope-00-b-reference.html # font spacing issues
+== t120401-scope-00-b-test.html t120401-scope-00-b-reference.html
 == t120401-scope-01-c-test.html t120401-scope-01-c-reference.html
 == t120401-scope-02-c-test.html t120401-scope-02-c-reference.html
 == t120401-scope-03-c-test.html t120401-scope-03-c-reference.html
diff --git a/layout/reftests/counters/t1202-counter-00-b-reference.html b/layout/reftests/counters/t1202-counter-00-b-reference.html
--- a/layout/reftests/counters/t1202-counter-00-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-00-b-reference.html
@@ -10,19 +10,19 @@
  <body>
  
 <div>
-  1
-  2
-  3
-  4
-  5
-  6
-  7
-  8
-  9
-  10
-  11
-  12
+  <span>1</span>
+  <span>2</span>
+  <span>3</span>
+  <span>4</span>
+  <span>5</span>
+  <span>6</span>
+  <span>7</span>
+  <span>8</span>
+  <span>9</span>
+  <span>10</span>
+  <span>11</span>
+  <span>12</span>
 </div>
 
  </body>
-</html>
\ No newline at end of file
+</html>
diff --git a/layout/reftests/counters/t1202-counter-01-b-reference.html b/layout/reftests/counters/t1202-counter-01-b-reference.html
--- a/layout/reftests/counters/t1202-counter-01-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-01-b-reference.html
@@ -10,18 +10,18 @@
  <body>
 
  <div>
-   z
-   z
-   z
-   z
-   z
-   z
-   z
-   z
-   z
-   z
-   z
-   z
+   <span>z</span>
+   <span>z</span>
+   <span>z</span>
+   <span>z</span>
+   <span>z</span>
+   <span>z</span>
+   <span>z</span>
+   <span>z</span>
+   <span>z</span>
+   <span>z</span>
+   <span>z</span>
+   <span>z</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-02-b-reference.html b/layout/reftests/counters/t1202-counter-02-b-reference.html
--- a/layout/reftests/counters/t1202-counter-02-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-02-b-reference.html
@@ -8,18 +8,18 @@
   <style type="text/css">
 
  <div>
-   &#x2022;
-   &#x2022;
-   &#x2022;
-   &#x2022;
-   &#x2022;
-   &#x2022;
-   &#x2022;
-   &#x2022;
-   &#x2022;
-   &#x2022;
-   &#x2022;
-   &#x2022;
+   <span>&#x2022;</span>
+   <span>&#x2022;</span>
+   <span>&#x2022;</span>
+   <span>&#x2022;</span>
+   <span>&#x2022;</span>
+   <span>&#x2022;</span>
+   <span>&#x2022;</span>
+   <span>&#x2022;</span>
+   <span>&#x2022;</span>
+   <span>&#x2022;</span>
+   <span>&#x2022;</span>
+   <span>&#x2022;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-03-b-reference.html b/layout/reftests/counters/t1202-counter-03-b-reference.html
--- a/layout/reftests/counters/t1202-counter-03-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-03-b-reference.html
@@ -10,18 +10,18 @@
  <body>
 
  <div>
-   &#x25E6;
-   &#x25E6;
-   &#x25E6;
-   &#x25E6;
-   &#x25E6;
-   &#x25E6;
-   &#x25E6;
-   &#x25E6;
-   &#x25E6;
-   &#x25E6;
-   &#x25E6;
-   &#x25E6;
+   <span>&#x25E6;</span>
+   <span>&#x25E6;</span>
+   <span>&#x25E6;</span>
+   <span>&#x25E6;</span>
+   <span>&#x25E6;</span>
+   <span>&#x25E6;</span>
+   <span>&#x25E6;</span>
+   <span>&#x25E6;</span>
+   <span>&#x25E6;</span>
+   <span>&#x25E6;</span>
+   <span>&#x25E6;</span>
+   <span>&#x25E6;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-04-b-reference.html b/layout/reftests/counters/t1202-counter-04-b-reference.html
--- a/layout/reftests/counters/t1202-counter-04-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-04-b-reference.html
@@ -10,18 +10,18 @@
  <body>
 
  <div>
-   &#x25FE;
-   &#x25FE;
-   &#x25FE;
-   &#x25FE;
-   &#x25FE;
-   &#x25FE;
-   &#x25FE;
-   &#x25FE;
-   &#x25FE;
-   &#x25FE;
-   &#x25FE;
-   &#x25FE;
+   <span>&#x25FE;</span>
+   <span>&#x25FE;</span>
+   <span>&#x25FE;</span>
+   <span>&#x25FE;</span>
+   <span>&#x25FE;</span>
+   <span>&#x25FE;</span>
+   <span>&#x25FE;</span>
+   <span>&#x25FE;</span>
+   <span>&#x25FE;</span>
+   <span>&#x25FE;</span>
+   <span>&#x25FE;</span>
+   <span>&#x25FE;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-05-b-reference.html b/layout/reftests/counters/t1202-counter-05-b-reference.html
--- a/layout/reftests/counters/t1202-counter-05-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-05-b-reference.html
@@ -10,18 +10,18 @@
  <body>
 
  <div>
-   1
-   2
-   3
-   4
-   5
-   6
-   7
-   8
-   9
-   10
-   11
-   12
+   <span>1</span>
+   <span>2</span>
+   <span>3</span>
+   <span>4</span>
+   <span>5</span>
+   <span>6</span>
+   <span>7</span>
+   <span>8</span>
+   <span>9</span>
+   <span>10</span>
+   <span>11</span>
+   <span>12</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-06-b-reference.html b/layout/reftests/counters/t1202-counter-06-b-reference.html
--- a/layout/reftests/counters/t1202-counter-06-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-06-b-reference.html
@@ -11,21 +11,21 @@
  <body>
 
  <div>
-   01
-   02
-   03
-   04
-   05
-   06
-   07
-   08
-   09
-   10
-   11
-   12
-   99
-   100
-   101
+   <span>01</span>
+   <span>02</span>
+   <span>03</span>
+   <span>04</span>
+   <span>05</span>
+   <span>06</span>
+   <span>07</span>
+   <span>08</span>
+   <span>09</span>
+   <span>10</span>
+   <span>11</span>
+   <span>12</span>
+   <span>99</span>
+   <span>100</span>
+   <span>101</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-07-b-reference.html b/layout/reftests/counters/t1202-counter-07-b-reference.html
--- a/layout/reftests/counters/t1202-counter-07-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-07-b-reference.html
@@ -10,25 +10,25 @@
  <body>
 
  <div>
-   i
-   ii
-   iii
-   iv
-   v
-   vi
-   vii
-   viii
-   ix
-   x
-   xi
-   xii
-   xlix
-   l
-   ccclxxxix
-   cccxc
-   mmmcdlxxxix
-   mmmcdxc
-   mmmcdxci
+   <span>i</span>
+   <span>ii</span>
+   <span>iii</span>
+   <span>iv</span>
+   <span>v</span>
+   <span>vi</span>
+   <span>vii</span>
+   <span>viii</span>
+   <span>ix</span>
+   <span>x</span>
+   <span>xi</span>
+   <span>xii</span>
+   <span>xlix</span>
+   <span>l</span>
+   <span>ccclxxxix</span>
+   <span>cccxc</span>
+   <span>mmmcdlxxxix</span>
+   <span>mmmcdxc</span>
+   <span>mmmcdxci</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-08-b-reference.html b/layout/reftests/counters/t1202-counter-08-b-reference.html
--- a/layout/reftests/counters/t1202-counter-08-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-08-b-reference.html
@@ -10,25 +10,25 @@
  <body>
 
  <div>
-   I
-   II
-   III
-   IV
-   V
-   VI
-   VII
-   VIII
-   IX
-   X
-   XI
-   XII
-   XLIX
-   L
-   CCCLXXXIX
-   CCCXC
-   MMMCDLXXXIX
-   MMMCDXC
-   MMMCDXCI
+   <span>I</span>
+   <span>II</span>
+   <span>III</span>
+   <span>IV</span>
+   <span>V</span>
+   <span>VI</span>
+   <span>VII</span>
+   <span>VIII</span>
+   <span>IX</span>
+   <span>X</span>
+   <span>XI</span>
+   <span>XII</span>
+   <span>XLIX</span>
+   <span>L</span>
+   <span>CCCLXXXIX</span>
+   <span>CCCXC</span>
+   <span>MMMCDLXXXIX</span>
+   <span>MMMCDXC</span>
+   <span>MMMCDXCI</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-09-b-reference.html b/layout/reftests/counters/t1202-counter-09-b-reference.html
--- a/layout/reftests/counters/t1202-counter-09-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-09-b-reference.html
@@ -11,46 +11,46 @@
  <body>
 
  <div>
-   &#x10D0;
-   &#x10D1;
-   &#x10D2;
-   &#x10D3;
-   &#x10D4;
-   &#x10D5;
-   &#x10D6;
-   &#x10F1;
-   &#x10D7;
-   &#x10D8;
-   &#x10D8;&#x10D0;
-   &#x10D8;&#x10D1;
-   &#x10D9;
-   &#x10DA;
-   &#x10DB;
-   &#x10DC;
-   &#x10F2;
-   &#x10DD;
-   &#x10DE;
-   &#x10DF;
-   &#x10E0;
-   &#x10E1;
-   &#x10E2;
-   &#x10F3;
-   &#x10E4;
-   &#x10E5;
-   &#x10E6;
-   &#x10E7;
-   &#x10E8;
-   &#x10E9;
-   &#x10EA;
-   &#x10EB;
-   &#x10EC;
-   &#x10ED;
-   &#x10EE;
-   &#x10F4;
-   &#x10EF;
-   &#x10F0;
-   &#x10F5;
-   &#x10F5;&#x10F0;&#x10E8;&#x10DF;&#x10D7;
+   <span>&#x10D0;</span>
+   <span>&#x10D1;</span>
+   <span>&#x10D2;</span>
+   <span>&#x10D3;</span>
+   <span>&#x10D4;</span>
+   <span>&#x10D5;</span>
+   <span>&#x10D6;</span>
+   <span>&#x10F1;</span>
+   <span>&#x10D7;</span>
+   <span>&#x10D8;</span>
+   <span>&#x10D8;&#x10D0;</span>
+   <span>&#x10D8;&#x10D1;</span>
+   <span>&#x10D9;</span>
+   <span>&#x10DA;</span>
+   <span>&#x10DB;</span>
+   <span>&#x10DC;</span>
+   <span>&#x10F2;</span>
+   <span>&#x10DD;</span>
+   <span>&#x10DE;</span>
+   <span>&#x10DF;</span>
+   <span>&#x10E0;</span>
+   <span>&#x10E1;</span>
+   <span>&#x10E2;</span>
+   <span>&#x10F3;</span>
+   <span>&#x10E4;</span>
+   <span>&#x10E5;</span>
+   <span>&#x10E6;</span>
+   <span>&#x10E7;</span>
+   <span>&#x10E8;</span>
+   <span>&#x10E9;</span>
+   <span>&#x10EA;</span>
+   <span>&#x10EB;</span>
+   <span>&#x10EC;</span>
+   <span>&#x10ED;</span>
+   <span>&#x10EE;</span>
+   <span>&#x10F4;</span>
+   <span>&#x10EF;</span>
+   <span>&#x10F0;</span>
+   <span>&#x10F5;</span>
+   <span>&#x10F5;&#x10F0;&#x10E8;&#x10DF;&#x10D7;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-10-b-reference.html b/layout/reftests/counters/t1202-counter-10-b-reference.html
--- a/layout/reftests/counters/t1202-counter-10-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-10-b-reference.html
@@ -11,45 +11,45 @@
  <body>
 
  <div>
-   &#x531;
-   &#x532;
-   &#x533;
-   &#x534;
-   &#x535;
-   &#x536;
-   &#x537;
-   &#x538;
-   &#x539;
-   &#x53A;
-   &#x53A;&#x531;
-   &#x53A;&#x532;
-   &#x53B;
-   &#x53C;
-   &#x53D;
-   &#x53E;
-   &#x53F;
-   &#x540;
-   &#x541;
-   &#x542;
-   &#x543;
-   &#x544;
-   &#x545;
-   &#x546;
-   &#x547;
-   &#x548;
-   &#x549;
-   &#x54A;
-   &#x54B;
-   &#x54C;
-   &#x54D;
-   &#x54E;
-   &#x54F;
-   &#x550;
-   &#x551;
-   &#x548;&#x552;
-   &#x553;
-   &#x554;
-   &#x554;&#x54B;&#x542;&#x539;
+   <span>&#x531;</span>
+   <span>&#x532;</span>
+   <span>&#x533;</span>
+   <span>&#x534;</span>
+   <span>&#x535;</span>
+   <span>&#x536;</span>
+   <span>&#x537;</span>
+   <span>&#x538;</span>
+   <span>&#x539;</span>
+   <span>&#x53A;</span>
+   <span>&#x53A;&#x531;</span>
+   <span>&#x53A;&#x532;</span>
+   <span>&#x53B;</span>
+   <span>&#x53C;</span>
+   <span>&#x53D;</span>
+   <span>&#x53E;</span>
+   <span>&#x53F;</span>
+   <span>&#x540;</span>
+   <span>&#x541;</span>
+   <span>&#x542;</span>
+   <span>&#x543;</span>
+   <span>&#x544;</span>
+   <span>&#x545;</span>
+   <span>&#x546;</span>
+   <span>&#x547;</span>
+   <span>&#x548;</span>
+   <span>&#x549;</span>
+   <span>&#x54A;</span>
+   <span>&#x54B;</span>
+   <span>&#x54C;</span>
+   <span>&#x54D;</span>
+   <span>&#x54E;</span>
+   <span>&#x54F;</span>
+   <span>&#x550;</span>
+   <span>&#x551;</span>
+   <span>&#x548;&#x552;</span>
+   <span>&#x553;</span>
+   <span>&#x554;</span>
+   <span>&#x554;&#x54B;&#x542;&#x539;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-11-b-reference.html b/layout/reftests/counters/t1202-counter-11-b-reference.html
--- a/layout/reftests/counters/t1202-counter-11-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-11-b-reference.html
@@ -10,18 +10,18 @@
  <body>
 
  <div>
-   a
-   b
-   c
-   d
-   e
-   f
-   g
-   h
-   i
-   j
-   k
-   l
+   <span>a</span>
+   <span>b</span>
+   <span>c</span>
+   <span>d</span>
+   <span>e</span>
+   <span>f</span>
+   <span>g</span>
+   <span>h</span>
+   <span>i</span>
+   <span>j</span>
+   <span>k</span>
+   <span>l</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-12-b-reference.html b/layout/reftests/counters/t1202-counter-12-b-reference.html
--- a/layout/reftests/counters/t1202-counter-12-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-12-b-reference.html
@@ -10,18 +10,18 @@
  <body>
 
  <div>
-   a
-   b
-   c
-   d
-   e
-   f
-   g
-   h
-   i
-   j
-   k
-   l
+   <span>a</span>
+   <span>b</span>
+   <span>c</span>
+   <span>d</span>
+   <span>e</span>
+   <span>f</span>
+   <span>g</span>
+   <span>h</span>
+   <span>i</span>
+   <span>j</span>
+   <span>k</span>
+   <span>l</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-13-b-reference.html b/layout/reftests/counters/t1202-counter-13-b-reference.html
--- a/layout/reftests/counters/t1202-counter-13-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-13-b-reference.html
@@ -10,18 +10,18 @@
  <body>
 
  <div>
-   A
-   B
-   C
-   D
-   E
-   F
-   G
-   H
-   I
-   J
-   K
-   L
+   <span>A</span>
+   <span>B</span>
+   <span>C</span>
+   <span>D</span>
+   <span>E</span>
+   <span>F</span>
+   <span>G</span>
+   <span>H</span>
+   <span>I</span>
+   <span>J</span>
+   <span>K</span>
+   <span>L</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-14-b-reference.html b/layout/reftests/counters/t1202-counter-14-b-reference.html
--- a/layout/reftests/counters/t1202-counter-14-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-14-b-reference.html
@@ -10,18 +10,18 @@
  <body>
 
  <div>
-   A
-   B
-   C
-   D
-   E
-   F
-   G
-   H
-   I
-   J
-   K
-   L
+   <span>A</span>
+   <span>B</span>
+   <span>C</span>
+   <span>D</span>
+   <span>E</span>
+   <span>F</span>
+   <span>G</span>
+   <span>H</span>
+   <span>I</span>
+   <span>J</span>
+   <span>K</span>
+   <span>L</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-15-b-reference.html b/layout/reftests/counters/t1202-counter-15-b-reference.html
--- a/layout/reftests/counters/t1202-counter-15-b-reference.html
+++ b/layout/reftests/counters/t1202-counter-15-b-reference.html
@@ -10,18 +10,18 @@
  <body>
 
  <div>
-   &#x3B1;
-   &#x3B2;
-   &#x3B3;
-   &#x3B4;
-   &#x3B5;
-   &#x3B6;
-   &#x3B7;
-   &#x3B8;
-   &#x3B9;
-   &#x3BA;
-   &#x3BB;
-   &#x3BC;
+   <span>&#x3B1;</span>
+   <span>&#x3B2;</span>
+   <span>&#x3B3;</span>
+   <span>&#x3B4;</span>
+   <span>&#x3B5;</span>
+   <span>&#x3B6;</span>
+   <span>&#x3B7;</span>
+   <span>&#x3B8;</span>
+   <span>&#x3B9;</span>
+   <span>&#x3BA;</span>
+   <span>&#x3BB;</span>
+   <span>&#x3BC;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counter-16-f-reference.html b/layout/reftests/counters/t1202-counter-16-f-reference.html
--- a/layout/reftests/counters/t1202-counter-16-f-reference.html
+++ b/layout/reftests/counters/t1202-counter-16-f-reference.html
@@ -10,18 +10,18 @@
  <body>
 
  <div>
-   1
-   2
-   3
-   4
-   5
-   6
-   7
-   8
-   9
-   10
-   11
-   12
+   <span>1</span>
+   <span>2</span>
+   <span>3</span>
+   <span>4</span>
+   <span>5</span>
+   <span>6</span>
+   <span>7</span>
+   <span>8</span>
+   <span>9</span>
+   <span>10</span>
+   <span>11</span>
+   <span>12</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-00-b-reference.html b/layout/reftests/counters/t1202-counters-00-b-reference.html
--- a/layout/reftests/counters/t1202-counters-00-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-00-b-reference.html
@@ -5,31 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, "."); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   1.1
-   1.2
-   1.3
-   1.4
-   1.5
-   1.6
-   1.7
-   1.8
-   1.9
-   1.10
-   1.11
-   1.12
+   <span>1.1</span>
+   <span>1.2</span>
+   <span>1.3</span>
+   <span>1.4</span>
+   <span>1.5</span>
+   <span>1.6</span>
+   <span>1.7</span>
+   <span>1.8</span>
+   <span>1.9</span>
+   <span>1.10</span>
+   <span>1.11</span>
+   <span>1.12</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-01-b-reference.html b/layout/reftests/counters/t1202-counters-01-b-reference.html
--- a/layout/reftests/counters/t1202-counters-01-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-01-b-reference.html
@@ -5,31 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", none) "z"; }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   .z
-   .z
-   .z
-   .z
-   .z
-   .z
-   .z
-   .z
-   .z
-   .z
-   .z
-   .z
+   <span>.z</span>
+   <span>.z</span>
+   <span>.z</span>
+   <span>.z</span>
+   <span>.z</span>
+   <span>.z</span>
+   <span>.z</span>
+   <span>.z</span>
+   <span>.z</span>
+   <span>.z</span>
+   <span>.z</span>
+   <span>.z</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-02-b-reference.html b/layout/reftests/counters/t1202-counters-02-b-reference.html
--- a/layout/reftests/counters/t1202-counters-02-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-02-b-reference.html
@@ -5,31 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", disc); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   &#x2022;.&#x2022;
-   &#x2022;.&#x2022;
-   &#x2022;.&#x2022;
-   &#x2022;.&#x2022;
-   &#x2022;.&#x2022;
-   &#x2022;.&#x2022;
-   &#x2022;.&#x2022;
-   &#x2022;.&#x2022;
-   &#x2022;.&#x2022;
-   &#x2022;.&#x2022;
-   &#x2022;.&#x2022;
-   &#x2022;.&#x2022;
+   <span>&#x2022;.&#x2022;</span>
+   <span>&#x2022;.&#x2022;</span>
+   <span>&#x2022;.&#x2022;</span>
+   <span>&#x2022;.&#x2022;</span>
+   <span>&#x2022;.&#x2022;</span>
+   <span>&#x2022;.&#x2022;</span>
+   <span>&#x2022;.&#x2022;</span>
+   <span>&#x2022;.&#x2022;</span>
+   <span>&#x2022;.&#x2022;</span>
+   <span>&#x2022;.&#x2022;</span>
+   <span>&#x2022;.&#x2022;</span>
+   <span>&#x2022;.&#x2022;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-03-b-reference.html b/layout/reftests/counters/t1202-counters-03-b-reference.html
--- a/layout/reftests/counters/t1202-counters-03-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-03-b-reference.html
@@ -5,31 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", circle); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   &#x25E6;.&#x25E6;
-   &#x25E6;.&#x25E6;
-   &#x25E6;.&#x25E6;
-   &#x25E6;.&#x25E6;
-   &#x25E6;.&#x25E6;
-   &#x25E6;.&#x25E6;
-   &#x25E6;.&#x25E6;
-   &#x25E6;.&#x25E6;
-   &#x25E6;.&#x25E6;
-   &#x25E6;.&#x25E6;
-   &#x25E6;.&#x25E6;
-   &#x25E6;.&#x25E6;
+   <span>&#x25E6;.&#x25E6;</span>
+   <span>&#x25E6;.&#x25E6;</span>
+   <span>&#x25E6;.&#x25E6;</span>
+   <span>&#x25E6;.&#x25E6;</span>
+   <span>&#x25E6;.&#x25E6;</span>
+   <span>&#x25E6;.&#x25E6;</span>
+   <span>&#x25E6;.&#x25E6;</span>
+   <span>&#x25E6;.&#x25E6;</span>
+   <span>&#x25E6;.&#x25E6;</span>
+   <span>&#x25E6;.&#x25E6;</span>
+   <span>&#x25E6;.&#x25E6;</span>
+   <span>&#x25E6;.&#x25E6;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-04-b-reference.html b/layout/reftests/counters/t1202-counters-04-b-reference.html
--- a/layout/reftests/counters/t1202-counters-04-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-04-b-reference.html
@@ -5,31 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", square); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   &#x25FE;.&#x25FE;
-   &#x25FE;.&#x25FE;
-   &#x25FE;.&#x25FE;
-   &#x25FE;.&#x25FE;
-   &#x25FE;.&#x25FE;
-   &#x25FE;.&#x25FE;
-   &#x25FE;.&#x25FE;
-   &#x25FE;.&#x25FE;
-   &#x25FE;.&#x25FE;
-   &#x25FE;.&#x25FE;
-   &#x25FE;.&#x25FE;
-   &#x25FE;.&#x25FE;
+   <span>&#x25FE;.&#x25FE;</span>
+   <span>&#x25FE;.&#x25FE;</span>
+   <span>&#x25FE;.&#x25FE;</span>
+   <span>&#x25FE;.&#x25FE;</span>
+   <span>&#x25FE;.&#x25FE;</span>
+   <span>&#x25FE;.&#x25FE;</span>
+   <span>&#x25FE;.&#x25FE;</span>
+   <span>&#x25FE;.&#x25FE;</span>
+   <span>&#x25FE;.&#x25FE;</span>
+   <span>&#x25FE;.&#x25FE;</span>
+   <span>&#x25FE;.&#x25FE;</span>
+   <span>&#x25FE;.&#x25FE;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-05-b-reference.html b/layout/reftests/counters/t1202-counters-05-b-reference.html
--- a/layout/reftests/counters/t1202-counters-05-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-05-b-reference.html
@@ -5,31 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", decimal); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   1.1
-   1.2
-   1.3
-   1.4
-   1.5
-   1.6
-   1.7
-   1.8
-   1.9
-   1.10
-   1.11
-   1.12
+   <span>1.1</span>
+   <span>1.2</span>
+   <span>1.3</span>
+   <span>1.4</span>
+   <span>1.5</span>
+   <span>1.6</span>
+   <span>1.7</span>
+   <span>1.8</span>
+   <span>1.9</span>
+   <span>1.10</span>
+   <span>1.11</span>
+   <span>1.12</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-06-b-reference.html b/layout/reftests/counters/t1202-counters-06-b-reference.html
--- a/layout/reftests/counters/t1202-counters-06-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-06-b-reference.html
@@ -6,34 +6,27 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
   <meta http-equiv="Content-Style-Type" content="text/css"/>
-  <style type="text/css">
-
-  body, #test span:first-child { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", decimal-leading-zero); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   01.01
-   01.02
-   01.03
-   01.04
-   01.05
-   01.06
-   01.07
-   01.08
-   01.09
-   01.10
-   01.11
-   01.12
-   01.99
-   01.100
-   01.101
+   <span>01.01</span>
+   <span>01.02</span>
+   <span>01.03</span>
+   <span>01.04</span>
+   <span>01.05</span>
+   <span>01.06</span>
+   <span>01.07</span>
+   <span>01.08</span>
+   <span>01.09</span>
+   <span>01.10</span>
+   <span>01.11</span>
+   <span>01.12</span>
+   <span>01.99</span>
+   <span>01.100</span>
+   <span>01.101</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-07-b-reference.html b/layout/reftests/counters/t1202-counters-07-b-reference.html
--- a/layout/reftests/counters/t1202-counters-07-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-07-b-reference.html
@@ -6,38 +6,31 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
   <meta http-equiv="Content-Style-Type" content="text/css"/>
-  <style type="text/css">
-
-  body, #test span:first-child { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", lower-roman); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   i.i
-   i.ii
-   i.iii
-   i.iv
-   i.v
-   i.vi
-   i.vii
-   i.viii
-   i.ix
-   i.x
-   i.xi
-   i.xii
-   i.xlix
-   i.l
-   i.ccclxxxix
-   i.cccxc
-   i.mmmcdlxxxix
-   i.mmmcdxc
-   i.mmmcdxci
+   <span>i.i</span>
+   <span>i.ii</span>
+   <span>i.iii</span>
+   <span>i.iv</span>
+   <span>i.v</span>
+   <span>i.vi</span>
+   <span>i.vii</span>
+   <span>i.viii</span>
+   <span>i.ix</span>
+   <span>i.x</span>
+   <span>i.xi</span>
+   <span>i.xii</span>
+   <span>i.xlix</span>
+   <span>i.l</span>
+   <span>i.ccclxxxix</span>
+   <span>i.cccxc</span>
+   <span>i.mmmcdlxxxix</span>
+   <span>i.mmmcdxc</span>
+   <span>i.mmmcdxci</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-08-b-reference.html b/layout/reftests/counters/t1202-counters-08-b-reference.html
--- a/layout/reftests/counters/t1202-counters-08-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-08-b-reference.html
@@ -6,38 +6,31 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
   <meta http-equiv="Content-Style-Type" content="text/css"/>
-  <style type="text/css">
-
-  body, #test span:first-child { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", upper-roman); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   I.I
-   I.II
-   I.III
-   I.IV
-   I.V
-   I.VI
-   I.VII
-   I.VIII
-   I.IX
-   I.X
-   I.XI
-   I.XII
-   I.XLIX
-   I.L
-   I.CCCLXXXIX
-   I.CCCXC
-   I.MMMCDLXXXIX
-   I.MMMCDXC
-   I.MMMCDXCI
+   <span>I.I</span>
+   <span>I.II</span>
+   <span>I.III</span>
+   <span>I.IV</span>
+   <span>I.V</span>
+   <span>I.VI</span>
+   <span>I.VII</span>
+   <span>I.VIII</span>
+   <span>I.IX</span>
+   <span>I.X</span>
+   <span>I.XI</span>
+   <span>I.XII</span>
+   <span>I.XLIX</span>
+   <span>I.L</span>
+   <span>I.CCCLXXXIX</span>
+   <span>I.CCCXC</span>
+   <span>I.MMMCDLXXXIX</span>
+   <span>I.MMMCDXC</span>
+   <span>I.MMMCDXCI</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-09-b-reference.html b/layout/reftests/counters/t1202-counters-09-b-reference.html
--- a/layout/reftests/counters/t1202-counters-09-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-09-b-reference.html
@@ -6,59 +6,52 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
   <meta http-equiv="Content-Style-Type" content="text/css"/>
-  <style type="text/css">
-
-  body, #test span:first-child { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", georgian); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   &#x10D0;.&#x10D0;
-   &#x10D0;.&#x10D1;
-   &#x10D0;.&#x10D2;
-   &#x10D0;.&#x10D3;
-   &#x10D0;.&#x10D4;
-   &#x10D0;.&#x10D5;
-   &#x10D0;.&#x10D6;
-   &#x10D0;.&#x10F1;
-   &#x10D0;.&#x10D7;
-   &#x10D0;.&#x10D8;
-   &#x10D0;.&#x10D8;&#x10D0;
-   &#x10D0;.&#x10D8;&#x10D1;
-   &#x10D0;.&#x10D9;
-   &#x10D0;.&#x10DA;
-   &#x10D0;.&#x10DB;
-   &#x10D0;.&#x10DC;
-   &#x10D0;.&#x10F2;
-   &#x10D0;.&#x10DD;
-   &#x10D0;.&#x10DE;
-   &#x10D0;.&#x10DF;
-   &#x10D0;.&#x10E0;
-   &#x10D0;.&#x10E1;
-   &#x10D0;.&#x10E2;
-   &#x10D0;.&#x10F3;
-   &#x10D0;.&#x10E4;
-   &#x10D0;.&#x10E5;
-   &#x10D0;.&#x10E6;
-   &#x10D0;.&#x10E7;
-   &#x10D0;.&#x10E8;
-   &#x10D0;.&#x10E9;
-   &#x10D0;.&#x10EA;
-   &#x10D0;.&#x10EB;
-   &#x10D0;.&#x10EC;
-   &#x10D0;.&#x10ED;
-   &#x10D0;.&#x10EE;
-   &#x10D0;.&#x10F4;
-   &#x10D0;.&#x10EF;
-   &#x10D0;.&#x10F0;
-   &#x10D0;.&#x10F5;
-   &#x10D0;.&#x10F5;&#x10F0;&#x10E8;&#x10DF;&#x10D7;
+   <span>&#x10D0;.&#x10D0;</span>
+   <span>&#x10D0;.&#x10D1;</span>
+   <span>&#x10D0;.&#x10D2;</span>
+   <span>&#x10D0;.&#x10D3;</span>
+   <span>&#x10D0;.&#x10D4;</span>
+   <span>&#x10D0;.&#x10D5;</span>
+   <span>&#x10D0;.&#x10D6;</span>
+   <span>&#x10D0;.&#x10F1;</span>
+   <span>&#x10D0;.&#x10D7;</span>
+   <span>&#x10D0;.&#x10D8;</span>
+   <span>&#x10D0;.&#x10D8;&#x10D0;</span>
+   <span>&#x10D0;.&#x10D8;&#x10D1;</span>
+   <span>&#x10D0;.&#x10D9;</span>
+   <span>&#x10D0;.&#x10DA;</span>
+   <span>&#x10D0;.&#x10DB;</span>
+   <span>&#x10D0;.&#x10DC;</span>
+   <span>&#x10D0;.&#x10F2;</span>
+   <span>&#x10D0;.&#x10DD;</span>
+   <span>&#x10D0;.&#x10DE;</span>
+   <span>&#x10D0;.&#x10DF;</span>
+   <span>&#x10D0;.&#x10E0;</span>
+   <span>&#x10D0;.&#x10E1;</span>
+   <span>&#x10D0;.&#x10E2;</span>
+   <span>&#x10D0;.&#x10F3;</span>
+   <span>&#x10D0;.&#x10E4;</span>
+   <span>&#x10D0;.&#x10E5;</span>
+   <span>&#x10D0;.&#x10E6;</span>
+   <span>&#x10D0;.&#x10E7;</span>
+   <span>&#x10D0;.&#x10E8;</span>
+   <span>&#x10D0;.&#x10E9;</span>
+   <span>&#x10D0;.&#x10EA;</span>
+   <span>&#x10D0;.&#x10EB;</span>
+   <span>&#x10D0;.&#x10EC;</span>
+   <span>&#x10D0;.&#x10ED;</span>
+   <span>&#x10D0;.&#x10EE;</span>
+   <span>&#x10D0;.&#x10F4;</span>
+   <span>&#x10D0;.&#x10EF;</span>
+   <span>&#x10D0;.&#x10F0;</span>
+   <span>&#x10D0;.&#x10F5;</span>
+   <span>&#x10D0;.&#x10F5;&#x10F0;&#x10E8;&#x10DF;&#x10D7;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-10-b-reference.html b/layout/reftests/counters/t1202-counters-10-b-reference.html
--- a/layout/reftests/counters/t1202-counters-10-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-10-b-reference.html
@@ -6,58 +6,51 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
   <meta http-equiv="Content-Style-Type" content="text/css"/>
-  <style type="text/css">
-
-  body, #test span:first-child { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", armenian); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   &#x531;.&#x531;
-   &#x531;.&#x532;
-   &#x531;.&#x533;
-   &#x531;.&#x534;
-   &#x531;.&#x535;
-   &#x531;.&#x536;
-   &#x531;.&#x537;
-   &#x531;.&#x538;
-   &#x531;.&#x539;
-   &#x531;.&#x53A;
-   &#x531;.&#x53A;&#x531;
-   &#x531;.&#x53A;&#x532;
-   &#x531;.&#x53B;
-   &#x531;.&#x53C;
-   &#x531;.&#x53D;
-   &#x531;.&#x53E;
-   &#x531;.&#x53F;
-   &#x531;.&#x540;
-   &#x531;.&#x541;
-   &#x531;.&#x542;
-   &#x531;.&#x543;
-   &#x531;.&#x544;
-   &#x531;.&#x545;
-   &#x531;.&#x546;
-   &#x531;.&#x547;
-   &#x531;.&#x548;
-   &#x531;.&#x549;
-   &#x531;.&#x54A;
-   &#x531;.&#x54B;
-   &#x531;.&#x54C;
-   &#x531;.&#x54D;
-   &#x531;.&#x54E;
-   &#x531;.&#x54F;
-   &#x531;.&#x550;
-   &#x531;.&#x551;
-   &#x531;.&#x548;&#x552;
-   &#x531;.&#x553;
-   &#x531;.&#x554;
-   &#x531;.&#x554;&#x54B;&#x542;&#x539;
+   <span>&#x531;.&#x531;</span>
+   <span>&#x531;.&#x532;</span>
+   <span>&#x531;.&#x533;</span>
+   <span>&#x531;.&#x534;</span>
+   <span>&#x531;.&#x535;</span>
+   <span>&#x531;.&#x536;</span>
+   <span>&#x531;.&#x537;</span>
+   <span>&#x531;.&#x538;</span>
+   <span>&#x531;.&#x539;</span>
+   <span>&#x531;.&#x53A;</span>
+   <span>&#x531;.&#x53A;&#x531;</span>
+   <span>&#x531;.&#x53A;&#x532;</span>
+   <span>&#x531;.&#x53B;</span>
+   <span>&#x531;.&#x53C;</span>
+   <span>&#x531;.&#x53D;</span>
+   <span>&#x531;.&#x53E;</span>
+   <span>&#x531;.&#x53F;</span>
+   <span>&#x531;.&#x540;</span>
+   <span>&#x531;.&#x541;</span>
+   <span>&#x531;.&#x542;</span>
+   <span>&#x531;.&#x543;</span>
+   <span>&#x531;.&#x544;</span>
+   <span>&#x531;.&#x545;</span>
+   <span>&#x531;.&#x546;</span>
+   <span>&#x531;.&#x547;</span>
+   <span>&#x531;.&#x548;</span>
+   <span>&#x531;.&#x549;</span>
+   <span>&#x531;.&#x54A;</span>
+   <span>&#x531;.&#x54B;</span>
+   <span>&#x531;.&#x54C;</span>
+   <span>&#x531;.&#x54D;</span>
+   <span>&#x531;.&#x54E;</span>
+   <span>&#x531;.&#x54F;</span>
+   <span>&#x531;.&#x550;</span>
+   <span>&#x531;.&#x551;</span>
+   <span>&#x531;.&#x548;&#x552;</span>
+   <span>&#x531;.&#x553;</span>
+   <span>&#x531;.&#x554;</span>
+   <span>&#x531;.&#x554;&#x54B;&#x542;&#x539;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-11-b-reference.html b/layout/reftests/counters/t1202-counters-11-b-reference.html
--- a/layout/reftests/counters/t1202-counters-11-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-11-b-reference.html
@@ -5,31 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", lower-latin); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   a.a
-   a.b
-   a.c
-   a.d
-   a.e
-   a.f
-   a.g
-   a.h
-   a.i
-   a.j
-   a.k
-   a.l
+   <span>a.a</span>
+   <span>a.b</span>
+   <span>a.c</span>
+   <span>a.d</span>
+   <span>a.e</span>
+   <span>a.f</span>
+   <span>a.g</span>
+   <span>a.h</span>
+   <span>a.i</span>
+   <span>a.j</span>
+   <span>a.k</span>
+   <span>a.l</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-12-b-reference.html b/layout/reftests/counters/t1202-counters-12-b-reference.html
--- a/layout/reftests/counters/t1202-counters-12-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-12-b-reference.html
@@ -5,31 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", lower-alpha); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   a.a
-   a.b
-   a.c
-   a.d
-   a.e
-   a.f
-   a.g
-   a.h
-   a.i
-   a.j
-   a.k
-   a.l
+   <span>a.a</span>
+   <span>a.b</span>
+   <span>a.c</span>
+   <span>a.d</span>
+   <span>a.e</span>
+   <span>a.f</span>
+   <span>a.g</span>
+   <span>a.h</span>
+   <span>a.i</span>
+   <span>a.j</span>
+   <span>a.k</span>
+   <span>a.l</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-13-b-reference.html b/layout/reftests/counters/t1202-counters-13-b-reference.html
--- a/layout/reftests/counters/t1202-counters-13-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-13-b-reference.html
@@ -5,31 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", upper-latin); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   A.A
-   A.B
-   A.C
-   A.D
-   A.E
-   A.F
-   A.G
-   A.H
-   A.I
-   A.J
-   A.K
-   A.L
+   <span>A.A</span>
+   <span>A.B</span>
+   <span>A.C</span>
+   <span>A.D</span>
+   <span>A.E</span>
+   <span>A.F</span>
+   <span>A.G</span>
+   <span>A.H</span>
+   <span>A.I</span>
+   <span>A.J</span>
+   <span>A.K</span>
+   <span>A.L</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-14-b-reference.html b/layout/reftests/counters/t1202-counters-14-b-reference.html
--- a/layout/reftests/counters/t1202-counters-14-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-14-b-reference.html
@@ -5,31 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", upper-alpha); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   A.A
-   A.B
-   A.C
-   A.D
-   A.E
-   A.F
-   A.G
-   A.H
-   A.I
-   A.J
-   A.K
-   A.L
+   <span>A.A</span>
+   <span>A.B</span>
+   <span>A.C</span>
+   <span>A.D</span>
+   <span>A.E</span>
+   <span>A.F</span>
+   <span>A.G</span>
+   <span>A.H</span>
+   <span>A.I</span>
+   <span>A.J</span>
+   <span>A.K</span>
+   <span>A.L</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-15-b-reference.html b/layout/reftests/counters/t1202-counters-15-b-reference.html
--- a/layout/reftests/counters/t1202-counters-15-b-reference.html
+++ b/layout/reftests/counters/t1202-counters-15-b-reference.html
@@ -5,31 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-  #test span:before { content: counters(c, ".", lower-greek); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   &#x3B1;.&#x3B1;
-   &#x3B1;.&#x3B2;
-   &#x3B1;.&#x3B3;
-   &#x3B1;.&#x3B4;
-   &#x3B1;.&#x3B5;
-   &#x3B1;.&#x3B6;
-   &#x3B1;.&#x3B7;
-   &#x3B1;.&#x3B8;
-   &#x3B1;.&#x3B9;
-   &#x3B1;.&#x3BA;
-   &#x3B1;.&#x3BB;
-   &#x3B1;.&#x3BC;
+   <span>&#x3B1;.&#x3B1;</span>
+   <span>&#x3B1;.&#x3B2;</span>
+   <span>&#x3B1;.&#x3B3;</span>
+   <span>&#x3B1;.&#x3B4;</span>
+   <span>&#x3B1;.&#x3B5;</span>
+   <span>&#x3B1;.&#x3B6;</span>
+   <span>&#x3B1;.&#x3B7;</span>
+   <span>&#x3B1;.&#x3B8;</span>
+   <span>&#x3B1;.&#x3B9;</span>
+   <span>&#x3B1;.&#x3BA;</span>
+   <span>&#x3B1;.&#x3BB;</span>
+   <span>&#x3B1;.&#x3BC;</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1202-counters-16-c-reference.html b/layout/reftests/counters/t1202-counters-16-c-reference.html
--- a/layout/reftests/counters/t1202-counters-16-c-reference.html
+++ b/layout/reftests/counters/t1202-counters-16-c-reference.html
@@ -5,22 +5,12 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  p, #test span { counter-increment: c; }
-
-  span#one:before { content: counters(c, ".") " - "; }
-  span#two:before { content: counters(c, "") " - "; }
-  span#three:before { content: counters(c, ".", decimal) "--    --" counters(c, "-------", decimal); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
- <div>1.1 - 12 - 1.3--    --1-------3</div>
+ <div><span>1.1 - </span><span>12 - </span><span>1.3--    --1-------3</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1202-counters-17-d-reference.html b/layout/reftests/counters/t1202-counters-17-d-reference.html
--- a/layout/reftests/counters/t1202-counters-17-d-reference.html
+++ b/layout/reftests/counters/t1202-counters-17-d-reference.html
@@ -5,23 +5,12 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c; }
-  div { white-space: pre; }
-  p, #test span { counter-increment: c; }
-
-  span#one:before { content: counters(c, ".") " - "; }
-  span#two:before { content: counters(c, "") " - "; }
-  span#three:before { content: counters(c, ".", decimal) "--       --" counters(c, "-------", decimal); }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
- <div>1.1 - 12 - 1.3--       --1-------3</div>
+ <div><span>1.1 - </span><span>12 - </span><span>1.3--       --1-------3</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1202-counters-18-f-reference.html b/layout/reftests/counters/t1202-counters-18-f-reference.html
--- a/layout/reftests/counters/t1202-counters-18-f-reference.html
+++ b/layout/reftests/counters/t1202-counters-18-f-reference.html
@@ -5,39 +5,24 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counter-styles"/>
-  <style type="text/css">
-
-  body, #test { counter-reset: c 0 f 1000; }
-  p, #test span { counter-increment: c; }
-  #test span:before {
-    content: counters(c, ".");
-    content: counters(f);
-    content: counters(f, decimal);
-    content: counters(f, decimal, ".");
-    content: counters(f, ".", decimal, decimal);
-    content: counters(f, ".", decimal, ".");
-    content: counters(f, ".", unknowntype);
-  }
-
-  </style>
  </head>
  <body>
 
  <p></p>
 
  <div>
-   1.1
-   1.2
-   1.3
-   1.4
-   1.5
-   1.6
-   1.7
-   1.8
-   1.9
-   1.10
-   1.11
-   1.12
+   <span>1.1</span>
+   <span>1.2</span>
+   <span>1.3</span>
+   <span>1.4</span>
+   <span>1.5</span>
+   <span>1.6</span>
+   <span>1.7</span>
+   <span>1.8</span>
+   <span>1.9</span>
+   <span>1.10</span>
+   <span>1.11</span>
+   <span>1.12</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1204-implied-00-b-reference.html b/layout/reftests/counters/t1204-implied-00-b-reference.html
--- a/layout/reftests/counters/t1204-implied-00-b-reference.html
+++ b/layout/reftests/counters/t1204-implied-00-b-reference.html
@@ -5,17 +5,11 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  #one:before { content: counter(one) }
-  #two:before { content: counter(two) }
-
-  </style>
  </head>
  <body>
 
 
- <div>00</div>
+ <div><span>0</span><span>0</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1204-implied-01-c-reference.html b/layout/reftests/counters/t1204-implied-01-c-reference.html
--- a/layout/reftests/counters/t1204-implied-01-c-reference.html
+++ b/layout/reftests/counters/t1204-implied-01-c-reference.html
@@ -5,19 +5,12 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  .i { counter-increment: c 1; }
-  .r { counter-reset: c 0; }
-  .u:before { content: counters(c, ".") " "; }
-
-  </style>
  </head>
  <body>
 
 
 
- <div>0 1</div>
+ <div><span>0 </span><span>1 </span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1204-implied-02-d-reference.html b/layout/reftests/counters/t1204-implied-02-d-reference.html
--- a/layout/reftests/counters/t1204-implied-02-d-reference.html
+++ b/layout/reftests/counters/t1204-implied-02-d-reference.html
@@ -5,20 +5,12 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  .i { counter-increment: c 1; }
-  .ib:before { counter-increment: c 1; content: "B" }
-  .r { counter-reset: c 0; }
-  .u:before { content: counters(c, ".") " "; }
-
-  </style>
  </head>
  <body>
 
 
 
- <div>B1 0 1 1.0</div>
+ <div><span>B</span><span>1 </span><span>0 </span><span>1 </span><span>1.0</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1204-increment-00-c-o-reference.html b/layout/reftests/counters/t1204-increment-00-c-o-reference.html
--- a/layout/reftests/counters/t1204-increment-00-c-o-reference.html
+++ b/layout/reftests/counters/t1204-increment-00-c-o-reference.html
@@ -6,28 +6,10 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <meta http-equiv="Content-Script-Type" content="text/javascript"/>
-  <style type="text/css">
+ </head>
+ <body>
 
-  #test, .reset { counter-reset: c; }
-  .increment:before { content: counters(c, ".") "-"; }
-  .increment { counter-increment: c; }
-
-  </style>
-  <script type="text/javascript">
-
-  function run() {
-	var t = document.getElementById("test");
-	var s = document.createElement("span");
-	s.setAttribute("class", "increment");
-	s.appendChild(document.createTextNode("new-"));
-	t.insertBefore(s, t.childNodes.item(1));
-  }
-
-  </script>
- </head>
- <body onload="setTimeout('run()', 0)">
-
- <div id="reference">1-2-new-3-4-</div>
+ <div id="reference"><span>1-</span><span>2-new-</span><span>3-</span><span>4-</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1204-increment-02-c-o-reference.html b/layout/reftests/counters/t1204-increment-02-c-o-reference.html
--- a/layout/reftests/counters/t1204-increment-02-c-o-reference.html
+++ b/layout/reftests/counters/t1204-increment-02-c-o-reference.html
@@ -7,26 +7,10 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <meta http-equiv="Content-Style-Type" content="text/css"/>
   <meta http-equiv="Content-Script-Type" content="text/javascript"/>
-  <style type="text/css">
+ </head>
+ <body>
 
-  #test, .reset { counter-reset: c; }
-  .increment:before, .use:before { content: counters(c, ".") "-"; }
-  .increment { counter-increment: c; }
-
-  </style>
-  <script type="text/javascript">
-
-  function run() {
-    document.getElementById("one").removeAttribute("class");
-	document.getElementById("two").setAttribute("class", "increment");
-	document.getElementById("three").setAttribute("style", "counter-increment: c");
-  }
-
-  </script>
- </head>
- <body onload="setTimeout('run()', 0)">
-
- <div id="reference">0.1-0.2-1-2-</div>
+ <div id="reference"><span>0.1-</span><span>0.2-</span><span>1-</span><span>2-</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1204-multiple-00-c-reference.html b/layout/reftests/counters/t1204-multiple-00-c-reference.html
--- a/layout/reftests/counters/t1204-multiple-00-c-reference.html
+++ b/layout/reftests/counters/t1204-multiple-00-c-reference.html
@@ -5,17 +5,11 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  #one:before { counter-reset: one 1; content: counter(one) }
-  #two:before { counter-reset: two 7 two 2; content: counter(two) }
-
-  </style>
  </head>
  <body>
 
 
- <div>12</div>
+ <div><span>1</span><span>2</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1204-multiple-01-c-reference.html b/layout/reftests/counters/t1204-multiple-01-c-reference.html
--- a/layout/reftests/counters/t1204-multiple-01-c-reference.html
+++ b/layout/reftests/counters/t1204-multiple-01-c-reference.html
@@ -5,18 +5,11 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  body { counter-reset: one 7 two -2; }
-  #one:before { counter-increment: one -6; content: counter(one) }
-  #two:before { counter-increment: dummy two 7 two two -4 silly 7; content: counter(two) }
-
-  </style>
  </head>
  <body>
 
 
- <div>12</div>
+ <div><span>1</span><span>2</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1204-order-00-c-reference.html b/layout/reftests/counters/t1204-order-00-c-reference.html
--- a/layout/reftests/counters/t1204-order-00-c-reference.html
+++ b/layout/reftests/counters/t1204-order-00-c-reference.html
@@ -5,39 +5,28 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  span.c span:before { content: counter(c); }
-  span.c { counter-reset: c 0; }
-  span.one { counter-reset: c 1; }
-  span.two { counter-increment: c 2; }
-  span.four:before { counter-reset: c 4; }
-  span.eight:before { counter-increment: c 8; }
-  span.c span:after { counter-increment: c 100; counter-reset: c 200; }
-
-  </style>
  </head>
  <body>
 
 
 
  <div>
-   0
-   1
-   2
-   3
-   4
-   4
-   4
-   4
-   8
-   9
-   10
-   11
-   12
-   12
-   12
-   12
+   <span>0</span>
+   <span>1</span>
+   <span>2</span>
+   <span>3</span>
+   <span>4</span>
+   <span>4</span>
+   <span>4</span>
+   <span>4</span>
+   <span>8</span>
+   <span>9</span>
+   <span>10</span>
+   <span>11</span>
+   <span>12</span>
+   <span>12</span>
+   <span>12</span>
+   <span>12</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t1204-reset-00-c-o-reference.html b/layout/reftests/counters/t1204-reset-00-c-o-reference.html
--- a/layout/reftests/counters/t1204-reset-00-c-o-reference.html
+++ b/layout/reftests/counters/t1204-reset-00-c-o-reference.html
@@ -6,27 +6,10 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <meta http-equiv="Content-Script-Type" content="text/javascript"/>
-  <style type="text/css">
+ </head>
+ <body>
 
-  #test, .reset { counter-reset: c; }
-  .increment:before { content: counters(c, ".") "-"; }
-  .increment { counter-increment: c; }
-
-  </style>
-  <script type="text/javascript">
-
-  function run() {
-	var t = document.getElementById("test");
-	var s = document.createElement("span");
-	s.setAttribute("class", "reset");
-	t.insertBefore(s, t.childNodes.item(1));
-  }
-
-  </script>
- </head>
- <body onload="setTimeout('run()', 0)">
-
- <div id="reference">1-1.1-1.2-</div>
+ <div id="reference"><span>1-</span><span>1.1-</span><span>1.2-</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1204-reset-01-c-o-reference.html b/layout/reftests/counters/t1204-reset-01-c-o-reference.html
--- a/layout/reftests/counters/t1204-reset-01-c-o-reference.html
+++ b/layout/reftests/counters/t1204-reset-01-c-o-reference.html
@@ -6,25 +6,10 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <meta http-equiv="Content-Script-Type" content="text/javascript"/>
-  <style type="text/css">
+ </head>
+ <body>
 
-  #test, .reset { counter-reset: c; }
-  .increment:before { content: counters(c, ".") "-"; }
-  .increment { counter-increment: c; }
-
-  </style>
-  <script type="text/javascript">
-
-  function run() {
-	var t = document.getElementById("test");
-	t.removeChild(t.childNodes.item(1));
-  }
-
-  </script>
- </head>
- <body onload="setTimeout('run()', 0)">
-
- <div id="reference">1-2-3-</div>
+ <div id="reference"><span>1-</span><span>2-</span><span>3-</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1204-reset-02-c-o-reference.html b/layout/reftests/counters/t1204-reset-02-c-o-reference.html
--- a/layout/reftests/counters/t1204-reset-02-c-o-reference.html
+++ b/layout/reftests/counters/t1204-reset-02-c-o-reference.html
@@ -6,25 +6,10 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
   <meta http-equiv="Content-Script-Type" content="text/javascript"/>
-  <style type="text/css">
+ </head>
+ <body>
 
-  #test, .reset { counter-reset: c; }
-  .increment:before { content: counters(c, ".") "-"; }
-  .increment { counter-increment: c; }
-
-  </style>
-  <script type="text/javascript">
-
-  function run() {
-	document.getElementById("one").setAttribute("class", "reset");
-    document.getElementById("two").removeAttribute("class");
-  }
-
-  </script>
- </head>
- <body onload="setTimeout('run()', 0)">
-
- <div id="reference">1-1.1-2-3-4-</div>
+ <div id="reference"><span>1-</span><span>1.1-</span><span>2-</span><span>3-</span><span>4-</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t1204-root-e-reference.html b/layout/reftests/counters/t1204-root-e-reference.html
--- a/layout/reftests/counters/t1204-root-e-reference.html
+++ b/layout/reftests/counters/t1204-root-e-reference.html
@@ -5,22 +5,13 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  html { counter-reset: c 0 c 4 c 0; counter-increment: c 1 c 3; }
-  html:before { content: " "; counter-reset: c 9999; counter-increment: c 9999; }
-  body { counter-reset: c 3; counter-increment: c 5; }
-
-  span.c:before { content: counters(c, "."); }
-
-  </style>
  </head>
  <body>
 
 
 
  <div>
-   4.8
+   <span>4.8</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t120401-scope-00-b-reference.html b/layout/reftests/counters/t120401-scope-00-b-reference.html
--- a/layout/reftests/counters/t120401-scope-00-b-reference.html
+++ b/layout/reftests/counters/t120401-scope-00-b-reference.html
@@ -6,23 +6,13 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  .scope { counter-reset: c 1; }
-  .scope:before, .scope:after { content: counter(c); }
-  .c:before { content: counter(c); }
-
-  .one:before { counter-reset: c 2; }
-  .two { counter-reset: c 3; }
-
-  </style>
  </head>
  <body>
 
 
  <div>
-   122111
-   133331
+   <span>1</span><span>2</span><span>2</span><span>1</span><span>1</span><span>1</span>
+   <span>1</span><span>3</span><span>3</span><span>3</span><span>3</span><span>1</span>
  </div>
 
  </body>
diff --git a/layout/reftests/counters/t120401-scope-01-c-reference.html b/layout/reftests/counters/t120401-scope-01-c-reference.html
--- a/layout/reftests/counters/t120401-scope-01-c-reference.html
+++ b/layout/reftests/counters/t120401-scope-01-c-reference.html
@@ -6,19 +6,11 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  span:before { counter-increment: c 1; content: "B" counters(c,".") "-" }
-  span:after  { counter-increment: c 1; content: "A" counters(c,".") "-" }
-
-  body, span#reset { counter-reset: c 0; }
-
-  </style>
  </head>
  <body>
 
 
- <div>B1-B2-B2.1-B2.2-A2.3-B2.4-A2.5-A2.6-B2.7-B2.8-A2.9-A2.10-A2.11-A3-</div>
+ <div><span>B1-</span><span>B2-</span><span>B2.1-</span><span>B2.2-</span><span>A2.3-</span><span>B2.4-</span><span>A2.5-</span><span>A2.6-</span><span>B2.7-</span><span>B2.8-</span><span>A2.9-</span><span>A2.10-</span><span>A2.11-</span><span>A3-</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t120401-scope-02-c-reference.html b/layout/reftests/counters/t120401-scope-02-c-reference.html
--- a/layout/reftests/counters/t120401-scope-02-c-reference.html
+++ b/layout/reftests/counters/t120401-scope-02-c-reference.html
@@ -6,19 +6,11 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  span:before { counter-increment: c 1; content: "B" counters(c,".") "-" }
-  span:after  { counter-increment: c 1; content: "A" counters(c,".") "-" }
-
-  body, span#reset:before { counter-reset: c 0; }
-
-  </style>
  </head>
  <body>
 
 
- <div>B1-B1.1-B1.2-A1.3-A1.4-A2-</div>
+ <div><span>B1-</span><span>B1.1-</span><span>B1.2-</span><span>A1.3-</span><span>A1.4-</span><span>A2-</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t120401-scope-03-c-reference.html b/layout/reftests/counters/t120401-scope-03-c-reference.html
--- a/layout/reftests/counters/t120401-scope-03-c-reference.html
+++ b/layout/reftests/counters/t120401-scope-03-c-reference.html
@@ -6,19 +6,11 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  span:before { counter-increment: c 1; content: "B" counters(c,".") "-" }
-  span:after  { counter-increment: c 1; content: "A" counters(c,".") "-" }
-
-  body, span#reset:after { counter-reset: c 0; }
-
-  </style>
  </head>
  <body>
 
 
- <div>B1-B2-B3-A4-A4.1-A5-</div>
+ <div><span>B1-</span><span>B2-</span><span>B3-</span><span>A4-</span><span>A4.1-</span><span>A5-</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t120401-scope-04-d-reference.html b/layout/reftests/counters/t120401-scope-04-d-reference.html
--- a/layout/reftests/counters/t120401-scope-04-d-reference.html
+++ b/layout/reftests/counters/t120401-scope-04-d-reference.html
@@ -6,18 +6,10 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  .reset { counter-reset: c; }
-  .rb:before { counter-reset: c; content: "R"; }
-  .use { counter-increment: c; }
-  .use:before { content: counters(c, ".") " "; }
-
-  </style>
  </head>
  <body>
 
- <div>1 1 R1.1 1.1</div>
+ <div><span>1 </span><span>1 </span><span>R</span><span>1.1 </span><span>1.1 </span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t120403-content-none-00-c-reference.html b/layout/reftests/counters/t120403-content-none-00-c-reference.html
--- a/layout/reftests/counters/t120403-content-none-00-c-reference.html
+++ b/layout/reftests/counters/t120403-content-none-00-c-reference.html
@@ -6,18 +6,11 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  div { counter-reset: c }
-  #one:before { counter-increment: c }
-  #two:before { content: counter(c) }
-
-  </style>
  </head>
  <body>
 
 
- <div>0</div>
+ <div><span>0</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t120403-display-none-00-c-reference.html b/layout/reftests/counters/t120403-display-none-00-c-reference.html
--- a/layout/reftests/counters/t120403-display-none-00-c-reference.html
+++ b/layout/reftests/counters/t120403-display-none-00-c-reference.html
@@ -6,18 +6,11 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  div { counter-reset: c }
-  #one { display: none; counter-increment: c }
-  #two:before { content: counter(c) }
-
-  </style>
  </head>
  <body>
 
 
- <div>0</div>
+ <div><span>0</span></div>
 
  </body>
 </html>
diff --git a/layout/reftests/counters/t120403-visibility-00-c-reference.html b/layout/reftests/counters/t120403-visibility-00-c-reference.html
--- a/layout/reftests/counters/t120403-visibility-00-c-reference.html
+++ b/layout/reftests/counters/t120403-visibility-00-c-reference.html
@@ -6,18 +6,11 @@
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#counters"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/generate.html#propdef-content"/>
   <link rel="help" href="http://www.w3.org/TR/CSS21/syndata.html#counter"/>
-  <style type="text/css">
-
-  div { counter-reset: c }
-  #one { visibility: hidden; counter-increment: c }
-  #two:before { content: counter(c) }
-
-  </style>
  </head>
  <body>
 
 
- <div>1</div>
+ <div><span>1</span></div>
 
  </body>
 </html>
