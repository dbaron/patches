From: L. David Baron <dbaron@dbaron.org>

Make font inflation inflate text in selects appropriately.  (Bug 706609)

FIXES TEXT SIZE AND HEIGHT, BUT NOT WIDTH.

diff --git a/layout/generic/nsFrame.cpp b/layout/generic/nsFrame.cpp
--- a/layout/generic/nsFrame.cpp
+++ b/layout/generic/nsFrame.cpp
@@ -454,20 +454,26 @@ IsFontSizeInflationContainer(nsIFrame* a
    *
    * There are contexts where it would be nice if some blocks didn't
    * count as a container, so that, for example, an indented quotation
    * didn't end up with a smaller font size.  However, it's hard to
    * distinguish these situations where we really do want the indented
    * thing to count as a container, so we don't try, and blocks are
    * always containers.
    */
+  nsIContent *content = aFrame->GetContent();
   bool isInline = (aFrame->GetStyleDisplay()->mDisplay ==
                      NS_STYLE_DISPLAY_INLINE ||
-                   (aFrame->GetContent() &&
-                    aFrame->GetContent()->IsInNativeAnonymousSubtree())) &&
+                   // Given multiple frames for the same node, only the
+                   // outer one should be considered a container.
+                   // (Important, e.g., for nsSelectsAreaFrame.)
+                   (aFrame->GetParent() &&
+                    aFrame->GetParent()->GetContent() == content) ||
+                   (content && content->IsHTML(nsGkAtoms::option)) ||
+                   (content && content->IsInNativeAnonymousSubtree())) &&
                   !(aFrame->IsBoxFrame() && aFrame->GetParent() &&
                     aFrame->GetParent()->IsBoxFrame());
   NS_ASSERTION(!aFrame->IsFrameOfType(nsIFrame::eLineParticipant) || isInline,
                "line participants must not be containers");
   NS_ASSERTION(aFrame->GetType() != nsGkAtoms::bulletFrame || isInline,
                "bullets should not be containers");
   return !isInline;
 }
