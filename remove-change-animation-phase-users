From: L. David Baron <dbaron@dbaron.org>

Bug 960465 patch 19 - Remove users of eRestyle_ChangeAnimationPhase.  r=birtles

diff --git a/dom/base/Element.cpp b/dom/base/Element.cpp
--- a/dom/base/Element.cpp
+++ b/dom/base/Element.cpp
@@ -1798,18 +1798,17 @@ Element::SetSMILOverrideStyleRule(css::S
   if (aNotify) {
     nsIDocument* doc = GetComposedDoc();
     // Only need to request a restyle if we're in a document.  (We might not
     // be in a document, if we're clearing animation effects on a target node
     // that's been detached since the previous animation sample.)
     if (doc) {
       nsCOMPtr<nsIPresShell> shell = doc->GetShell();
       if (shell) {
-        shell->RestyleForAnimation(this,
-          eRestyle_StyleAttribute | eRestyle_ChangeAnimationPhase);
+        shell->RestyleForAnimation(this, eRestyle_StyleAttribute);
       }
     }
   }
 
   return NS_OK;
 }
 
 bool
diff --git a/layout/style/AnimationCommon.h b/layout/style/AnimationCommon.h
--- a/layout/style/AnimationCommon.h
+++ b/layout/style/AnimationCommon.h
@@ -326,17 +326,16 @@ struct AnimationPlayerCollection : publi
 
   mozilla::dom::Element* GetElementToRestyle() const;
 
   void PostRestyleForAnimation(nsPresContext *aPresContext) {
     mozilla::dom::Element* element = GetElementToRestyle();
     if (element) {
       nsRestyleHint hint = IsForTransitions() ? eRestyle_CSSTransitions
                                               : eRestyle_CSSAnimations;
-      hint |= eRestyle_ChangeAnimationPhase;
       aPresContext->PresShell()->RestyleForAnimation(element, hint);
     }
   }
 
   void NotifyPlayerUpdated();
 
   static void LogAsyncAnimationFailure(nsCString& aMessage,
                                        const nsIContent* aContent = nullptr);
diff --git a/layout/style/nsHTMLCSSStyleSheet.cpp b/layout/style/nsHTMLCSSStyleSheet.cpp
--- a/layout/style/nsHTMLCSSStyleSheet.cpp
+++ b/layout/style/nsHTMLCSSStyleSheet.cpp
@@ -133,17 +133,17 @@ nsHTMLCSSStyleSheet::HasDocumentStateDep
 
 // Test if style is dependent on attribute
 /* virtual */ nsRestyleHint
 nsHTMLCSSStyleSheet::HasAttributeDependentStyle(AttributeRuleProcessorData* aData)
 {
   // Perhaps should check that it's XUL, SVG, (or HTML) namespace, but
   // it doesn't really matter.
   if (aData->mAttrHasChanged && aData->mAttribute == nsGkAtoms::style) {
-    return eRestyle_StyleAttribute | eRestyle_ChangeAnimationPhase;
+    return eRestyle_StyleAttribute;
   }
 
   return nsRestyleHint(0);
 }
 
 /* virtual */ bool
 nsHTMLCSSStyleSheet::MediumFeaturesChanged(nsPresContext* aPresContext)
 {
