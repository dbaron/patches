Add fantasai's tests for bug 234686.

diff --git a/layout/reftests/bugs/234686-1.gif b/layout/reftests/bugs/234686-1.gif
new file mode 100644
index 0000000000000000000000000000000000000000..43cf6cc05b31bb3ca96e67e5d8132dda68b1cfa6
GIT binary patch
literal 1097
zc$^(mZ)nza5Wlb&k`{q40)=@lkxX3}jV7~sVOewO3~TGf$eV$ni+o{$S>T}*rA>+^
zA}L)^^M%ON;hZ9Mq^3?=Akk2_cJaK(){9n=5*kl;-!DAR@5gc9`~17#bImInp6qOa
z7Pt+0r2M2jq`X<2QR^L=Bm_nf1Vu0eM*spOAOa>30wpj4CjbUyAO>a-24ye?=bVfJ
zB)|ni1x&yLO92%~ffYnS6->buzyJ-%fDObz4a~p|zyTe|fgQv_9n8T!I0wg|6UYG)
z^WtiBB}+siBt{Y>MKUBW)T11SiG)arjL3@~<g7B2Fe#HUc@c?{tt=!$Dr7=ll%wW-
zRuUyuG9@o|pyg0D5+gM-BQGAIClWh}lRBA`r*YwKj0?}wd`;1zFI_`SY(^0jMKKgF
zR$>wljzK4o10?39zsSjwS%gJdjKz!Tn2k}(qY<u%mn2YA4{KIc#Z<h+gO(!MvQ;gX
zLA+#!p32$tzPgx;XOOWMAurO7rpPejiexfH#PotOCn}nud5IR&@^Cj{H0=o|GH>K`
zjXANE&Dgvw0j9)IlY}(s1afW$YWmBXELF|aysQi6$he)<qg=f+srqGTug0=ep;{i*
z@)l>#zxS4pU}65{Hvv<taL?3p&#pn(F*v=p<Klx~e7j@HoSN64U)=f3?iq`l&fT0`
zfBwB$%eUQq<k)K~cGkA;nY;h$+~)TewS0Y`xxe@O&l<K&j9%(L)VlBSB|m*Mzh~Zy
zJr8|2y!7;653lW^-F2&0)>mHI`^xrBV?!qnkMwb8Tlcp5iSLd-{mF*=cMaUUwy*W`
z>phKcF1&Gc>)#V&mrwSMe<M?-)x0ox^p~?A%vkX1mBC|`3rl~yZ%<eIqde5LsJeIh
zss3Nj9(b(1t!rT8x+`BD*)@FkR{!rK?=Ih5)BQw!=Z_m#UFbbBbKsA0+c|Ca>NA6X
zRxW<JVBPADfwezxdAqT%;b83>Cr{668+qX1soQ?z{PB6ibxm(={dlZ<W$Sp`{El1W
emF-QN@6=uXr}ECSA7($b?7z|dC)!^oX#5|Y$KYlF

diff --git a/layout/reftests/bugs/234686-1.html b/layout/reftests/bugs/234686-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-1.html
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* none
+     *
+     *                  wmin     w       wmax
+     * |------------------+------+---------+------> width
+     *             hmin          h   hmax
+     * |-------------+-----------+-----+----------> height 
+     *
+     * target: [w, h]
+     */
+
+    #img1 {min-width:   60px;
+           max-width:  105px;
+           min-height:  45px;
+           max-height: 120px;}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-1.gif" alt="" id="img1"></p> <!-- w=75  h=75  -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-10.gif b/layout/reftests/bugs/234686-10.gif
new file mode 100644
index 0000000000000000000000000000000000000000..491183699e0c551a2c540895a525f009759a7ae9
GIT binary patch
literal 2771
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

diff --git a/layout/reftests/bugs/234686-10.html b/layout/reftests/bugs/234686-10.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-10.html
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* (w > max-width) and (h > max-height)
+     * (wmin/w > hmax/h) and (wmin/w > hmax/h)
+     *
+     *                  wmin   wmax      w
+     * |------------------+------+-------+--------> width
+     *             hmax                  h
+     * |-------------+-------------------+--------> height 
+     *
+     * target: [wmin, hmax]
+     */
+
+    #img10 { min-width:  75px; /* 25% */
+             max-width: 150px; /* 50% */
+             max-height: 75px; /* 20% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-10.gif" alt="" id="img10"></p> <!-- w=300  h=375 -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-11.gif b/layout/reftests/bugs/234686-11.gif
new file mode 100644
index 0000000000000000000000000000000000000000..acf40cd71c3d2a8cbda80ff97ac6ad9fd8fac114
GIT binary patch
literal 2137
zc$^(m30Tcp8$XOm8e<G5TI58kPmQrOTuI-tjBZ8vn8_65NQyR<Ez8Flk{T+@C`vl1
zxzT3HP^p}>YoUyCi8-W2MYqC@m^=S-&-473=Y7t3f7^Q;92d)Gum1o(05uScXdj~e
z5bYn6Rufa)Q6UI01Ox&K0fT@;01$u(AOtW11ObWwLx3XyFn|~!3@`=+1BwB|fMd}a
z5`YN6S_n!2BY;a-6hI0P1(*Ut0i}RZz$pL>Kn4&4m;u57Wq>ij82}tW4iE>J1Hu92
zfN{XN#987f(UFiP5UHPZRN5t2LWmGV7$O1@g@{4KwbZ4uv@k*hA&L+~h->vgEUFkI
zf)T}tVZ^l}ArV_KL4+Vm5F?0dl|w4dV~Pkxlp;nE*V+M@Xo?vk3{i#{LtN_-<N^tE
zL^z@xF^;$}PI6ajCwV5!r$V%(Pq+r5z{ZdeNGK!>60Wrp3gQw+iH?LUfk^#?zYq(S
z7!!gC#e`wPwWdR{QL2eWrEm%1+9V(qdN37LN(rNcYvX}Th{Q~6rA!(I!nK(}E|g;~
z&QnepCtL(6&4naSN?Y0_WhliZB_mRVP<Vl%=tv=Bka2CaP*^UxD`2RwM{+{s4Y6<y
zV}VUEW0-O65I`YOQX>daK}SLslL4vl7gNEKQpPCb+HrxRrF2?Qm&%#}6{RVXc8xSF
z8lcgBG}=FDnZ6&Qy#&_cCGG^!)qp{|#`2M|MF(|<O&LNin`RyQe7w_H`IU)3gnwq`
zG3G*0a%nVN7~mOFx1sX*xVZ|uVbfEpV!w1q^Q#Ott&X3%v0;^L^yIq<Ut4sPIF8x0
zINA943F|vH3df{nlRvB(b}H?!3rpii6!<)N){wE}mhCIs9X`vmY|<5<8|nN09Pgy`
z`X>IK|JrQtf=Bb@uCJ>Kbq4*nsngZ$S&?V=^QCF}0nLerg7nVql?5-W*fid|Y|or-
z_v)CfCW^DNYd_TczMblougvzSQOrLd_DQ+DD<@|{{HwjIc6L9W;C(RblaXvoL)yyG
z4gvYOeQo!WofBOO^4@kn%=Z1ew&13^n-?F^OjuT!|GuyNe)_t*g#`m@RdZG1vRj4!
zFS)bstHv#J^Hl%z*Ufsezx3O~^+C>m{=`Z0_p9Ufk7zA#^r`N-!9%}V;D8T}bJATO
zW@K_Y{($km_Vr|7yCvObI`QH2@COC$?h%HIb3E`E^V3a{mV^7x9yRNbk3TjySSR^c
z<<}8rJDl9wM;}-|WAldJWM2Kvzk^oGl#}jh@{N(uV^>myUD(5vSbN)@UZ*U6F=&nV
ze`?Woc3Z>dwuF$@i*4ujzI)l0NOY#O(@=e%_M~w0v`q=V?_}nuEoOCirFhuyGK+Qm
z>CxnPI~O;FB2usQW$cNxix-ci{&L47ZDxSp%hbTBw)z{>&y+d&Y*ajo+ZdIt^Rv|-
zdG@v)Sw(J6>1m!%-7?aP?S0JC3!QTPE=^zH{vx2l)@ehwP0XV;7q;emS@~qKn8*Lg
zy&N~ta=z<&=j)rQGOO<VHx0hs1^un*-Gv|Db#~tZL#<V8$XGvBk*-CC>h|#2U8>@d
z4%R&-V_f}uO2>I;^pqLz?CL3phpl@n%wqj|D=kwqdhb}@=<2PSR&L!_ZPV!2S0ii7
z=&QYJr|#OC#N8?b@1?J}=~=p{YRc5CFD(3DTv@)d%jWuubyi*X8VqG`A1w8*X=!-u
zF)#Cfc&63$yb}F_YxmYhKk-qHE&kNkw5`!!{UoF<Q~h+WI`c}Cd{1QSs>K_8f|SJh
zTUqKd2lqcq!oSPPRQe~s^2>=fGRb*7-`qav#aZ|9J6c}GJk4p(igM1o8e`Pi-<jx~
zmG}3x#(;rWIc-@3uk+P~H`|U?Ma}7QurkSOxSgFjtvxff_DyePdcu32ym0@=#=69t
zyB{f5F3oQ(o9!Ci@%FEk0R{b@-nU*WpR99P|E#4vb6;Fx;}*@Q{<ce+e?F?ar3*Zq
zf}wIY*ic1um(amuE0~V0>erD+=@1Kfk)E6Cz_@CvGrOW_#BS9=I6O($K_kCCDoz!;
zbFj(5igMWpgTuRCbvE>o<l8@92@L*ziN1PuYQfmr=s@2i_iyZ5J<o8|ibeN*O&j-y
z6e|s`L=-O^|8ZNp{hPHz!|bZhf04MUv|D-k$c3tB>DN}5ngmY|tKGA1WKD?C^kA#V
znyr)aDl8YaBpi<l^qi!pt|+(v&=XCDr@)#?<)#bjqWtYVOwZ_+J^!)uSbg95QAbY8
z<sEf4tDBO{V?)Z9HmnFgx~RF|a9E+ki5dIqZClKaTUJ(na{67lyLn7dNQvw7pqQ&`
znqL}MR(+FJf9hgr%VQsdYWK3>sB_iLQ=OGn-|1za%3U&X+EB+DAGf}^ht-N%mvSqt
zTw>}@yRI^uUc9;TtwC?BTihR`ts-g-uJ)Z-Z=AY4@4ZXl4wrL^Q16)+`)4}Z)X$uy
zDM^u4<(BR?A01oq(QC$MhK6Bo<|p+cEhi89?XKyU*Al{0Ea%VJygXvcNjPW_nENjt
CG!+E^

diff --git a/layout/reftests/bugs/234686-11.html b/layout/reftests/bugs/234686-11.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-11.html
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* (w > max-width) and (h > max-height)
+     * (wmax/w > hmax/h) and (wmin/w < hmax/h)
+     *
+     *         wmin            wmax      w
+     * |---------+---------------+-------+--------> width
+     *             hmax                  h
+     * |-------------+-------------------+--------> height 
+     *
+     * target: [hmax * w/h, hmax]
+     */
+
+    #img11 { min-width:  25px; /* 10% */  
+             max-width: 225px; /* 90% */
+             max-height: 75px; /* 30% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-11.gif" alt="" id="img11"></p> <!-- w=250  h=250 -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-12.gif b/layout/reftests/bugs/234686-12.gif
new file mode 100644
index 0000000000000000000000000000000000000000..0604d430a0717e2ca7c1cb36eaec1531fd0d1bcb
GIT binary patch
literal 2699
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
K*>6}FIP`y~p-Tq<

diff --git a/layout/reftests/bugs/234686-12.html b/layout/reftests/bugs/234686-12.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-12.html
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* (w > max-width) and (h > max-height)
+     * (wmax/w < hmax/h) and (wmax/w < hmin/h)
+     *
+     *             wmax                  w
+     * |-------------+-------------------+--------> width 
+     *                  hmin   hmax      h
+     * |------------------+------+-------+--------> height
+     *
+     * target: [wmax, hmin]
+     */
+
+    #img12 { max-width:   75px; /* 20% */
+             min-height:  75px; /* 25% */
+             max-height: 150px; /* 50% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-12.gif" alt="" id="img12"></p> <!-- w=375  h=300 -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-13.gif b/layout/reftests/bugs/234686-13.gif
new file mode 100644
index 0000000000000000000000000000000000000000..acf40cd71c3d2a8cbda80ff97ac6ad9fd8fac114
GIT binary patch
literal 2137
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
CG!+E^

diff --git a/layout/reftests/bugs/234686-13.html b/layout/reftests/bugs/234686-13.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-13.html
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* (w > max-width) and (h > max-width)
+     * (wmax/w < hmax/h) and (wmax/w > hmin/h)
+     *
+     *             wmax                  w
+     * |-------------+-------------------+--------> width 
+     *         hmin            hmax      h
+     * |---------+---------------+-------+--------> height
+     *
+     * target: [wmax, wmax * h/w]
+     */
+
+    #img13 { max-width:   75px; /* 30% */
+             min-height:  25px; /* 10% */  
+             max-height: 225px; /* 90% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-13.gif" alt="" id="img13"></p> <!-- w=250  h=250 -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-14.gif b/layout/reftests/bugs/234686-14.gif
new file mode 100644
index 0000000000000000000000000000000000000000..d50d7ae12cce9a24c958428a025561ee0f8e602d
GIT binary patch
literal 888
zc$^(mJ!_Rw41R<n1((*XQY1x%4i2Rb794z_XuYGLlS>>#Q3ugK5D}{A;NT!`K}vss
zlXZ&d;s>1^J4A7Ex`QC%a81sEd*7Fkljke%*5u;G+3QPK!XNap@w4%;@fLLsV)yfu
z0u`9R1tCZQ2q8!)VT2PwBmspes8EF|ToH=Yo-76$bU?Tv3|UwXanPX-bGRcM=|DgN
z3~0at9*95&kdOouny`c?B9U2~i(}C#<N~RAb+x*hr3fihp$T0W!W`7ATt`VGoeVOE
z9?`C<(v+?YWe$;I-Ks`2x-pD7l#BO$b(+(i;ml!&L=V-V1w9zS93DwFk|r(b$w+1!
zSMJuh@~qAG7G3(<HIc?vF%xsK5X)huH1XnCbPBmZYF_&*+ALMg)Lbppa+ogNShYT0
z;hN=0LcH~;ch%j(Ek`^OEmEUfJ!%;&M`n_(T(j?cTBKzMS$k3PD(z~j3@ffmrc)GY
zFI0M>ON2y@Xr(PLcN@mro^qn|7H!v58{0KPBgYa*ODr`_$eT_f_hyK<zv|7>J;Ec$
zx=4?#+fBX7vwu_fozgz5Wtm|%9<%XQXXWqQ_y|t-Uw;#rzluY7bamn7`-k&Kj-Pxo
z^$(91R@SfFy7y!A+2WboAK$KhzwrFn=F{cLo1ITDR!`ht-dn%1wSDT^yWf{C?|gl=
d@!;3N-r~<M+vo4>-<^EBx&M0Y(cw9q`wvMlZi4^-

diff --git a/layout/reftests/bugs/234686-14.html b/layout/reftests/bugs/234686-14.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-14.html
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* (w < min-width) and (h < min-height)
+     * (wmin/w < hmin/h) and (wmax/w > hmin/h)
+     *
+     *            w       wmin       wmax
+     * |----------+---------+----------+----------> width 
+     *            h           hmin
+     * |----------+-------------+-----------------> height
+     *
+     * target: [hmin * w/h, hmin]
+     */
+
+    #img14 { min-width:   50px; /* 200% */
+             max-width:  100px; /* 400% */
+             min-height:  75px; /* 300% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-14.gif" alt="" id="img14"></p> <!-- w=25   h=25  -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-15.gif b/layout/reftests/bugs/234686-15.gif
new file mode 100644
index 0000000000000000000000000000000000000000..5223b02e51994f85b21554d25f6d91fd775beb71
GIT binary patch
literal 923
zc$^(mJ!q6+41O#f94Zb6qJj`n5K0FT!Q(`XP|lVvLKl}x#8FT|6bFZZii03@se>It
zTPr6xwCWxTqLw;|xHtq+5U1ke-*6`H3wPf~$eZUc-`VMY_r%3x*oR-JqwS~dq3zA{
zeD>ANZ6*jo2}W>25WpY?GlZcGV>lxi5RiZcB2a+|To6)|Nx=$f5T<ZNB$j~;Y!HJQ
z%;1JFz(Ednh(jIba7Q>0pa2IXpaBbbAR;*@$E1_U36k^jYIYS%B4%PCR$?P|;%L;f
zoJW|I*_fR<njVs>im(csunR{MNm{L<tjebB%F&dQ)qOEmV>5Q+Xm*g-P;pjgb9U!w
z9#IsM1Z%JbdvKI->28io&&qr&(W$RoBPwhmRZ=5$(r8vv5l@auCy^5*=as)C#Zp97
z)I?o0n(0)HS*v3iu4=R-$V!h`Rn62*qs2pBBE_rKJeNVEWkylTCF;I~dT3OTxfdxf
z)6S;MFyqQ(Dn+95LZ~JhxsykWmdf&Uw_vR7Nhd0Al5$O?uua^>qb&iI#8gv+tmq_i
zZ3bESD^@Jc+|8q{3)RTHUDUHY{I_kklG=y4EJF<2W7yvE9Q-rdK7xt*t8W53Z(#@g
z-VB|&Guj!Se0$9{?(f>&yFInG^!mZxPJg1i_N9M!&*__6Q|pKO^G6O`85^uWdH3k(
zrOn0Z7pw0dcdu_u4rZ5U9-g}TbF6p#`_@u#e*fI&%fW}I=Pr-W{qC&1d3I>|!s3tF
VrBBb#zgqbE_r|x6>lhiq$^ZBUfg%6^

diff --git a/layout/reftests/bugs/234686-15.html b/layout/reftests/bugs/234686-15.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-15.html
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* (w < min-width) and (h < min-height)
+     * (wmin/w < hmin/h) and (wmax/w < hmin/h)
+     *
+     *            w       wmin       wmax
+     * |----------+---------+----------+----------> width
+     *            h                      hmin
+     * |----------+------------------------+------> height
+     *
+     * target: [wmax, hmin]
+     */
+
+    #img15 { min-width:   55px; /* 110% */
+             max-width:   75px; /* 150% */
+             min-height:  75px; /* 300% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-15.gif" alt="" id="img15"></p> <!-- w=50   h=25  -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-16.gif b/layout/reftests/bugs/234686-16.gif
new file mode 100644
index 0000000000000000000000000000000000000000..d50d7ae12cce9a24c958428a025561ee0f8e602d
GIT binary patch
literal 888
zc$^(mJ!_Rw41R<n1((*XQY1x%4i2Rb794z_XuYGLlS>>#Q3ugK5D}{A;NT!`K}vss
zlXZ&d;s>1^J4A7Ex`QC%a81sEd*7Fkljke%*5u;G+3QPK!XNap@w4%;@fLLsV)yfu
z0u`9R1tCZQ2q8!)VT2PwBmspes8EF|ToH=Yo-76$bU?Tv3|UwXanPX-bGRcM=|DgN
z3~0at9*95&kdOouny`c?B9U2~i(}C#<N~RAb+x*hr3fihp$T0W!W`7ATt`VGoeVOE
z9?`C<(v+?YWe$;I-Ks`2x-pD7l#BO$b(+(i;ml!&L=V-V1w9zS93DwFk|r(b$w+1!
zSMJuh@~qAG7G3(<HIc?vF%xsK5X)huH1XnCbPBmZYF_&*+ALMg)Lbppa+ogNShYT0
z;hN=0LcH~;ch%j(Ek`^OEmEUfJ!%;&M`n_(T(j?cTBKzMS$k3PD(z~j3@ffmrc)GY
zFI0M>ON2y@Xr(PLcN@mro^qn|7H!v58{0KPBgYa*ODr`_$eT_f_hyK<zv|7>J;Ec$
zx=4?#+fBX7vwu_fozgz5Wtm|%9<%XQXXWqQ_y|t-Uw;#rzluY7bamn7`-k&Kj-Pxo
z^$(91R@SfFy7y!A+2WboAK$KhzwrFn=F{cLo1ITDR!`ht-dn%1wSDT^yWf{C?|gl=
d@!;3N-r~<M+vo4>-<^EBx&M0Y(cw9q`wvMlZi4^-

diff --git a/layout/reftests/bugs/234686-16.html b/layout/reftests/bugs/234686-16.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-16.html
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* (w < min-width) and (h < min-height)
+     * (wmin/w > hmin/h) and (wmin/w < hmax/h)
+     *
+     *            w           wmin
+     * |----------+-------------+-----------------> width
+     *            h       hmin       hmax
+     * |----------+---------+----------+----------> height 
+     *
+     * target: [wmin, wmin * h/w]
+     */
+
+    #img16 { min-width:   75px; /* 300% */
+             min-height:  50px; /* 200% */
+             max-height: 100px; /* 400% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-16.gif" alt="" id="img16"></p> <!-- w=25   h=25  -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-17.gif b/layout/reftests/bugs/234686-17.gif
new file mode 100644
index 0000000000000000000000000000000000000000..dc7651c133068fcee37a6b3ea02f8563d5d9fead
GIT binary patch
literal 936
zc$^(mO^D865dSHME#>RNI%tUYJs_d%<}$WeyKP&F*rG<OWN%W=BbMY~BlbX=Wo^kx
zdr&UM!C|-dw#tDT2NyZG_=<YXJWsvv|KBvv{J!QtG<>xG;JIGx!!Oj)_S5#z_U3s$
z`ux&&CI~?ZMsPw9z#s-QgrN*$I3pMkkbnguP=N_t5K@y#!3t>*rf@|hmVpdx5Q7@b
z;D#{3K@N6^LmlRDM>r6m00$(X0SkB_A~`3=q?5=AlJoLvb`?t^W?~^$Vk36qXw<Wu
zN0^n_n4LMA9+IkxunL>73r7=4TCJk2%BJkf(Ug<beKA&JGj`)>c97RlaaLz@cIRjw
zQ52E{Yp?}-aFlWBZjMXO%6u!)sjplkDr_NDQX_TJXjW1YPmW0^krO26mA@p#QbbkM
zL|rtR=~Rtbt793iYP2NCN{?7o&D2e!#Y0{q#jDjkmqDXtMp4Qo>b`|~XjG877b!2(
z&Zf*T<H}?zMWXUTs3sb@lShk|%JOu#V65y(Cn|4}a!sVLP29z!EdiCpR8xek=p=G&
z23h$lRxHij&7-Xg)yTYE)U(|E``v6VwRdw_y6Cn?x4q@r_Gfkb2zJ$9eG}-J!m8NV
zSwHjkYR{UjJNl<*2d}MNH#pjP`Q+X0&HE?keos#vxw&EIjWfqCJzc!lH#By>vu}3f
z&hGIikA@fKmml_D{`zrop>Jts%i#y311lHCtaobZz^#?e^8BXz+y9NPJb(Y<^upw)
m$sf;7&76F*=gaHk-%i|Jy?o{R$j^xnuP%Ome0E?j;n07fbcc-q

diff --git a/layout/reftests/bugs/234686-17.html b/layout/reftests/bugs/234686-17.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-17.html
@@ -0,0 +1,35 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* (w < min-width) and (h < min-height)
+     * (wmin/w > hmin/h) and (wmin/w > hmax/h)
+     *            w                      wmin
+     * |----------+------------------------+------> width
+     *            h       hmin       hmax
+     * |----------+---------+----------+----------> height 
+     *
+     * target: [wmin, hmax]
+     */
+
+    #img17 { min-width:  75px; /* 300% */
+             min-height: 55px; /* 110% */
+             max-height: 75px; /* 150% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-17.gif" alt="" id="img17"></p> <!-- w=25   h=50  -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-18.gif b/layout/reftests/bugs/234686-18.gif
new file mode 100644
index 0000000000000000000000000000000000000000..c19e7f6c834908520d89009cef2b7b0e378e5b4f
GIT binary patch
literal 1094
zc$^(mZ)nza5WmriN~#w|NH5}CCLs+nA;tc1jxgsmuvb}97w$z#k+vm4+q#exB8%Bz
z%q_TvJxPvLtF=c*^H>-;QTmI4sV7S;LtK=WMn2trzwkW2AIE*~^Y4BSH!okZ`00C~
z75;`iQhrh%Qr;}i&sLe5Ap}Mc1Vu0eM*spOAOa>30wpj4CjbUyAO>a-24ye?=bVfJ
zB)|ni1x&yLO92%~ffYnS6->buzyJ-%fDObz4a~p|zyTe|fgQv_9n8T!I0wg|6UYG)
z^WtiBB}+siBt{Y>MKUBW)T11SiG)arjL3@~<g7B2Fe#HUc@c?{tt=!$Dr7=ll%wW-
zRuUyuG9@o|pyg0D5+gM-BQGAIClWh}lRBA`r*YwKj0?}wd`;1zFI_`SY(^0jMKKgF
zR$>wljzK4o10?39zsSjwS%gJdjKz!Tn2k}(qY<u%mn2YA4{KIc#Z<h+gO(!MvQ;gX
zLA+#!p32$tzPgx;XOOWMAurO7rpPejiexfH#PotOCn}nud5IR&@^Cj{H0=o|GH>K`
zjXANE&Dgvw0j9)IlY}(s1afW$YWmBXELF|aysQi6$he)<qg?xUMs-(cuf?*|pjIBW
z@)l?ArTX#_+?9X%O~AD^r~`Yw1($89pS|FruQ%%Cwi|A`zJ1Ogr<&fF)A(f1ou4!`
zZNGZa*7}2+T35V%<Fdhd&yF-4>b-mY)Ijs6mBal@+9uaE@AzP4_w3gyKm7X6?r#Qf
z>2A7zLC^c&ZExImc3|b`hd=IltnI<o)zQ{3hu5@R`D<zS(D#)G`gX1!-~8N9LmQ{3
z-fbBhK0f~PpJ$IB8vE$vez|JaZL6vupW4Hl23K{oEqr|Ftz!*c9o3Q3``&zhdDpD9
zjb{$FE;@R1=ibkL>)W;FmCe^J-LRprf9(^Uo%=pNcdXj>`-#KjW9LuWmh;!Nbd0VT
z8|mFz8R*&j;?X1T&F}46SAA*nz#WU98vgH6`|wu>ZoU27BVVj<pZVq6S0|2KdEw%P
c6ALG56ZbxI`SPRF{rhVdr~lbqR|og~52QoqLjV8(

diff --git a/layout/reftests/bugs/234686-18.html b/layout/reftests/bugs/234686-18.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-18.html
@@ -0,0 +1,34 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* (w < min-width) and (h > max-height)
+     *
+     *                           w   wmin
+     * |-------------------------+-----+----------> width 
+     *                  hmax     h
+     * |------------------+------+----------------> height
+     *
+     * target: [wmin, hmax]
+     */
+
+    #img18 { min-width:  75px; /* 150% */
+             max-height: 75px; /*  75% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-18.gif" alt="" id="img18"></p> <!-- w=50   h=100 -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-19.gif b/layout/reftests/bugs/234686-19.gif
new file mode 100644
index 0000000000000000000000000000000000000000..5595947c8262a4612d23d4251bbb5a34cfb3b9d2
GIT binary patch
literal 1065
zc$^(mU5J%s5T0}iY1NCg5D^^pCP7Fvbj7H_MNN--V_sysjI1u~g=|-wYlTxmWa5=z
z7rCbqfAV+JY<JZ~8gMV{$gUE!25L^Eh(C#@Qt8EM=6&Iu?_-#Ep1=8)E?d$xf5S$Y
z1OGrCDL*L>DQ_0%njNe?Bm_nf1Vu0eM*spOAOa>30wpj4CjbUyAO>a-24ye?=bVfJ
zB)|ni1x&yLO92%~ffYnS6->buzyJ-%fDObz4a~p|zyTe|fgQv_9n8T!I0wg|6UYG)
z^WtiBB}+siBt{Y>MKUBW)T11SiG)arjL3@~<g7B2Fe#HUc@c?{tt=!$Dr7=ll%wW-
zRuUyuG9@o|pyg0D5+gM-BQGAIClWh}lRBA`r*YwKj0?}wd`;1zFI_`SY(^0jMKKgF
zR$>wljzK4o10?39zsSjwS%gJdjKz!Tn2k}(qY<u%mn2YA4{KIc#Z<h+gO(!MvQ;gX
zLA+#!p32$tzPgx;XOOWMAurO7rpPejiexfH#PotOCn}nud5IR&@^Cj{H0=o|GH>K`
zjXANE&Dgvw0j9)IlY}(s1afW$YWmBXELF|aysQi6$he)<qg;RfP<4N3ug9{~p<W*K
z@)l>>e+}g$n3aF|O~9BsyfCIgj$+TJ4dbT2apA<?^Pe@oGJfNvM|&4<A2oB;;Fq(f
z4ep#ew`IzEkMNyc)0eKD_4D8RYhTZ9t?gNM>fq2fO&xtJw*N9?sQazTaKn+4t(SK#
z+Vt|RLlX|Kt}fWOynA`?ku`fN&CjMhd-B@52iEWCoLCuY8>z1Bs-CO$9lzTD!JoD6
zN`KGwfh~{kUccD?{f(bwbmQ)=^X~AED;B)k*){3p$PYVbRN4mqz4u40b;8@#`=?KB
z7}n<VgJUPpZ6E$_@zIu{v%UAOoM^pRT{+PA*V)6{zWDXn`<t&^TlY!hjh8x`ZeG3c
ubkyq)db`%%{_4Yyo-=Q@J-zwct(I+P)*ooU)BSn#i{JkK(Z`nr7XA-^(bH4_

diff --git a/layout/reftests/bugs/234686-19.html b/layout/reftests/bugs/234686-19.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-19.html
@@ -0,0 +1,34 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* (w > max-width) and (h < min-height)
+     *
+     *                  wmax     w
+     * |------------------+------+----------------> width
+     *                           h   hmin
+     * |-------------------------+-----+----------> height 
+     *
+     * target: [wmax, hmin]
+     */
+
+    #img19 { max-width:  75px; /*  75% */
+             min-height: 75px; /* 150% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-19.gif" alt="" id="img19"></p> <!-- w=100  h=50  -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-2.gif b/layout/reftests/bugs/234686-2.gif
new file mode 100644
index 0000000000000000000000000000000000000000..deead66ac0766ee540d43c1d017b78be5b9e6485
GIT binary patch
literal 1497
zc$^(m3s96*6h1zt6w_pMoQ5&FXy67;4=CS5cPvcO%JD@igI6>H#6;8;A?<3qg5e8r
zVHSg<D6W7)it8ev*Dx}4QpVI$&<hB{GJ;R=#ccQfcV_qh=ghh1d!7G_&}kFKFR_9Z
zdO#m;{J8Pp#+y*5UKG?mpad8JP5=oA0+IkwAQUJCMuAg63W9>901OBN%78K843L3f
zAeo*_I8YAEfItp{gH%`u1c4$j1df0R0zo2x03v`2U;?-R6d(jh0U&`$pc0q_E&(M7
z2~sM~ild^VkQIoUr>?3l&5{sG31x(GLXl8Gs5GdnvO0`XPAO6<D3yjD!gQ4}${9sQ
z1*6gsNw{uhoN`W)Q^Bb;loQnV8B&fEkqV^Ju!9IalnKfOML~t2((s5#jl?A7lA@$S
zQmKto?y7OhGi^R<(Mq3ojS!8^2<L<&;ev2!SV=T-#Zl2w$O=Tw)BX~sSu(~s<H)#R
zTpFem-Kc8%pbD3BX(T~V>tU#?h+H6-Mm$7lkxb}T6lxi`G%_PnD`!&QN6CfcQU|H_
zLdjEUt0tA9ic2M<QzS%t!HAxSL<l0J5iQY{D|a;vYI~FuI&Z?XYm8}ZWI`|@jU^yj
zqEe#?p{Apd^=1&%{xZ}o5rse@jddY<q`IxCtFrs$1H^+$yIU=b8{EdjZM>=D^Sr<D
z5scM;`kR0OZs;>$WJ(d9+th#Xh|f*4_E&EkIy$ibgZRi0i)T>ml$5&tA-jf6_J1{D
z_T8EcU(blS1JiwLvz*ft)=UgqR&5<Pr*+Hv*{xGEK8<<wPg{`Rto(5+U2_*^v|mXJ
z$@kuHI^p|SMbk6pueI$Bn71$dkVmhFHS)isK6Qn@0T1op7RQxX)=vK9SVKkPV^_n)
zQzduK@_vK7XF5w8t5b#rL|k${yn1T&pEtM0nPXZiGwY&)E7qO(?o4h@LCdT1poZT<
z#^lx5GM~nltorO?Ra%(&M%|&+OE-S?a$NLn+op`$I~F=4ZXJ0$VDaCT<&W=O$)Az;
zb=B#o9sh2-9Fbh_Y`gPE_3|^<I&YOdyAZ!LId4bh`?tE&ujO?$cvbb@F1)vTOlMN?
zt0!GY!y?wb*!%RIxIQE7i&pgY%WC*}=rmK~mf`cG8@Ij{WpA{MG`BTwBNkIr%DdL+
zrc_gby=nVcM_bb`AJ&+f(>}f)-MnK$tG#*Wl<v0XU7p@4i&Lh0q(<%;e7eUc-DBgr
zQ5n4<sWLs(;kaY|X8u63JKWsflEo}B`}Zsu_gAiUPSSvu4PiT-ejEC3e-@Q9WOhvJ
zie<L!!`VM}_q5;3<FCc$X2#dN-n8%TwIhBu=frZ%N$U(9bzqnOO`k(Mqb9wVzuD|+
zKa3WCm;InM)^)^QQ0OWwcDP(cr8WK?#bwuHJB~VA3zzTSH>B2Y{c}&R`d_WV*8?{F
z?v*(9r?bIcaVHLhCS{df9`U8=<RjmXILDRT(BkyPOLEX*>x}IzZ!1W?d;E=!%S{Wi
zBg^kQ8-`pcKG~Bx=!1%@(`r|qT(fz`yvpv{<dve!(os^e$p2Ejt)IK7^Zf9zxR1;)
zCe1u{?*0#HhtEH03J6T}zA-+qv_5xA*O@oR*RDF(>zJ8P<u|%M{(Rue!h|w%BK)|h
Kaf}=alm7=M%)?Ir

diff --git a/layout/reftests/bugs/234686-2.html b/layout/reftests/bugs/234686-2.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-2.html
@@ -0,0 +1,34 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* w > max-width
+     * wmax/w > hmin/h
+     *                  wmax     w
+     * |------------------+------+----------------> width
+     *            hmin           h
+     * |------------+------------+----------------> height 
+     *
+     * target: [wmax, wmax * h/w]
+     */
+
+    #img2 {max-width:  75px; /* 50% */
+           min-height: 60px; /* 40% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-2.gif" alt="" id="img2"></p> <!-- w=150 h=150 -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-3.gif b/layout/reftests/bugs/234686-3.gif
new file mode 100644
index 0000000000000000000000000000000000000000..bc766fa906f77361800c148e6098b0a62099daed
GIT binary patch
literal 1826
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

diff --git a/layout/reftests/bugs/234686-3.html b/layout/reftests/bugs/234686-3.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-3.html
@@ -0,0 +1,35 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* w > max-width
+     * wmax/w < hmin/h
+     *
+     *             wmax          w     
+     * |-------------+-----------+----------------> width
+     *                  hmin     h
+     * |------------------+------+----------------> height 
+     *
+     * target: [wmax, hmin]
+     */
+
+    #img3 {max-width:  75px; /* 25% */
+           min-height: 75px; /* 50% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-3.gif" alt="" id="img3"></p> <!-- w=300 h=150 -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-4.gif b/layout/reftests/bugs/234686-4.gif
new file mode 100644
index 0000000000000000000000000000000000000000..d50d7ae12cce9a24c958428a025561ee0f8e602d
GIT binary patch
literal 888
zc$^(mJ!_Rw41R<n1((*XQY1x%4i2Rb794z_XuYGLlS>>#Q3ugK5D}{A;NT!`K}vss
zlXZ&d;s>1^J4A7Ex`QC%a81sEd*7Fkljke%*5u;G+3QPK!XNap@w4%;@fLLsV)yfu
z0u`9R1tCZQ2q8!)VT2PwBmspes8EF|ToH=Yo-76$bU?Tv3|UwXanPX-bGRcM=|DgN
z3~0at9*95&kdOouny`c?B9U2~i(}C#<N~RAb+x*hr3fihp$T0W!W`7ATt`VGoeVOE
z9?`C<(v+?YWe$;I-Ks`2x-pD7l#BO$b(+(i;ml!&L=V-V1w9zS93DwFk|r(b$w+1!
zSMJuh@~qAG7G3(<HIc?vF%xsK5X)huH1XnCbPBmZYF_&*+ALMg)Lbppa+ogNShYT0
z;hN=0LcH~;ch%j(Ek`^OEmEUfJ!%;&M`n_(T(j?cTBKzMS$k3PD(z~j3@ffmrc)GY
zFI0M>ON2y@Xr(PLcN@mro^qn|7H!v58{0KPBgYa*ODr`_$eT_f_hyK<zv|7>J;Ec$
zx=4?#+fBX7vwu_fozgz5Wtm|%9<%XQXXWqQ_y|t-Uw;#rzluY7bamn7`-k&Kj-Pxo
z^$(91R@SfFy7y!A+2WboAK$KhzwrFn=F{cLo1ITDR!`ht-dn%1wSDT^yWf{C?|gl=
d@!;3N-r~<M+vo4>-<^EBx&M0Y(cw9q`wvMlZi4^-

diff --git a/layout/reftests/bugs/234686-4.html b/layout/reftests/bugs/234686-4.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-4.html
@@ -0,0 +1,35 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* w < min-width
+     * wmin/w < hmax/h
+     *
+     *               w       wmin
+     * |-------------+---------+------------------> width
+     *               h              hmax
+     * |-------------+----------------+-----------> height 
+     *
+     * target: [wmin, wmin * h/w]
+     */
+
+    #img4 {min-width:   75px; /* 300% */
+           max-height: 100px; /* 400% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-4.gif" alt="" id="img4"></p> <!-- w=25  h=25  -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-5.gif b/layout/reftests/bugs/234686-5.gif
new file mode 100644
index 0000000000000000000000000000000000000000..dc7651c133068fcee37a6b3ea02f8563d5d9fead
GIT binary patch
literal 936
zc$^(mO^D865dSHME#>RNI%tUYJs_d%<}$WeyKP&F*rG<OWN%W=BbMY~BlbX=Wo^kx
zdr&UM!C|-dw#tDT2NyZG_=<YXJWsvv|KBvv{J!QtG<>xG;JIGx!!Oj)_S5#z_U3s$
z`ux&&CI~?ZMsPw9z#s-QgrN*$I3pMkkbnguP=N_t5K@y#!3t>*rf@|hmVpdx5Q7@b
z;D#{3K@N6^LmlRDM>r6m00$(X0SkB_A~`3=q?5=AlJoLvb`?t^W?~^$Vk36qXw<Wu
zN0^n_n4LMA9+IkxunL>73r7=4TCJk2%BJkf(Ug<beKA&JGj`)>c97RlaaLz@cIRjw
zQ52E{Yp?}-aFlWBZjMXO%6u!)sjplkDr_NDQX_TJXjW1YPmW0^krO26mA@p#QbbkM
zL|rtR=~Rtbt793iYP2NCN{?7o&D2e!#Y0{q#jDjkmqDXtMp4Qo>b`|~XjG877b!2(
z&Zf*T<H}?zMWXUTs3sb@lShk|%JOu#V65y(Cn|4}a!sVLP29z!EdiCpR8xek=p=G&
z23h$lRxHij&7-Xg)yTYE)U(|E``v6VwRdw_y6Cn?x4q@r_Gfkb2zJ$9eG}-J!m8NV
zSwHjkYR{UjJNl<*2d}MNH#pjP`Q+X0&HE?keos#vxw&EIjWfqCJzc!lH#By>vu}3f
z&hGIikA@fKmml_D{`zrop>Jts%i#y311lHCtaobZz^#?e^8BXz+y9NPJb(Y<^upw)
m$sf;7&76F*=gaHk-%i|Jy?o{R$j^xnuP%Ome0E?j;n07fbcc-q

diff --git a/layout/reftests/bugs/234686-5.html b/layout/reftests/bugs/234686-5.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-5.html
@@ -0,0 +1,35 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* w < min-width
+     * wmin/w > hmax/h
+     *
+     *               w              wmin
+     * |-------------+----------------+-----------> width
+     *               h       hmax
+     * |-------------+---------+------------------> height 
+     *
+     * target: [wmin, hmax]
+     */
+
+    #img5 {min-width:   75px; /* 300% */
+           max-height:  75px; /* 150% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-5.gif" alt="" id="img5"></p> <!-- w=25  h=50  -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-6.gif b/layout/reftests/bugs/234686-6.gif
new file mode 100644
index 0000000000000000000000000000000000000000..deead66ac0766ee540d43c1d017b78be5b9e6485
GIT binary patch
literal 1497
zc$^(m3s96*6h1zt6w_pMoQ5&FXy67;4=CS5cPvcO%JD@igI6>H#6;8;A?<3qg5e8r
zVHSg<D6W7)it8ev*Dx}4QpVI$&<hB{GJ;R=#ccQfcV_qh=ghh1d!7G_&}kFKFR_9Z
zdO#m;{J8Pp#+y*5UKG?mpad8JP5=oA0+IkwAQUJCMuAg63W9>901OBN%78K843L3f
zAeo*_I8YAEfItp{gH%`u1c4$j1df0R0zo2x03v`2U;?-R6d(jh0U&`$pc0q_E&(M7
z2~sM~ild^VkQIoUr>?3l&5{sG31x(GLXl8Gs5GdnvO0`XPAO6<D3yjD!gQ4}${9sQ
z1*6gsNw{uhoN`W)Q^Bb;loQnV8B&fEkqV^Ju!9IalnKfOML~t2((s5#jl?A7lA@$S
zQmKto?y7OhGi^R<(Mq3ojS!8^2<L<&;ev2!SV=T-#Zl2w$O=Tw)BX~sSu(~s<H)#R
zTpFem-Kc8%pbD3BX(T~V>tU#?h+H6-Mm$7lkxb}T6lxi`G%_PnD`!&QN6CfcQU|H_
zLdjEUt0tA9ic2M<QzS%t!HAxSL<l0J5iQY{D|a;vYI~FuI&Z?XYm8}ZWI`|@jU^yj
zqEe#?p{Apd^=1&%{xZ}o5rse@jddY<q`IxCtFrs$1H^+$yIU=b8{EdjZM>=D^Sr<D
z5scM;`kR0OZs;>$WJ(d9+th#Xh|f*4_E&EkIy$ibgZRi0i)T>ml$5&tA-jf6_J1{D
z_T8EcU(blS1JiwLvz*ft)=UgqR&5<Pr*+Hv*{xGEK8<<wPg{`Rto(5+U2_*^v|mXJ
z$@kuHI^p|SMbk6pueI$Bn71$dkVmhFHS)isK6Qn@0T1op7RQxX)=vK9SVKkPV^_n)
zQzduK@_vK7XF5w8t5b#rL|k${yn1T&pEtM0nPXZiGwY&)E7qO(?o4h@LCdT1poZT<
z#^lx5GM~nltorO?Ra%(&M%|&+OE-S?a$NLn+op`$I~F=4ZXJ0$VDaCT<&W=O$)Az;
zb=B#o9sh2-9Fbh_Y`gPE_3|^<I&YOdyAZ!LId4bh`?tE&ujO?$cvbb@F1)vTOlMN?
zt0!GY!y?wb*!%RIxIQE7i&pgY%WC*}=rmK~mf`cG8@Ij{WpA{MG`BTwBNkIr%DdL+
zrc_gby=nVcM_bb`AJ&+f(>}f)-MnK$tG#*Wl<v0XU7p@4i&Lh0q(<%;e7eUc-DBgr
zQ5n4<sWLs(;kaY|X8u63JKWsflEo}B`}Zsu_gAiUPSSvu4PiT-ejEC3e-@Q9WOhvJ
zie<L!!`VM}_q5;3<FCc$X2#dN-n8%TwIhBu=frZ%N$U(9bzqnOO`k(Mqb9wVzuD|+
zKa3WCm;InM)^)^QQ0OWwcDP(cr8WK?#bwuHJB~VA3zzTSH>B2Y{c}&R`d_WV*8?{F
z?v*(9r?bIcaVHLhCS{df9`U8=<RjmXILDRT(BkyPOLEX*>x}IzZ!1W?d;E=!%S{Wi
zBg^kQ8-`pcKG~Bx=!1%@(`r|qT(fz`yvpv{<dve!(os^e$p2Ejt)IK7^Zf9zxR1;)
zCe1u{?*0#HhtEH03J6T}zA-+qv_5xA*O@oR*RDF(>zJ8P<u|%M{(Rue!h|w%BK)|h
Kaf}=alm7=M%)?Ir

diff --git a/layout/reftests/bugs/234686-6.html b/layout/reftests/bugs/234686-6.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-6.html
@@ -0,0 +1,35 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* h > max-height
+     * wmin/w < hmax/h
+     *
+     *            wmin           w
+     * |------------+------------+----------------> width 
+     *                  hmax     h
+     * |------------------+------+----------------> height
+     *
+     * target: [hmax * w/h, hmax]
+     */
+
+    #img6 {min-width:  60px; /* 40% */
+           max-height: 75px; /* 50% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-6.gif" alt="" id="img6"></p> <!-- w=150 h=150 -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-7.gif b/layout/reftests/bugs/234686-7.gif
new file mode 100644
index 0000000000000000000000000000000000000000..fe813c1323d39e6d64cf11676c1badd46b202a21
GIT binary patch
literal 1959
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

diff --git a/layout/reftests/bugs/234686-7.html b/layout/reftests/bugs/234686-7.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-7.html
@@ -0,0 +1,35 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* h > max-height
+     * wmin/w > hmax/h
+     *
+     *                  wmin     w
+     * |------------------+------+----------------> width 
+     *             hmax          h     
+     * |-------------+-----------+----------------> height
+     *
+     * target: [wmin, hmax]
+     */
+
+    #img7 {min-width:  75px; /* 50% */
+           max-height: 75px; /* 25% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-7.gif" alt="" id="img7"></p> <!-- w=150 h=300 -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-8.gif b/layout/reftests/bugs/234686-8.gif
new file mode 100644
index 0000000000000000000000000000000000000000..d50d7ae12cce9a24c958428a025561ee0f8e602d
GIT binary patch
literal 888
zc$^(mJ!_Rw41R<n1((*XQY1x%4i2Rb794z_XuYGLlS>>#Q3ugK5D}{A;NT!`K}vss
zlXZ&d;s>1^J4A7Ex`QC%a81sEd*7Fkljke%*5u;G+3QPK!XNap@w4%;@fLLsV)yfu
z0u`9R1tCZQ2q8!)VT2PwBmspes8EF|ToH=Yo-76$bU?Tv3|UwXanPX-bGRcM=|DgN
z3~0at9*95&kdOouny`c?B9U2~i(}C#<N~RAb+x*hr3fihp$T0W!W`7ATt`VGoeVOE
z9?`C<(v+?YWe$;I-Ks`2x-pD7l#BO$b(+(i;ml!&L=V-V1w9zS93DwFk|r(b$w+1!
zSMJuh@~qAG7G3(<HIc?vF%xsK5X)huH1XnCbPBmZYF_&*+ALMg)Lbppa+ogNShYT0
z;hN=0LcH~;ch%j(Ek`^OEmEUfJ!%;&M`n_(T(j?cTBKzMS$k3PD(z~j3@ffmrc)GY
zFI0M>ON2y@Xr(PLcN@mro^qn|7H!v58{0KPBgYa*ODr`_$eT_f_hyK<zv|7>J;Ec$
zx=4?#+fBX7vwu_fozgz5Wtm|%9<%XQXXWqQ_y|t-Uw;#rzluY7bamn7`-k&Kj-Pxo
z^$(91R@SfFy7y!A+2WboAK$KhzwrFn=F{cLo1ITDR!`ht-dn%1wSDT^yWf{C?|gl=
d@!;3N-r~<M+vo4>-<^EBx&M0Y(cw9q`wvMlZi4^-

diff --git a/layout/reftests/bugs/234686-8.html b/layout/reftests/bugs/234686-8.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-8.html
@@ -0,0 +1,35 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* h < min-height
+     * wmax/w > hmin/h
+     *
+     *               w              wmax
+     * |-------------+----------------+-----------> height 
+     *               h       hmin
+     * |-------------+---------+------------------> width
+     *
+     * target: [hmin * w/h, hmin]
+     */
+
+    #img8 {max-width: 100px; /* 400% */
+           min-height: 75px; /* 300% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-8.gif" alt="" id="img8"></p> <!-- w=25  h=25  -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-9.gif b/layout/reftests/bugs/234686-9.gif
new file mode 100644
index 0000000000000000000000000000000000000000..5223b02e51994f85b21554d25f6d91fd775beb71
GIT binary patch
literal 923
zc$^(mJ!q6+41O#f94Zb6qJj`n5K0FT!Q(`XP|lVvLKl}x#8FT|6bFZZii03@se>It
zTPr6xwCWxTqLw;|xHtq+5U1ke-*6`H3wPf~$eZUc-`VMY_r%3x*oR-JqwS~dq3zA{
zeD>ANZ6*jo2}W>25WpY?GlZcGV>lxi5RiZcB2a+|To6)|Nx=$f5T<ZNB$j~;Y!HJQ
z%;1JFz(Ednh(jIba7Q>0pa2IXpaBbbAR;*@$E1_U36k^jYIYS%B4%PCR$?P|;%L;f
zoJW|I*_fR<njVs>im(csunR{MNm{L<tjebB%F&dQ)qOEmV>5Q+Xm*g-P;pjgb9U!w
z9#IsM1Z%JbdvKI->28io&&qr&(W$RoBPwhmRZ=5$(r8vv5l@auCy^5*=as)C#Zp97
z)I?o0n(0)HS*v3iu4=R-$V!h`Rn62*qs2pBBE_rKJeNVEWkylTCF;I~dT3OTxfdxf
z)6S;MFyqQ(Dn+95LZ~JhxsykWmdf&Uw_vR7Nhd0Al5$O?uua^>qb&iI#8gv+tmq_i
zZ3bESD^@Jc+|8q{3)RTHUDUHY{I_kklG=y4EJF<2W7yvE9Q-rdK7xt*t8W53Z(#@g
z-VB|&Guj!Se0$9{?(f>&yFInG^!mZxPJg1i_N9M!&*__6Q|pKO^G6O`85^uWdH3k(
zrOn0Z7pw0dcdu_u4rZ5U9-g}TbF6p#`_@u#e*fI&%fW}I=Pr-W{qC&1d3I>|!s3tF
VrBBb#zgqbE_r|x6>lhiq$^ZBUfg%6^

diff --git a/layout/reftests/bugs/234686-9.html b/layout/reftests/bugs/234686-9.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-9.html
@@ -0,0 +1,35 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+    /* w < min-width
+     * wmax/w < hmin/h
+     *
+     *               w       wmax
+     * |-------------+---------+------------------> width 
+     *               h              hmin
+     * |-------------+----------------+-----------> height
+     *
+     * target: [wmax, hmin]
+     */
+
+    #img9 {max-width:  75px; /* 150% */
+           min-height: 75px; /* 300% */}
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max-9.gif" alt="" id="img9"></p> <!-- w=50  h=25  -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/234686-ref.gif b/layout/reftests/bugs/234686-ref.gif
new file mode 100644
index 0000000000000000000000000000000000000000..43cf6cc05b31bb3ca96e67e5d8132dda68b1cfa6
GIT binary patch
literal 1097
zc$^(mZ)nza5Wlb&k`{q40)=@lkxX3}jV7~sVOewO3~TGf$eV$ni+o{$S>T}*rA>+^
zA}L)^^M%ON;hZ9Mq^3?=Akk2_cJaK(){9n=5*kl;-!DAR@5gc9`~17#bImInp6qOa
z7Pt+0r2M2jq`X<2QR^L=Bm_nf1Vu0eM*spOAOa>30wpj4CjbUyAO>a-24ye?=bVfJ
zB)|ni1x&yLO92%~ffYnS6->buzyJ-%fDObz4a~p|zyTe|fgQv_9n8T!I0wg|6UYG)
z^WtiBB}+siBt{Y>MKUBW)T11SiG)arjL3@~<g7B2Fe#HUc@c?{tt=!$Dr7=ll%wW-
zRuUyuG9@o|pyg0D5+gM-BQGAIClWh}lRBA`r*YwKj0?}wd`;1zFI_`SY(^0jMKKgF
zR$>wljzK4o10?39zsSjwS%gJdjKz!Tn2k}(qY<u%mn2YA4{KIc#Z<h+gO(!MvQ;gX
zLA+#!p32$tzPgx;XOOWMAurO7rpPejiexfH#PotOCn}nud5IR&@^Cj{H0=o|GH>K`
zjXANE&Dgvw0j9)IlY}(s1afW$YWmBXELF|aysQi6$he)<qg=f+srqGTug0=ep;{i*
z@)l>#zxS4pU}65{Hvv<taL?3p&#pn(F*v=p<Klx~e7j@HoSN64U)=f3?iq`l&fT0`
zfBwB$%eUQq<k)K~cGkA;nY;h$+~)TewS0Y`xxe@O&l<K&j9%(L)VlBSB|m*Mzh~Zy
zJr8|2y!7;653lW^-F2&0)>mHI`^xrBV?!qnkMwb8Tlcp5iSLd-{mF*=cMaUUwy*W`
z>phKcF1&Gc>)#V&mrwSMe<M?-)x0ox^p~?A%vkX1mBC|`3rl~yZ%<eIqde5LsJeIh
zss3Nj9(b(1t!rT8x+`BD*)@FkR{!rK?=Ih5)BQw!=Z_m#UFbbBbKsA0+c|Ca>NA6X
zRxW<JVBPADfwezxdAqT%;b83>Cr{668+qX1soQ?z{PB6ibxm(={dlZ<W$Sp`{El1W
emF-QN@6=uXr}ECSA7($b?7z|dC)!^oX#5|Y$KYlF

diff --git a/layout/reftests/bugs/234686-ref.html b/layout/reftests/bugs/234686-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/234686-ref.html
@@ -0,0 +1,21 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
+<!--
+From http://fantasai.inkedblade.net/style/specs/css2.1/tests/min-max-replaced
+with permission in
+https://bugzilla.mozilla.org/show_bug.cgi?id=413361#c11
+-->
+<html lang="en">
+ <head>
+  <title>CSS Box Model: Min/Max Height and Width Constraints on Replaced Elements</title>
+  <style type="text/css">
+
+    /* Diagrams are scaled so that w and h line up.
+       Image is 75px x 75px; target dimensions will thus be 75px. */
+
+  </style>
+ </head>
+ <body>
+   <p><img src="min-max.gif" alt=""></p> <!-- intrinsic dimensions -->
+
+ </body>
+</html>
diff --git a/layout/reftests/bugs/reftest.list b/layout/reftests/bugs/reftest.list
--- a/layout/reftests/bugs/reftest.list
+++ b/layout/reftests/bugs/reftest.list
@@ -103,6 +103,25 @@ fails-if(MOZ_WIDGET_TOOLKIT=="cocoa") ==
 == 214077-1a.html 214077-1-ref.html
 == 214077-1b.html 214077-1-ref.html
 == 218473-1.html 218473-1-ref.html
+== 234686-1.html 234686-ref.html
+== 234686-2.html 234686-ref.html
+== 234686-3.html 234686-ref.html
+== 234686-4.html 234686-ref.html
+== 234686-5.html 234686-ref.html
+== 234686-6.html 234686-ref.html
+== 234686-7.html 234686-ref.html
+== 234686-8.html 234686-ref.html
+== 234686-9.html 234686-ref.html
+== 234686-10.html 234686-ref.html
+== 234686-11.html 234686-ref.html
+== 234686-12.html 234686-ref.html
+== 234686-13.html 234686-ref.html
+== 234686-14.html 234686-ref.html
+== 234686-15.html 234686-ref.html
+== 234686-16.html 234686-ref.html
+== 234686-17.html 234686-ref.html
+== 234686-18.html 234686-ref.html
+== 234686-19.html 234686-ref.html
 == 234964-1.html 234964-1-ref.html
 == 234964-2.html 234964-2-ref.html
 == 235593-1.html 235593-1-ref.html
