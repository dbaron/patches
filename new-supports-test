From: L. David Baron <dbaron@dbaron.org>

Bug 782610 followup:  Add a version of css-supports-027 that does not use @-moz-document.  (We already have css-supports-026 to pair with css-supports-028.)

diff --git a/layout/reftests/w3c-css/submitted/conditional3/css-supports-027.xht b/layout/reftests/w3c-css/submitted/conditional3/css-supports-046.xht
copy from layout/reftests/w3c-css/submitted/conditional3/css-supports-027.xht
copy to layout/reftests/w3c-css/submitted/conditional3/css-supports-046.xht
--- a/layout/reftests/w3c-css/submitted/conditional3/css-supports-027.xht
+++ b/layout/reftests/w3c-css/submitted/conditional3/css-supports-046.xht
@@ -1,20 +1,21 @@
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
  <head>
   <title>CSS Test: A nested @supports rule with valid syntax and a passing condition must apply rules inside it</title>
   <link rel="author" title="Cameron McCormack" href="mailto:cam@mcc.id.au" />
+  <link rel="author" title="L. David Baron" href="mailto:dbaron@dbaron.org" />
   <link rel="help" href="http://www.w3.org/TR/css3-conditional/#at-supports" />
-  <link rel="help" href="http://www.w3.org/TR/css3-conditional/#at-document" />
+  <link rel="help" href="http://www.w3.org/TR/css3-conditional/#at-media" />
   <meta name="flags" content="" />
-  <meta name="assert" content="An outer @document rule with an inner @supports rule must apply the rules inside the @supports only if both the @supports and @document conditions pass."/>
+  <meta name="assert" content="An outer @media rule with an inner @supports rule must apply the rules inside the @supports only if both the @supports and @media conditions pass."/>
   <link rel="match" href="support/pass.xht" />
   <style type="text/css"><![CDATA[
-    @-moz-document url-prefix("") {
+    @media all {
       @supports (color: green) {
         html { background-color: green }
       }
     }
   ]]></style>
  </head>
  <body>
  </body>
diff --git a/layout/reftests/w3c-css/submitted/conditional3/reftest.list b/layout/reftests/w3c-css/submitted/conditional3/reftest.list
--- a/layout/reftests/w3c-css/submitted/conditional3/reftest.list
+++ b/layout/reftests/w3c-css/submitted/conditional3/reftest.list
@@ -40,8 +40,9 @@ default-preferences pref(layout.css.supp
 == css-supports-038.xht support/pass.xht
 == css-supports-039.xht support/pass.xht
 == css-supports-040.xht support/pass.xht
 == css-supports-041.xht support/pass.xht
 == css-supports-042.xht support/pass.xht
 == css-supports-043.xht support/pass.xht
 == css-supports-044.xht support/pass.xht
 == css-supports-045.xht support/pass.xht
+== css-supports-046.xht support/pass.xht
