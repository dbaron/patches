From: L. David Baron <dbaron@dbaron.org>

Bug 849263:  Make OverflowChangedTracker actually sort by depth in the tree where it intended to.  r=roc

diff --git a/layout/base/RestyleTracker.h b/layout/base/RestyleTracker.h
--- a/layout/base/RestyleTracker.h
+++ b/layout/base/RestyleTracker.h
@@ -121,21 +121,25 @@ private:
     {}
 
     bool operator==(const Entry& aOther) const
     {
       return mFrame == aOther.mFrame;
     }
  
     /**
-     * Sort by the frame pointer.
+     * Sort by *reverse* depth in the tree, and break ties with
+     * the frame pointer.
      */
     bool operator<(const Entry& aOther) const
     {
-      return mFrame < aOther.mFrame;
+      if (mDepth == aOther.mDepth) {
+        return mFrame < aOther.mFrame;
+      }
+      return mDepth > aOther.mDepth; /* reverse, want "min" to be deepest */
     }
 
     static int compare(const Entry& aOne, const Entry& aTwo)
     {
       if (aOne == aTwo) {
         return 0;
       } else if (aOne < aTwo) {
         return -1;
