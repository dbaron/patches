From: L. David Baron <dbaron@dbaron.org>

Bug 911786 part 3:  Add an assertion to check that part 2 only changes things for position:sticky.  r=dholbert

I'm worried that part 2 was the cause of bug 916751.  If it was, I think
this assertion should catch the problem.  Even if it's not, I think it's
a good assertion to have.

diff --git a/layout/generic/nsFrame.cpp b/layout/generic/nsFrame.cpp
--- a/layout/generic/nsFrame.cpp
+++ b/layout/generic/nsFrame.cpp
@@ -5130,16 +5130,20 @@ nsIFrame::MovePositionBy(const nsPoint& 
   const nsMargin* computedOffsets = nullptr;
   if (IsRelativelyPositioned()) {
     computedOffsets = static_cast<nsMargin*>
       (Properties().Get(nsIFrame::ComputedOffsetProperty()));
   }
   nsHTMLReflowState::ApplyRelativePositioning(this, computedOffsets ?
                                               *computedOffsets : nsMargin(),
                                               &position);
+  NS_ASSERTION(StyleDisplay()->mPosition == NS_STYLE_POSITION_STICKY ||
+               GetPosition() + aTranslation == position,
+               "MovePositionBy should always lead to the movement "
+               "specified, unless the frame is position:sticky");
   SetPosition(position);
 }
 
 nsPoint
 nsIFrame::GetNormalPosition() const
 {
   // It might be faster to first check
   // StyleDisplay()->IsRelativelyPositionedStyle().
