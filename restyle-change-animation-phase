From: L. David Baron <dbaron@dbaron.org>

Bug 977991 patch 6 - Add eRestyle_ChangeAnimationPhase to switch between the with-animation and without-animation styles.

diff --git a/layout/base/nsChangeHint.h b/layout/base/nsChangeHint.h
--- a/layout/base/nsChangeHint.h
+++ b/layout/base/nsChangeHint.h
@@ -294,12 +294,22 @@ enum nsRestyleHint {
   // Replace the style data coming from inline style without updating
   // any other style data.  If a new style context results, update style
   // contexts on the descendants.  (Irrelevant if eRestyle_Self or
   // eRestyle_Subtree is also set, since those imply a superset of the
   // work.)  Supported only for element style contexts and not for
   // pseudo-elements or anonymous boxes, on which it converts to
   // eRestyle_Self.
   eRestyle_StyleAttribute = (1<<5),
+
+  // Additional restyle hint to be used along with CSSTransitions,
+  // CSSAnimations, or StyleAttribute.  This indicates that along with
+  // the replacement given, appropriate switching between the style with
+  // animation and style without animation should be performed by adding
+  // or removing rules that should be present only in the style with
+  // animation.
+  // This is implied by eRestyle_Self or eRestyle_Subtree.
+  // FIXME: Remove this as part of bug 960465.
+  eRestyle_ChangeAnimationPhase = (1 << 6),
 };
 
 
 #endif /* nsChangeHint_h___ */
