From: L. David Baron <dbaron@dbaron.org>

Fix guard object used as temporary.  (Bug 555099)  r=mrbkap

diff --git a/dom/base/nsGlobalWindow.cpp b/dom/base/nsGlobalWindow.cpp
--- a/dom/base/nsGlobalWindow.cpp
+++ b/dom/base/nsGlobalWindow.cpp
@@ -7066,17 +7066,17 @@ nsGlobalWindow::DispatchSyncPopState()
     JSContext *cx = (JSContext*) scx->GetNativeContext();
 
     // If our json call triggers a JS-to-C++ call, we want that call to use cx
     // as the context.  So we push cx onto the context stack.
     nsCxPusher cxPusher;
 
     jsval jsStateObj = JSVAL_NULL;
     // Root the container which will hold our decoded state object.
-    nsAutoGCRoot(&jsStateObj, &rv);
+    nsAutoGCRoot root(&jsStateObj, &rv);
     NS_ENSURE_SUCCESS(rv, rv);
 
     // Deserialize the state object into an nsIVariant.
     nsCOMPtr<nsIJSON> json = do_GetService("@mozilla.org/dom/json;1");
     NS_ENSURE_TRUE(cxPusher.Push(cx), NS_ERROR_FAILURE);
     rv = json->DecodeToJSVal(stateObjJSON, cx, &jsStateObj);
     NS_ENSURE_SUCCESS(rv, rv);
     cxPusher.Pop();
