From: L. David Baron <dbaron@dbaron.org>

Introduce nsStyleCoord::HasPercent to check for either a percent value or a calc() value containing a percent.  (Bug 585715)

diff --git a/layout/style/nsStyleCoord.h b/layout/style/nsStyleCoord.h
--- a/layout/style/nsStyleCoord.h
+++ b/layout/style/nsStyleCoord.h
@@ -133,16 +133,21 @@ public:
   // Does this calc() expression have any percentages inside it?  Can be
   // called only when IsCalcUnit() is true.
   PRBool CalcHasPercent() const;
 
   PRBool IsArrayValue() const {
     return IsCalcUnit();
   }
 
+  PRBool HasPercent() const {
+    return mUnit == eStyleUnit_Percent ||
+           (IsCalcUnit() && CalcHasPercent());
+  }
+
   nscoord     GetCoordValue() const;
   PRInt32     GetIntValue() const;
   float       GetPercentValue() const;
   float       GetFactorValue() const;
   float       GetAngleValue() const;
   double      GetAngleValueInRadians() const;
   Array*      GetArrayValue() const;
   void        GetUnionValue(nsStyleUnion& aValue) const;
