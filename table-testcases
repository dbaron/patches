Start converting reflow branch (bug 300030) table testcases to reftests.

diff -r 67b29055d579 layout/reftests/reftest.list
--- a/layout/reftests/reftest.list	Wed Feb 14 11:31:52 2007 -0800
+++ b/layout/reftests/reftest.list	Fri Feb 16 15:23:22 2007 -0800
@@ -249,6 +249,37 @@ fails == object/svg-with-type.html objec
 == table-dom/insertTbodyExpand1.html table-dom/insertTbodyExpand1-ref.html
 == table-dom/insertTbodyRebuild1.html table-dom/insertTbodyRebuild1-ref.html
 
+# table-width/
+== table-width/spacing-invariance-quirks-min.html table-width/spacing-invariance-quirks-min-ref.html
+== table-width/spacing-invariance-quirks-pref.html table-width/spacing-invariance-quirks-pref-ref.html
+== table-width/spacing-invariance-standards-min.html table-width/spacing-invariance-standards-min-ref.html
+== table-width/spacing-invariance-standards-pref.html table-width/spacing-invariance-standards-pref-ref.html
+== table-width/min-width.html table-width/min-width-ref.html
+== table-width/pref-width.html table-width/pref-width-ref.html
+!= table-width/min-width-ref.html table-width/pref-width-ref.html
+== table-width/percent-large.html table-width/percent-large-ref.html
+== table-width/percent-large-min.html table-width/percent-large-min-ref.html
+== table-width/percent-large-nested.html table-width/percent-large-nested-ref.html
+== table-width/percent-small.html table-width/percent-small-ref.html
+== table-width/percent-small-min.html table-width/percent-small-min-ref.html
+== table-width/percent-small-nested.html table-width/percent-small-nested-ref.html
+== table-width/shrink-wrap-pref.html table-width/shrink-wrap-pref-ref.html
+== table-width/shrink-wrap-avail.html table-width/shrink-wrap-avail-ref.html
+== table-width/shrink-wrap-min.html table-width/shrink-wrap-min-ref.html
+!= table-width/shrink-wrap-min-ref.html table-width/shrink-wrap-pref-ref.html
+!= table-width/shrink-wrap-pref-ref.html table-width/shrink-wrap-avail-ref.html
+!= table-width/shrink-wrap-avail-ref.html table-width/shrink-wrap-min-ref.html
+== table-width/conflicting-widths-1.html table-width/conflicting-widths-ref-100xx.html
+== table-width/conflicting-widths-2.html table-width/conflicting-widths-ref-100xx.html
+== table-width/conflicting-widths-3.html table-width/conflicting-widths-ref-100xx.html
+== table-width/conflicting-widths-4.html table-width/conflicting-widths-ref-100xx.html
+== table-width/conflicting-widths-5.html table-width/conflicting-widths-5-ref.html
+== table-width/conflicting-widths-6.html table-width/conflicting-widths-6-ref.html
+== table-width/conflicting-widths-7.html table-width/conflicting-widths-7-ref.html
+== table-width/conflicting-widths-8.html table-width/conflicting-widths-8-ref.html
+== table-width/conflicting-widths-9.html table-width/conflicting-widths-9-ref.html
+== table-width/conflicting-widths-10.html table-width/conflicting-widths-10-ref.html
+
 # xul-document-load/
 == xul-document-load/test001.xul xul-document-load/reference-green-window.xul
 == xul-document-load/test002.xul xul-document-load/reference-green-window.xul
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-1.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-1.html	Fri Feb 16 15:06:53 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td width="100" style="background: yellow">x</td></tr>
+<tr><td style="background:aqua">x</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-10-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-10-ref.html	Fri Feb 16 15:20:17 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td style="background:aqua">zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz</td></tr>
+<tr><td style="background: yellow">x</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-10.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-10.html	Fri Feb 16 15:20:20 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td style="background:aqua">zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz</td></tr>
+<tr><td width="100" style="background: yellow">x</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-2.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-2.html	Fri Feb 16 15:06:55 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td style="background: yellow">x</td></tr>
+<tr><td width="100" style="background:aqua">x</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-3.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-3.html	Fri Feb 16 15:06:57 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td width="100" style="background: yellow">x</td></tr>
+<tr><td width="10" style="background:aqua">x</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-4.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-4.html	Fri Feb 16 15:06:59 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td width="10" style="background: yellow">x</td></tr>
+<tr><td width="100" style="background:aqua">x</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-5-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-5-ref.html	Fri Feb 16 15:09:18 2007 -0800
@@ -0,0 +1,26 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td width="100" height="500" style="background:aqua;color:aqua">x</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-5.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-5.html	Fri Feb 16 15:08:59 2007 -0800
@@ -0,0 +1,26 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td width="100" height="500" style="background:aqua;color:aqua">la la la la la la la la la la la la la la la la la la la la</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-6-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-6-ref.html	Fri Feb 16 15:10:05 2007 -0800
@@ -0,0 +1,26 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td style="background:aqua">zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-6.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-6.html	Fri Feb 16 15:09:53 2007 -0800
@@ -0,0 +1,26 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td width="100" style="background:aqua">zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-7-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-7-ref.html	Fri Feb 16 15:11:54 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td width="100" style="background: yellow">x</td></tr>
+<tr><td width="100" height="500" style="background:aqua;color:aqua">x</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-7.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-7.html	Fri Feb 16 15:11:26 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td width="100" style="background: yellow">x</td></tr>
+<tr><td height="500" style="background:aqua;color:aqua">la la la la la la la la la la la la la la la la la la la la</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-8-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-8-ref.html	Fri Feb 16 15:20:10 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td width="100" height="500" style="background:aqua;color:aqua">x</td></tr>
+<tr><td width="100" style="background: yellow">x</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-8.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-8.html	Fri Feb 16 15:20:13 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td height="500" style="background:aqua;color:aqua">la la la la la la la la la la la la la la la la la la la la</td></tr>
+<tr><td width="100" style="background: yellow">x</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-9-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-9-ref.html	Fri Feb 16 15:12:45 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td style="background: yellow">x</td></tr>
+<tr><td style="background:aqua">zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-9.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-9.html	Fri Feb 16 15:12:23 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td width="100" style="background: yellow">x</td></tr>
+<tr><td style="background:aqua">zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/conflicting-widths-ref-100xx.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/conflicting-widths-ref-100xx.html	Fri Feb 16 15:07:01 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Conflicting widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table>
+<tr><td width="100" style="background: yellow">x</td></tr>
+<tr><td width="100" style="background:aqua">x</td></tr>
+</table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/min-width-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/min-width-ref.html	Fri Feb 16 14:05:15 2007 -0800
@@ -0,0 +1,9 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+</head>
+<body>
+This<br>is<br>some<br>text.
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/min-width.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/min-width.html	Fri Feb 16 14:04:50 2007 -0800
@@ -0,0 +1,19 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+<style type="text/css">
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+</style>
+</head>
+<body>
+<table width="1"><tr><td>This is some text.</td></tr></table>
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-large-min-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-large-min-ref.html	Fri Feb 16 14:25:36 2007 -0800
@@ -0,0 +1,29 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<div style="width: 1px">
+<table><tr>
+<td style="background: yellow;color:yellow">x</td>
+<td style="background:aqua;color:aqua"><div style="width:200px">x</div></td>
+</tr></table>
+</div>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-large-min.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-large-min.html	Fri Feb 16 14:24:57 2007 -0800
@@ -0,0 +1,29 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<div style="width: 1px">
+<table><tr>
+<td style="background: yellow;color:yellow" width="50%">x</td>
+<td style="background:aqua;color:aqua"><div style="width:200px">x</div></td>
+</tr></table>
+</div>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-large-nested-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-large-nested-ref.html	Fri Feb 16 14:41:55 2007 -0800
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+td > table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+span {
+  display: inline-block;
+  width: 50px;
+  background: fuchsia;
+  color: fuchsia;
+}
+
+</style>
+</head>
+<body>
+
+<table border><tr><td>
+<table><tr>
+<td style="background: yellow;color:yellow;width:100px"><span>x</span></td>
+<td style="background:aqua;color:aqua;width:100px"><span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span></td>
+</tr></table>
+</td></tr></table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-large-nested.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-large-nested.html	Fri Feb 16 14:41:59 2007 -0800
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+td > table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+span {
+  display: inline-block;
+  width: 50px;
+  background: fuchsia;
+  color: fuchsia;
+}
+
+</style>
+</head>
+<body>
+
+<table border><tr><td>
+<table><tr>
+<td style="background: yellow;color:yellow" width="50%"><span>x</span></td>
+<td style="background:aqua;color:aqua"><span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span></td>
+</tr></table>
+</td></tr></table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-large-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-large-ref.html	Fri Feb 16 14:23:14 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table><tr>
+<td style="background: yellow;color:yellow; width: 200px">x</td>
+<td style="background:aqua;color:aqua; width: 200px">x</td>
+</tr></table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-large.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-large.html	Fri Feb 16 14:22:28 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table><tr>
+<td style="background: yellow;color:yellow" width="50%">x</td>
+<td style="background:aqua;color:aqua"><div style="width:200px">x</div></td>
+</tr></table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-small-min-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-small-min-ref.html	Fri Feb 16 14:26:15 2007 -0800
@@ -0,0 +1,29 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<div style="width: 1px">
+<table><tr>
+<td style="background: yellow;color:yellow">x</td>
+<td style="background:aqua;color:aqua"><div style="width:200px">x</div></td>
+</tr></table>
+</div>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-small-min.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-small-min.html	Fri Feb 16 14:26:00 2007 -0800
@@ -0,0 +1,29 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<div style="width: 1px">
+<table><tr>
+<td style="background: yellow;color:yellow">x</td>
+<td style="background:aqua;color:aqua" width="50%"><div style="width:200px">x</div></td>
+</tr></table>
+</div>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-small-nested-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-small-nested-ref.html	Fri Feb 16 14:42:03 2007 -0800
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+td > table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+span {
+  display: inline-block;
+  width: 50px;
+  background: fuchsia;
+  color: fuchsia;
+}
+
+</style>
+</head>
+<body>
+
+<table border><tr><td>
+<table><tr>
+<td style="background: yellow;color:yellow;width:100px"><span>x</span></td>
+<td style="background:aqua;color:aqua;width:100px"><span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span></td>
+</tr></table>
+</td></tr></table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-small-nested.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-small-nested.html	Fri Feb 16 14:42:07 2007 -0800
@@ -0,0 +1,36 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+td > table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+span {
+  display: inline-block;
+  width: 50px;
+  background: fuchsia;
+  color: fuchsia;
+}
+
+</style>
+</head>
+<body>
+
+<table border><tr><td>
+<table><tr>
+<td style="background: yellow;color:yellow"><span>x</span></td>
+<td style="background:aqua;color:aqua" width="50%"><span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span></td>
+</tr></table>
+</td></tr></table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-small-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-small-ref.html	Fri Feb 16 14:23:25 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table><tr>
+<td style="background: yellow;color:yellow; width: 200px">x</td>
+<td style="background:aqua;color:aqua; width: 200px">x</td>
+</tr></table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/percent-small.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/percent-small.html	Fri Feb 16 14:23:35 2007 -0800
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Percent widths on table cells</title>
+<style type="text/css">
+
+table {
+  border-spacing: 3px 5px;
+  padding: 2px 3px 4px 5px;
+}
+
+td {
+  border: none;
+  padding: 0;
+}
+
+</style>
+</head>
+<body>
+
+<table><tr>
+<td style="background: yellow;color:yellow">x</td>
+<td style="background:aqua;color:aqua" width="50%"><div style="width:200px">x</div></td>
+</tr></table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/pref-width-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/pref-width-ref.html	Fri Feb 16 14:07:22 2007 -0800
@@ -0,0 +1,9 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+</head>
+<body>
+This is some text.
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/pref-width.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/pref-width.html	Fri Feb 16 14:05:27 2007 -0800
@@ -0,0 +1,19 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+<style type="text/css">
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+</style>
+</head>
+<body>
+<table><tr><td>This is some text.</td></tr></table>
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/shrink-wrap-avail-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/shrink-wrap-avail-ref.html	Fri Feb 16 14:51:14 2007 -0800
@@ -0,0 +1,30 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Shrink-wrapping of tables</title>
+<style type="text/css">
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+span {
+  display: inline-block;
+  width: 50px;
+  background: yellow;
+  color: black;
+}
+
+</style>
+</head>
+<body>
+
+<table><tr>
+<td style="background:aqua;color:aqua;width:100px"><span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span></td>
+</tr></table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/shrink-wrap-avail.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/shrink-wrap-avail.html	Fri Feb 16 14:51:18 2007 -0800
@@ -0,0 +1,30 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Shrink-wrapping of tables</title>
+<style type="text/css">
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+span {
+  display: inline-block;
+  width: 50px;
+  background: yellow;
+  color: black;
+}
+
+</style>
+</head>
+<body>
+
+<div style="width: 100px"><table><tr>
+<td style="background:aqua;color:aqua"><span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span></td>
+</tr></table></div>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/shrink-wrap-min-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/shrink-wrap-min-ref.html	Fri Feb 16 14:51:25 2007 -0800
@@ -0,0 +1,30 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Shrink-wrapping of tables</title>
+<style type="text/css">
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+span {
+  display: inline-block;
+  width: 50px;
+  background: yellow;
+  color: black;
+}
+
+</style>
+</head>
+<body>
+
+<table><tr>
+<td style="background:aqua;color:aqua;width:50px"><span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span></td>
+</tr></table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/shrink-wrap-min.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/shrink-wrap-min.html	Fri Feb 16 14:51:29 2007 -0800
@@ -0,0 +1,30 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Shrink-wrapping of tables</title>
+<style type="text/css">
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+span {
+  display: inline-block;
+  width: 50px;
+  background: yellow;
+  color: black;
+}
+
+</style>
+</head>
+<body>
+
+<div style="width: 20px"><table><tr>
+<td style="background:aqua;color:aqua"><span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span></td>
+</tr></table></div>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/shrink-wrap-pref-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/shrink-wrap-pref-ref.html	Fri Feb 16 14:50:37 2007 -0800
@@ -0,0 +1,30 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Shrink-wrapping of tables</title>
+<style type="text/css">
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+span {
+  display: inline-block;
+  width: 50px;
+  background: yellow;
+  color: black;
+}
+
+</style>
+</head>
+<body>
+
+<table><tr>
+<td style="background:aqua;color:aqua;width:200px"><span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span></td>
+</tr></table>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/shrink-wrap-pref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/shrink-wrap-pref.html	Fri Feb 16 14:50:04 2007 -0800
@@ -0,0 +1,30 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Shrink-wrapping of tables</title>
+<style type="text/css">
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+span {
+  display: inline-block;
+  width: 50px;
+  background: yellow;
+  color: black;
+}
+
+</style>
+</head>
+<body>
+
+<div style="width: 400px"><table><tr>
+<td style="background:aqua;color:aqua"><span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span>&#x200b;<span>x</span></td>
+</tr></table></div>
+
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/spacing-invariance-quirks-min-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/spacing-invariance-quirks-min-ref.html	Fri Feb 16 13:56:03 2007 -0800
@@ -0,0 +1,29 @@
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+<style type="text/css">
+
+html, body { margin: 0 } /* no collapsing */
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+body > table { margin: 28px 29px 34px 35px; }
+body { background: white; color: black; }
+
+div { background: olive; color: black; }
+
+</style>
+</head>
+<body>
+<table width="1"><tr><td>
+  <table><tr><td>
+    <div>This is some text.</div>
+  </td></tr></table>
+</td></tr></table>
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/spacing-invariance-quirks-min.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/spacing-invariance-quirks-min.html	Fri Feb 16 13:56:06 2007 -0800
@@ -0,0 +1,27 @@
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+<style type="text/css">
+
+html, body { margin: 0 } /* no collapsing */
+
+table, td {
+  margin: 0;
+}
+
+* { border-color: white; /* hidden */ }
+table, td { border-style: solid; }
+body { background: white; color: black; }
+
+div { background: olive; color: black; }
+
+</style>
+</head>
+<body>
+<table width="1" cellpadding="3" cellspacing="5" border="2"><tr><td colspan="2" style="border-width: 1px"> <!-- td border currently already 1px -->
+  <table style="border-spacing: 5px 7px; border-width: 2px 3px 4px 5px"><tr><td colspan="3" style="padding: 4px 5px 6px 7px;border-width: 4px 5px 6px 7px">
+    <div>This is some text.</div>
+  </td></tr></table>
+</td></tr></table>
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/spacing-invariance-quirks-pref-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/spacing-invariance-quirks-pref-ref.html	Fri Feb 16 13:56:08 2007 -0800
@@ -0,0 +1,29 @@
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+<style type="text/css">
+
+html, body { margin: 0 } /* no collapsing */
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+body > table { margin: 28px 29px 34px 35px; }
+body { background: white; color: black; }
+
+div { background: olive; color: black; }
+
+</style>
+</head>
+<body>
+<table><tr><td>
+  <table><tr><td>
+    <div>This is some text.</div>
+  </td></tr></table>
+</td></tr></table>
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/spacing-invariance-quirks-pref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/spacing-invariance-quirks-pref.html	Fri Feb 16 13:56:11 2007 -0800
@@ -0,0 +1,27 @@
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+<style type="text/css">
+
+html, body { margin: 0 } /* no collapsing */
+
+table, td {
+  margin: 0;
+}
+
+* { border-color: white; /* hidden */ }
+table, td { border-style: solid; }
+body { background: white; color: black; }
+
+div { background: olive; color: black; }
+
+</style>
+</head>
+<body>
+<table cellpadding="3" cellspacing="5" border="2"><tr><td colspan="2" style="border-width: 1px"> <!-- td border currently already 1px -->
+  <table style="border-spacing: 5px 7px; border-width: 2px 3px 4px 5px"><tr><td colspan="3" style="padding: 4px 5px 6px 7px;border-width: 4px 5px 6px 7px">
+    <div>This is some text.</div>
+  </td></tr></table>
+</td></tr></table>
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/spacing-invariance-standards-min-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/spacing-invariance-standards-min-ref.html	Fri Feb 16 13:56:14 2007 -0800
@@ -0,0 +1,30 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+<style type="text/css">
+
+html, body { margin: 0 } /* no collapsing */
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+body > table { margin: 28px 29px 34px 35px; }
+body { background: white; color: black; }
+
+div { background: olive; color: black; }
+
+</style>
+</head>
+<body>
+<table width="1"><tr><td>
+  <table><tr><td>
+    <div>This is some text.</div>
+  </td></tr></table>
+</td></tr></table>
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/spacing-invariance-standards-min.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/spacing-invariance-standards-min.html	Fri Feb 16 13:56:17 2007 -0800
@@ -0,0 +1,28 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+<style type="text/css">
+
+html, body { margin: 0 } /* no collapsing */
+
+table, td {
+  margin: 0;
+}
+
+* { border-color: white; /* hidden */ }
+table, td { border-style: solid; }
+body { background: white; color: black; }
+
+div { background: olive; color: black; }
+
+</style>
+</head>
+<body>
+<table width="1" cellpadding="3" cellspacing="5" border="2"><tr><td colspan="2" style="border-width: 1px"> <!-- td border currently already 1px -->
+  <table style="border-spacing: 5px 7px; border-width: 2px 3px 4px 5px"><tr><td colspan="3" style="padding: 4px 5px 6px 7px;border-width: 4px 5px 6px 7px">
+    <div>This is some text.</div>
+  </td></tr></table>
+</td></tr></table>
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/spacing-invariance-standards-pref-ref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/spacing-invariance-standards-pref-ref.html	Fri Feb 16 13:56:21 2007 -0800
@@ -0,0 +1,30 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+<style type="text/css">
+
+html, body { margin: 0 } /* no collapsing */
+
+table, td {
+  border: none;
+  margin: 0;
+  padding: 0;
+  border-spacing: 0;
+}
+
+body > table { margin: 28px 29px 34px 35px; }
+body { background: white; color: black; }
+
+div { background: olive; color: black; }
+
+</style>
+</head>
+<body>
+<table><tr><td>
+  <table><tr><td>
+    <div>This is some text.</div>
+  </td></tr></table>
+</td></tr></table>
+</body>
+</html>
diff -r 67b29055d579 layout/reftests/table-width/spacing-invariance-standards-pref.html
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/layout/reftests/table-width/spacing-invariance-standards-pref.html	Fri Feb 16 13:56:25 2007 -0800
@@ -0,0 +1,28 @@
+<!DOCTYPE HTML>
+<html>
+<head>
+<title>Test that cellpadding, cellspacing, border, etc., don't break table sizing.</title>
+<style type="text/css">
+
+html, body { margin: 0 } /* no collapsing */
+
+table, td {
+  margin: 0;
+}
+
+* { border-color: white; /* hidden */ }
+table, td { border-style: solid; }
+body { background: white; color: black; }
+
+div { background: olive; color: black; }
+
+</style>
+</head>
+<body>
+<table cellpadding="3" cellspacing="5" border="2"><tr><td colspan="2" style="border-width: 1px"> <!-- td border currently already 1px -->
+  <table style="border-spacing: 5px 7px; border-width: 2px 3px 4px 5px"><tr><td colspan="3" style="padding: 4px 5px 6px 7px;border-width: 4px 5px 6px 7px">
+    <div>This is some text.</div>
+  </td></tr></table>
+</td></tr></table>
+</body>
+</html>
