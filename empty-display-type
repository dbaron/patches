Create a new -moz-empty display type and switch places where XUL was using display:inline to use it.  b=321504

diff --git a/layout/base/nsCSSFrameConstructor.cpp b/layout/base/nsCSSFrameConstructor.cpp
--- a/layout/base/nsCSSFrameConstructor.cpp
+++ b/layout/base/nsCSSFrameConstructor.cpp
@@ -6559,6 +6559,20 @@ nsCSSFrameConstructor::ConstructFrameByD
     // find them if we need to
     addToHashTable = PR_FALSE;
   }
+#ifdef MOZ_XUL
+  else if (NS_STYLE_DISPLAY_EMPTY == aDisplay->mDisplay) {
+    if (!aHasPseudoParent && !aState.mPseudoFrames.IsEmpty()) {
+      ProcessPseudoFrames(aState, aFrameItems); 
+    }
+    newFrame = NS_NewEmptyFrame(mPresShell, aStyleContext);
+
+    rv = InitAndRestoreFrame(aState, aContent, aParentFrame, nsnull, newFrame);
+    NS_ASSERTION(NS_SUCCEEDED(rv), "InitAndRestoreFrame failed");
+    // See if we need to create a view, e.g. the frame is absolutely
+    // positioned
+    nsHTMLContainerFrame::CreateViewForFrame(newFrame, aParentFrame, PR_FALSE);
+  }
+#endif
   // otherwise let the display property influence the frame type to create
   else {
     // XXX This section now only handles table frames; should be
diff --git a/layout/base/nsStyleConsts.h b/layout/base/nsStyleConsts.h
--- a/layout/base/nsStyleConsts.h
+++ b/layout/base/nsStyleConsts.h
@@ -360,6 +360,7 @@
 #define NS_STYLE_DISPLAY_DECK                   26
 #define NS_STYLE_DISPLAY_POPUP                  27
 #define NS_STYLE_DISPLAY_GROUPBOX               28
+#define NS_STYLE_DISPLAY_EMPTY                  29
 
 // See nsStyleDisplay
 #define NS_STYLE_FLOAT_NONE                     0
diff --git a/layout/style/nsCSSKeywordList.h b/layout/style/nsCSSKeywordList.h
--- a/layout/style/nsCSSKeywordList.h
+++ b/layout/style/nsCSSKeywordList.h
@@ -95,6 +95,7 @@ CSS_KEY(-moz-dialogtext, _moz_dialogtext
 CSS_KEY(-moz-dialogtext, _moz_dialogtext)
 CSS_KEY(-moz-document, _moz_document)
 CSS_KEY(-moz-dragtargetzone, _moz_dragtargetzone)
+CSS_KEY(-moz-empty, _moz_empty)
 CSS_KEY(-moz-ethiopic-halehame, _moz_ethiopic_halehame)
 CSS_KEY(-moz-ethiopic-numeric, _moz_ethiopic_numeric)
 CSS_KEY(-moz-ethiopic-halehame-am, _moz_ethiopic_halehame_am)
diff --git a/layout/style/nsCSSProps.cpp b/layout/style/nsCSSProps.cpp
--- a/layout/style/nsCSSProps.cpp
+++ b/layout/style/nsCSSProps.cpp
@@ -550,6 +550,7 @@ const PRInt32 nsCSSProps::kDisplayKTable
   eCSSKeyword__moz_deck,          NS_STYLE_DISPLAY_DECK,
   eCSSKeyword__moz_popup,         NS_STYLE_DISPLAY_POPUP,
   eCSSKeyword__moz_groupbox,      NS_STYLE_DISPLAY_GROUPBOX,
+  eCSSKeyword__moz_empty,         NS_STYLE_DISPLAY_EMPTY,
 #endif
   eCSSKeyword_UNKNOWN,-1
 };
diff --git a/toolkit/content/xul.css b/toolkit/content/xul.css
--- a/toolkit/content/xul.css
+++ b/toolkit/content/xul.css
@@ -236,13 +236,13 @@ toolbarseparator {
 
 toolbarspacer {
   -moz-binding: url("chrome://global/content/bindings/toolbar.xml#toolbardecoration");
-  display: inline;
+  display: -moz-empty;
 }
 
 toolbarspring {
   -moz-binding: url("chrome://global/content/bindings/toolbar.xml#toolbardecoration");
   -moz-box-flex: 1000;
-  display: inline;
+  display: -moz-empty;
 }
 
 toolbarpaletteitem {
@@ -648,7 +648,7 @@ progressmeter {
 /********** label **********/
 
 spacer {
-  display: inline;
+  display: -moz-empty;
 }
 
 description {
