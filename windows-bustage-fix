Back out a small part of bug 391848 to fix bustage for some people (and add a comment warning about the problem).

diff --git a/xpcom/base/nsStackWalk.cpp b/xpcom/base/nsStackWalk.cpp
--- a/xpcom/base/nsStackWalk.cpp
+++ b/xpcom/base/nsStackWalk.cpp
@@ -811,7 +811,9 @@ BOOL SymGetModuleInfoEspecial(HANDLE aPr
          * Not loaded, here's the magic.
          * Go through all the modules.
          */
-        enumRes = _EnumerateLoadedModules(aProcess, callbackEspecial, (PVOID)&aAddr);
+        // Need to cast to PENUMLOADED_MODULES_CALLBACK for some compiler
+        // or platform SDK; see bug 391848.
+        enumRes = _EnumerateLoadedModules(aProcess, (PENUMLOADED_MODULES_CALLBACK)callbackEspecial, (PVOID)&aAddr);
         if (FALSE != enumRes)
         {
             /*
@@ -878,7 +880,9 @@ BOOL SymGetModuleInfoEspecial64(HANDLE a
          * Not loaded, here's the magic.
          * Go through all the modules.
          */
-        enumRes = _EnumerateLoadedModules64(aProcess, callbackEspecial64, (PVOID)&aAddr);
+        // Need to cast to PENUMLOADED_MODULES_CALLBACK for some compiler
+        // or platform SDK; see bug 391848.
+        enumRes = _EnumerateLoadedModules64(aProcess, (PENUMLOADED_MODULES_CALLBACK64)callbackEspecial64, (PVOID)&aAddr);
         if (FALSE != enumRes)
         {
             /*
