From: L. David Baron <dbaron@dbaron.org>

Bug 1122781 patch 1 - Add method for style struct computation dependencies.

(Inspired by bug 1098151.)

diff --git a/layout/style/nsStyleStruct.h b/layout/style/nsStyleStruct.h
--- a/layout/style/nsStyleStruct.h
+++ b/layout/style/nsStyleStruct.h
@@ -87,16 +87,17 @@ public:
                           nsChangeHint_NeutralChange);
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
   static nsChangeHint CalcFontDifference(const nsFont& aFont1, const nsFont& aFont2);
 
   static nscoord ZoomText(nsPresContext* aPresContext, nscoord aSize);
   static nscoord UnZoomText(nsPresContext* aPresContext, nscoord aSize);
 
   void* operator new(size_t sz, nsPresContext* aContext) CPP_THROW_NEW {
     return aContext->PresShell()->
       AllocateByObjectID(nsPresArena::nsStyleFont_id, sz);
@@ -333,16 +334,17 @@ struct nsStyleColor {
   static nsChangeHint MaxDifference() {
     return NS_STYLE_HINT_VISUAL;
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics at all.
     return nsChangeHint(0);
   }
+  static inline uint32_t ComputationDependencies();
 
   void* operator new(size_t sz, nsPresContext* aContext) CPP_THROW_NEW {
     return aContext->PresShell()->
       AllocateByObjectID(nsPresArena::nsStyleColor_id, sz);
   }
   void Destroy(nsPresContext* aContext) {
     this->~nsStyleColor();
     aContext->PresShell()->
@@ -371,16 +373,17 @@ struct nsStyleBackground {
                           NS_CombineHint(NS_STYLE_HINT_VISUAL,
                                          nsChangeHint_NeutralChange));
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics at all.
     return nsChangeHint(0);
   }
+  static inline uint32_t ComputationDependencies();
 
   struct Position;
   friend struct Position;
   struct Position {
     typedef nsStyleCoord::CalcValue PositionCoord;
     PositionCoord mXPosition, mYPosition;
 
     // Initialize nothing
@@ -602,16 +605,17 @@ struct nsStyleMargin {
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference can return both nsChangeHint_ClearAncestorIntrinsics and
     // nsChangeHint_NeedReflow as inherited hints.
     return nsChangeHint(0);
   }
+  static inline uint32_t ComputationDependencies();
 
   nsStyleSides  mMargin;          // [reset] coord, percent, calc, auto
 
   bool IsWidthDependent() const { return !mHasCachedMargin; }
   bool GetMargin(nsMargin& aMargin) const
   {
     if (mHasCachedMargin) {
       aMargin = mCachedMargin;
@@ -645,16 +649,17 @@ struct nsStylePadding {
     return NS_SubtractHint(NS_STYLE_HINT_REFLOW,
                            nsChangeHint_ClearDescendantIntrinsics);
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference can return nsChangeHint_ClearAncestorIntrinsics as an
     // inherited hint.
     return nsChangeHint(0);
   }
+  static inline uint32_t ComputationDependencies();
 
   nsStyleSides  mPadding;         // [reset] coord, percent, calc
 
   bool IsWidthDependent() const { return !mHasCachedPadding; }
   bool GetPadding(nsMargin& aPadding) const
   {
     if (mHasCachedPadding) {
       aPadding = mCachedPadding;
@@ -836,16 +841,17 @@ struct nsStyleBorder {
                                          nsChangeHint_NeutralChange));
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   void EnsureBorderColors() {
     if (!mBorderColors) {
       mBorderColors = new nsBorderColors*[4];
       if (mBorderColors)
         for (int32_t i = 0; i < 4; i++)
           mBorderColors[i] = nullptr;
     }
@@ -1070,16 +1076,17 @@ struct nsStyleOutline {
                                          nsChangeHint_NeutralChange));
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   nsStyleCorners  mOutlineRadius; // [reset] coord, percent, calc
 
   // Note that this is a specified value.  You can get the actual values
   // with GetOutlineWidth.  You cannot get the computed value directly.
   nsStyleCoord  mOutlineWidth;    // [reset] coord, enum (see nsStyleConsts.h)
   nscoord       mOutlineOffset;   // [reset]
 
@@ -1164,16 +1171,17 @@ struct nsStyleList {
                           nsChangeHint_NeutralChange);
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   imgRequestProxy* GetListStyleImage() const { return mListStyleImage; }
   void SetListStyleImage(imgRequestProxy* aReq)
   {
     if (mListStyleImage)
       mListStyleImage->UnlockImage();
     mListStyleImage = aReq;
     if (mListStyleImage)
@@ -1333,16 +1341,17 @@ struct nsStylePosition {
                           nsChangeHint(nsChangeHint_RecomputePosition |
                                        nsChangeHint_UpdateOverflow));
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference can return both nsChangeHint_ClearAncestorIntrinsics and
     // nsChangeHint_NeedReflow as inherited hints.
     return nsChangeHint(0);
   }
+  static inline uint32_t ComputationDependencies();
 
   // XXXdholbert nsStyleBackground::Position should probably be moved to a
   // different scope, since we're now using it in multiple style structs.
   typedef nsStyleBackground::Position Position;
 
   Position      mObjectPosition;        // [reset]
   nsStyleSides  mOffset;                // [reset] coord, percent, calc, auto
   nsStyleCoord  mWidth;                 // [reset] coord, percent, enum, calc, auto
@@ -1544,16 +1553,17 @@ struct nsStyleTextReset {
         nsChangeHint_UpdateSubtreeOverflow);
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   nsStyleCoord  mVerticalAlign;         // [reset] coord, percent, calc, enum (see nsStyleConsts.h)
   nsStyleTextOverflow mTextOverflow;    // [reset] enum, string
 
   uint8_t mTextDecorationLine;          // [reset] see nsStyleConsts.h
   uint8_t mUnicodeBidi;                 // [reset] see nsStyleConsts.h
 protected:
   uint8_t mTextDecorationStyle;         // [reset] see nsStyleConsts.h
@@ -1581,16 +1591,17 @@ struct nsStyleText {
     return NS_STYLE_HINT_FRAMECHANGE;
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   uint8_t mTextAlign;                   // [inherited] see nsStyleConsts.h
   uint8_t mTextAlignLast;               // [inherited] see nsStyleConsts.h
   bool mTextAlignTrue : 1;              // [inherited] see nsStyleConsts.h
   bool mTextAlignLastTrue : 1;          // [inherited] see nsStyleConsts.h
   uint8_t mTextTransform;               // [inherited] see nsStyleConsts.h
   uint8_t mWhiteSpace;                  // [inherited] see nsStyleConsts.h
   uint8_t mWordBreak;                   // [inherited] see nsStyleConsts.h
@@ -1770,16 +1781,17 @@ struct nsStyleVisibility {
     return NS_STYLE_HINT_FRAMECHANGE;
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   nsStyleImageOrientation mImageOrientation;  // [inherited]
   uint8_t mDirection;                  // [inherited] see nsStyleConsts.h NS_STYLE_DIRECTION_*
   uint8_t mVisible;                    // [inherited]
   uint8_t mPointerEvents;              // [inherited] see nsStyleConsts.h
   uint8_t mWritingMode;                // [inherited] see nsStyleConsts.h
   uint8_t mTextOrientation;            // [inherited] see nsStyleConsts.h
   uint8_t mColorCorrection;            // [inherited] see nsStyleConsts.h
@@ -2000,16 +2012,17 @@ struct nsStyleDisplay {
                         nsChangeHint_AddOrRemoveTransform |
                         nsChangeHint_NeutralChange);
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference can return both nsChangeHint_ClearAncestorIntrinsics and
     // nsChangeHint_NeedReflow as inherited hints.
     return nsChangeHint(0);
   }
+  static inline uint32_t ComputationDependencies();
 
   // We guarantee that if mBinding is non-null, so are mBinding->GetURI() and
   // mBinding->mOriginPrincipal.
   nsRefPtr<mozilla::css::URLValue> mBinding;    // [reset]
   nsRect  mClip;                // [reset] offsets from upper-left border edge
   float   mOpacity;             // [reset]
   uint8_t mDisplay;             // [reset] see nsStyleConsts.h NS_STYLE_DISPLAY_*
   uint8_t mOriginalDisplay;     // [reset] saved mDisplay for position:absolute/fixed
@@ -2229,16 +2242,17 @@ struct nsStyleTable {
     return NS_STYLE_HINT_FRAMECHANGE;
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   uint8_t       mLayoutStrategy;// [reset] see nsStyleConsts.h NS_STYLE_TABLE_LAYOUT_*
   int32_t       mSpan;          // [reset] the number of columns spanned by a colgroup or col
 };
 
 struct nsStyleTableBorder {
   nsStyleTableBorder();
   nsStyleTableBorder(const nsStyleTableBorder& aOther);
@@ -2259,16 +2273,17 @@ struct nsStyleTableBorder {
     return NS_STYLE_HINT_FRAMECHANGE;
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   nscoord       mBorderSpacingX;// [inherited]
   nscoord       mBorderSpacingY;// [inherited]
   uint8_t       mBorderCollapse;// [inherited]
   uint8_t       mCaptionSide;   // [inherited]
   uint8_t       mEmptyCells;    // [inherited]
 };
 
@@ -2357,16 +2372,17 @@ struct nsStyleQuotes {
     return NS_STYLE_HINT_FRAMECHANGE;
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   uint32_t  QuotesCount(void) const { return mQuotesCount; } // [inherited]
 
   const nsString* OpenQuoteAt(uint32_t aIndex) const
   {
     NS_ASSERTION(aIndex < mQuotesCount, "out of range");
     return mQuotes + (aIndex * 2);
   }
@@ -2431,16 +2447,17 @@ struct nsStyleContent {
     return NS_STYLE_HINT_FRAMECHANGE;
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   uint32_t  ContentCount(void) const  { return mContentCount; } // [reset]
 
   const nsStyleContentData& ContentAt(uint32_t aIndex) const {
     NS_ASSERTION(aIndex < mContentCount, "out of range");
     return mContents[aIndex];
   }
 
@@ -2543,16 +2560,17 @@ struct nsStyleUIReset {
     return NS_STYLE_HINT_FRAMECHANGE;
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   uint8_t   mUserSelect;      // [reset] (selection-style)
   uint8_t   mForceBrokenImageIcon; // [reset]  (0 if not forcing, otherwise forcing)
   uint8_t   mIMEMode;         // [reset]
   uint8_t   mWindowShadow;    // [reset]
 };
 
 struct nsCursorImage {
@@ -2606,16 +2624,17 @@ struct nsStyleUserInterface {
                                          nsChangeHint_NeutralChange));
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   uint8_t   mUserInput;       // [inherited]
   uint8_t   mUserModify;      // [inherited] (modify-content)
   uint8_t   mUserFocus;       // [inherited] (auto-select)
   uint8_t   mWindowDragging;  // [inherited]
 
   uint8_t   mCursor;          // [inherited] See nsStyleConsts.h
 
@@ -2650,16 +2669,17 @@ struct nsStyleXUL {
     return NS_STYLE_HINT_FRAMECHANGE;
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   float         mBoxFlex;               // [reset] see nsStyleConsts.h
   uint32_t      mBoxOrdinal;            // [reset] see nsStyleConsts.h
   uint8_t       mBoxAlign;              // [reset] see nsStyleConsts.h
   uint8_t       mBoxDirection;          // [reset] see nsStyleConsts.h
   uint8_t       mBoxOrient;             // [reset] see nsStyleConsts.h
   uint8_t       mBoxPack;               // [reset] see nsStyleConsts.h
   bool          mStretchStack;          // [reset] see nsStyleConsts.h
@@ -2686,16 +2706,17 @@ struct nsStyleColumn {
                           nsChangeHint_NeutralChange);
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   /**
    * This is the maximum number of columns we can process. It's used in both
    * nsColumnSetFrame and nsRuleNode.
    */
   static const uint32_t kMaxColumnCount;
 
   uint32_t     mColumnCount; // [reset] see nsStyleConsts.h
@@ -2778,16 +2799,17 @@ struct nsStyleSVG {
              NS_CombineHint(nsChangeHint_NeedReflow, nsChangeHint_NeedDirtyReflow)), // XXX remove nsChangeHint_NeedDirtyReflow: bug 876085
                                          nsChangeHint_RepaintFrame);
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow as an inherited hint
     // and never returns nsChangeHint_ClearAncestorIntrinsics at all.
     return nsChangeHint_NeedReflow;
   }
+  static inline uint32_t ComputationDependencies();
 
   nsStyleSVGPaint  mFill;             // [inherited]
   nsStyleSVGPaint  mStroke;           // [inherited]
   nsCOMPtr<nsIURI> mMarkerEnd;        // [inherited]
   nsCOMPtr<nsIURI> mMarkerMid;        // [inherited]
   nsCOMPtr<nsIURI> mMarkerStart;      // [inherited]
   nsStyleCoord    *mStrokeDasharray;  // [inherited] coord, percent, factor
 
@@ -3059,16 +3081,17 @@ struct nsStyleSVGReset {
             NS_CombineHint(nsChangeHint_UpdateOverflow, NS_STYLE_HINT_REFLOW));
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics as inherited hints.
     return NS_CombineHint(nsChangeHint_NeedReflow,
                           nsChangeHint_ClearAncestorIntrinsics);
   }
+  static inline uint32_t ComputationDependencies();
 
   bool HasFilters() const {
     return mFilters.Length() > 0;
   }
 
   bool HasNonScalingStroke() const {
     return mVectorEffect == NS_STYLE_VECTOR_EFFECT_NON_SCALING_STROKE;
   }
@@ -3107,13 +3130,204 @@ struct nsStyleVariables {
   static nsChangeHint MaxDifference() {
     return nsChangeHint(0);
   }
   static nsChangeHint MaxDifferenceNeverInherited() {
     // CalcDifference never returns nsChangeHint_NeedReflow or
     // nsChangeHint_ClearAncestorIntrinsics at all.
     return nsChangeHint(0);
   }
+  static inline uint32_t ComputationDependencies();
 
   mozilla::CSSVariableValues mVariables;
 };
 
+/*
+ * The computation of one style struct can depend on the data in
+ * another, either on the same element or (maybe) on a different
+ * element (e.g., the parent, which is always different, or the root
+ * element, which may or may not be different).  Since many of these
+ * dependencies are conditional on a particular value of the property,
+ * it might be difficult to detect a circular dependency.
+ *
+ * Thus to avoid circular dependencies, we require that each style
+ * struct have a method returning the bits for all the style structs
+ * that its computation might depend on (which must include its own
+ * bit), and we assert during the computation of one style struct that
+ * all computation calls are within the allowed set.
+ *
+ * This will catch errors because either:
+ *  (1) we'll be unable to get these functions to compile or to return
+ *      (since all dependent structs are handled by calling *their*
+ *      methods), or
+ *  (2) because we'll trigger the assertions.
+ */
+
+/* static */ inline uint32_t
+nsStyleFont::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Font) |
+         nsStyleVisibility::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleColor::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Color) |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleList::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(List) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleText::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Text) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleColor::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleVisibility::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Visibility) |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleQuotes::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Quotes) |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleUserInterface::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(UserInterface) |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleTableBorder::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(TableBorder) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleSVG::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(SVG) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleColor::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleVariables::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Variables);
+}
+
+/* static */ inline uint32_t
+nsStyleBackground::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Background) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleColor::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStylePosition::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Position) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleTextReset::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(TextReset) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleColor::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleDisplay::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Display) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleContent::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Content) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleUIReset::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(UIReset) |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleTable::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Table) |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleMargin::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Margin) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleVisibility::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStylePadding::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Padding) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleVisibility::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleBorder::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Border) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleColor::ComputationDependencies() |
+         nsStyleVisibility::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleOutline::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Outline) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleColor::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleXUL::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(XUL) |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleSVGReset::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(SVGReset) |
+         nsStyleColor::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
+/* static */ inline uint32_t
+nsStyleColumn::ComputationDependencies() {
+  return NS_STYLE_INHERIT_BIT(Column) |
+         nsStyleFont::ComputationDependencies() |
+         nsStyleColor::ComputationDependencies() |
+         nsStyleVariables::ComputationDependencies();
+}
+
 #endif /* nsStyleStruct_h___ */
