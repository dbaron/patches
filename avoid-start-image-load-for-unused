From: L. David Baron <dbaron@dbaron.org>

In the ValueList case, don't start image loads for declarations that are overridden by others (just like we already do for the Value case).  (Bug 517224)

diff --git a/layout/style/nsCSSDataBlock.cpp b/layout/style/nsCSSDataBlock.cpp
--- a/layout/style/nsCSSDataBlock.cpp
+++ b/layout/style/nsCSSDataBlock.cpp
@@ -284,31 +284,37 @@ nsCSSCompressedDataBlock::MapRuleInfoInt
                                  "half a property?");
                     if (target->mXValue.GetUnit() == eCSSUnit_Null) {
                         target->mXValue = val->mXValue;
                         target->mYValue = val->mYValue;
                     }
                     cursor += CDBValuePairStorage_advance;
                 } break;
 
-                case eCSSType_ValueList:
-                    if (iProp == eCSSProperty_background_image ||
-                        iProp == eCSSProperty_content) {
-                        for (nsCSSValueList* l = ValueListAtCursor(cursor);
-                             l; l = l->mNext)
-                            TryToStartImageLoad(l->mValue, doc);
-                    } else if (iProp == eCSSProperty_cursor) {
-                        for (nsCSSValueList* l = ValueListAtCursor(cursor);
-                             l; l = l->mNext)
-                            if (l->mValue.GetUnit() == eCSSUnit_Array) {
-                                const nsCSSValue& image =
-                                    l->mValue.GetArrayValue()->Item(0);
-                                TryToStartImageLoad(image, doc);
+                case eCSSType_ValueList: {
+                    void** target = static_cast<void**>(prop);
+                    if (!*target) {
+                        if (iProp == eCSSProperty_background_image ||
+                            iProp == eCSSProperty_content) {
+                            for (nsCSSValueList* l = ValueListAtCursor(cursor);
+                                 l; l = l->mNext) {
+                                TryToStartImageLoad(l->mValue, doc);
                             }
+                        } else if (iProp == eCSSProperty_cursor) {
+                            for (nsCSSValueList* l = ValueListAtCursor(cursor);
+                                 l; l = l->mNext) {
+                                if (l->mValue.GetUnit() == eCSSUnit_Array) {
+                                    const nsCSSValue& image =
+                                        l->mValue.GetArrayValue()->Item(0);
+                                    TryToStartImageLoad(image, doc);
+                                }
+                            }
+                        }
                     }
+                }
                 // fall through
                 case eCSSType_ValuePairList: {
                     void** target = static_cast<void**>(prop);
                     if (!*target) {
                         void* val = PointerAtCursor(cursor);
                         NS_ASSERTION(val, "oops");
                         *target = val;
 
