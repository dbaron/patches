SetVisibleArea doesn't need to lead to media query change handling when paginated (e.g., when doing a SizeToContent around a print preview window).
diff --git a/layout/base/nsPresContext.h b/layout/base/nsPresContext.h
--- a/layout/base/nsPresContext.h
+++ b/layout/base/nsPresContext.h
@@ -441,17 +441,18 @@ public:
   nsRect GetVisibleArea() { return mVisibleArea; }
 
   /**
    * Set the currently visible area. The units for r are standard
    * nscoord units (as scaled by the device context).
    */
   void SetVisibleArea(const nsRect& r) {
     mVisibleArea = r;
-    if (mShell && mShell->DidInitialReflow())
+    // Visible area does not affect media queries when paginated.
+    if (mShell && mShell->DidInitialReflow() && !IsPaginated())
       PostMediaFeatureValuesChangedEvent();
     else
       AssertNoStyleDataToRebuild();
   }
 
   /**
    * Return true if this presentation context is a paginated
    * context.
