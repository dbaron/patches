SetVisibleArea doesn't need to lead to media query change handling when paginated (e.g., when doing a SizeToContent around a print preview window).  (Bug 468645)  r+sr=bzbarsky

diff --git a/layout/base/nsPresContext.h b/layout/base/nsPresContext.h
--- a/layout/base/nsPresContext.h
+++ b/layout/base/nsPresContext.h
@@ -434,17 +434,18 @@ public:
   nsRect GetVisibleArea() { return mVisibleArea; }
 
   /**
    * Set the currently visible area. The units for r are standard
    * nscoord units (as scaled by the device context).
    */
   void SetVisibleArea(const nsRect& r) {
     mVisibleArea = r;
-    if (HasCachedStyleData())
+    // Visible area does not affect media queries when paginated.
+    if (!IsPaginated() && HasCachedStyleData())
       PostMediaFeatureValuesChangedEvent();
   }
 
   /**
    * Return true if this presentation context is a paginated
    * context.
    */
   PRBool IsPaginated() const { return mPaginated; }
