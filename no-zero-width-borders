From: L. David Baron <dbaron@dbaron.org>

Don't try drawing zero-width borders.  (Bug 618071)

The allBordersSameWidth codepath for dashed borders will cause a cairo
error when given a width of zero, so we need to avoid hitting that.

It's also a waste of time.

diff --git a/layout/base/nsCSSRenderingBorders.cpp b/layout/base/nsCSSRenderingBorders.cpp
--- a/layout/base/nsCSSRenderingBorders.cpp
+++ b/layout/base/nsCSSRenderingBorders.cpp
@@ -1401,16 +1401,22 @@ nsCSSBorderRenderer::DrawBorders()
   if (!mat.HasNonTranslation()) {
     mat.x0 = floor(mat.x0 + 0.5);
     mat.y0 = floor(mat.y0 + 0.5);
     mContext->SetMatrix(mat);
   }
 
   PRBool allBordersSameWidth = AllBordersSameWidth();
 
+  if (allBordersSameWidth && mBorderWidths[0] == 0.0) {
+    // A number of the allBordersSameWidth codepaths depend on the
+    // border width being greater than zero.
+    return;
+  }
+
   PRBool allBordersSolid;
   bool noCornerOutsideCenter = true;
 
   // First there's a couple of 'special cases' that have specifically optimized
   // drawing paths, when none of these can be used we move on to the generalized
   // border drawing code.
   if (allBordersSame &&
       mCompositeColors[0] == NULL &&
