Set NS_FRAME_CONTAINS_RELATIVE_HEIGHT more agressively around framesets.  b=376981

diff --git a/layout/generic/nsFrameSetFrame.cpp b/layout/generic/nsFrameSetFrame.cpp
--- a/layout/generic/nsFrameSetFrame.cpp
+++ b/layout/generic/nsFrameSetFrame.cpp
@@ -977,7 +977,13 @@ nsHTMLFramesetFrame::Reflow(nsPresContex
   nsIPresShell *shell = aPresContext->PresShell();
   nsStyleSet *styleSet = shell->StyleSet();
 
-  mParent->AddStateBits(NS_FRAME_CONTAINS_RELATIVE_HEIGHT);
+  // Because GetDesiredSize pulls heights from the next frameset up or
+  // the pres context's visible area, we need to set
+  // NS_FRAME_CONTAINS_RELATIVE_HEIGHT all the way up the tree as well.
+  for (nsIFrame *f = mParent;
+       f && !(f->GetStateBits() & NS_FRAME_CONTAINS_RELATIVE_HEIGHT);
+       f = f->GetParent())
+    f->AddStateBits(NS_FRAME_CONTAINS_RELATIVE_HEIGHT);
   
   //printf("FramesetFrame2::Reflow %X (%d,%d) \n", this, aReflowState.availableWidth, aReflowState.availableHeight); 
   // Always get the size so that the caller knows how big we are
