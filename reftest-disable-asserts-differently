From: L. David Baron <dbaron@dbaron.org>

Disable reporting of assertion failures in reftest a different way, so that the assertion counts per test are logged and can be collected.  (Bug 472557)

diff --git a/layout/tools/reftest/reftest.js b/layout/tools/reftest/reftest.js
--- a/layout/tools/reftest/reftest.js
+++ b/layout/tools/reftest/reftest.js
@@ -584,16 +584,21 @@ function StartCurrentURI(aState)
         setTimeout(DocumentLoaded, 0);
     } else {
         gBrowser.loadURI(gCurrentURL);
     }
 }
 
 function DoneTests()
 {
+    // TEMPORARILY DISABLE REPORTING OF ASSERTION FAILURES.
+    gTestResults.AssertionUnexpected = 0;
+    gTestResults.AssertionUnexpectedFixed = 0;
+    gTestResults.AssertionKnown = 0;
+
     dump("REFTEST FINISHED: Slowest test took " + gSlowestTestTime +
          "ms (" + gSlowestTestURL + ")\n");
 
     dump("REFTEST INFO | Result summary:\n");
     var count = gTestResults.Pass + gTestResults.LoadOnly;
     dump("REFTEST INFO | Successful: " + count + " (" +
          gTestResults.Pass + " pass, " +
          gTestResults.LoadOnly + " load only)\n");
@@ -1088,40 +1093,41 @@ function FinishTestItem()
     gBrowser.loadURI(BLANK_URL_FOR_CLEARING);
 }
 
 function DoAssertionCheck()
 {
     gClearingForAssertionCheck = false;
 
     if (gDebug.isDebugBuild) {
-        // TEMPORARILY DISABLING ASSERTION CHECKS FOR NOW.  TO RE-ENABLE,
-        // USE COMMENTED LINE TO REPLACE FOLLOWING ONE.
-        // var newAssertionCount = gDebug.assertionCount;
-        var newAssertionCount = 0;
+        var newAssertionCount = gDebug.assertionCount;
         var numAsserts = newAssertionCount - gAssertionCount;
         gAssertionCount = newAssertionCount;
 
         var minAsserts = gURLs[0].minAsserts;
         var maxAsserts = gURLs[0].maxAsserts;
 
         var expectedAssertions = "expected " + minAsserts;
         if (minAsserts != maxAsserts) {
             expectedAssertions += " to " + maxAsserts;
         }
         expectedAssertions += " assertions";
 
         if (numAsserts < minAsserts) {
             ++gTestResults.AssertionUnexpectedFixed;
-            dump("REFTEST TEST-UNEXPECTED-PASS | " + gURLs[0].prettyPath +
+            // TEMPORARILY DISABLING REPORTING ON TINDERBOX BY REVERSING
+            // THE WORD "UNEXPECTED".
+            dump("REFTEST TEST-DETCEPXENU-PASS | " + gURLs[0].prettyPath +
                  " | assertion count " + numAsserts + " is less than " +
                  expectedAssertions + "\n");
         } else if (numAsserts > maxAsserts) {
             ++gTestResults.AssertionUnexpected;
-            dump("REFTEST TEST-UNEXPECTED-FAIL | " + gURLs[0].prettyPath +
+            // TEMPORARILY DISABLING REPORTING ON TINDERBOX BY REVERSING
+            // THE WORD "UNEXPECTED".
+            dump("REFTEST TEST-DETCEPXENU-FAIL | " + gURLs[0].prettyPath +
                  " | assertion count " + numAsserts + " is more than " +
                  expectedAssertions + "\n");
         } else if (numAsserts != 0) {
             ++gTestResults.AssertionKnown;
             dump("REFTEST TEST-KNOWN-FAIL | " + gURLs[0].prettyPath +
                  " | assertion count " + numAsserts + " matches " +
                  expectedAssertions + "\n");
         }
