From: L. David Baron <dbaron@dbaron.org>

Add support for unprefixed calc(), and prefer serializing to unprefixed form.  (Bug 771678)  r=bzbarsky

This also converts all of the tests in layout/style/test/ to using
calc(), except that it duplicates all of the valid values and some of
the invalid values for 'width' and '-moz-column-rule-width' (which are
the two properties that intentionally have extensive calc() tests) in
property_database.js.

diff --git a/layout/style/CSSCalc.h b/layout/style/CSSCalc.h
--- a/layout/style/CSSCalc.h
+++ b/layout/style/CSSCalc.h
@@ -251,17 +251,17 @@ static void
 SerializeCalcInternal(const typename CalcOps::input_type& aValue, CalcOps &aOps);
 
 // Serialize the toplevel value in a calc() tree.  See big comment
 // above.
 template <class CalcOps>
 static void
 SerializeCalc(const typename CalcOps::input_type& aValue, CalcOps &aOps)
 {
-  aOps.Append("-moz-calc(");
+  aOps.Append("calc(");
   nsCSSUnit unit = CalcOps::GetUnit(aValue);
   if (unit == eCSSUnit_Calc) {
     const typename CalcOps::input_array_type *array = aValue.GetArrayValue();
     NS_ABORT_IF_FALSE(array->Count() == 1, "unexpected length");
     SerializeCalcInternal(array->Item(0), aOps);
   } else {
     SerializeCalcInternal(aValue, aOps);
   }
diff --git a/layout/style/nsCSSParser.cpp b/layout/style/nsCSSParser.cpp
--- a/layout/style/nsCSSParser.cpp
+++ b/layout/style/nsCSSParser.cpp
@@ -4613,17 +4613,18 @@ CSSParserImpl::ParseVariant(nsCSSValue& 
         SkipUntil(')');
         return false;
       }
       return true;
     }
   }
   if ((aVariantMask & VARIANT_CALC) &&
       (eCSSToken_Function == tk->mType) &&
-      tk->mIdent.LowerCaseEqualsLiteral("-moz-calc")) {
+      (tk->mIdent.LowerCaseEqualsLiteral("calc") ||
+       tk->mIdent.LowerCaseEqualsLiteral("-moz-calc"))) {
     // calc() currently allows only lengths and percents inside it.
     return ParseCalc(aValue, aVariantMask & VARIANT_LP);
   }
 
   UngetToken();
   return false;
 }
 
@@ -5245,17 +5246,18 @@ CSSParserImpl::IsLegacyGradientLine(cons
   switch (aType) {
   case eCSSToken_Percentage:
   case eCSSToken_Number:
   case eCSSToken_Dimension:
     haveGradientLine = true;
     break;
 
   case eCSSToken_Function:
-    if (aId.LowerCaseEqualsLiteral("-moz-calc")) {
+    if (aId.LowerCaseEqualsLiteral("calc") ||
+        aId.LowerCaseEqualsLiteral("-moz-calc")) {
       haveGradientLine = true;
       break;
     }
     // fall through
   case eCSSToken_ID:
   case eCSSToken_Ref:
     // this is a color
     break;
@@ -6243,17 +6245,18 @@ CSSParserImpl::ParseBackgroundItem(CSSPa
       if (!ParseSingleValueProperty(aState.mImage->mValue,
                                     eCSSProperty_background_image)) {
         return false;
       }
     } else if (tt == eCSSToken_Dimension ||
                tt == eCSSToken_Number ||
                tt == eCSSToken_Percentage ||
                (tt == eCSSToken_Function &&
-                mToken.mIdent.LowerCaseEqualsLiteral("-moz-calc"))) {
+                (mToken.mIdent.LowerCaseEqualsLiteral("calc") ||
+                 mToken.mIdent.LowerCaseEqualsLiteral("-moz-calc")))) {
       if (havePosition)
         return false;
       havePosition = true;
       if (!ParseBackgroundPositionValues(aState.mPosition->mValue, false)) {
         return false;
       }
     } else {
       if (haveColor)
diff --git a/layout/style/nsComputedDOMStyle.cpp b/layout/style/nsComputedDOMStyle.cpp
--- a/layout/style/nsComputedDOMStyle.cpp
+++ b/layout/style/nsComputedDOMStyle.cpp
@@ -1346,17 +1346,17 @@ nsComputedDOMStyle::DoGetBackgroundColor
 
 
 static void
 SetValueToCalc(const nsStyleCoord::Calc *aCalc, nsROCSSPrimitiveValue *aValue)
 {
   nsRefPtr<nsROCSSPrimitiveValue> val = new nsROCSSPrimitiveValue();
   nsAutoString tmp, result;
 
-  result.AppendLiteral("-moz-calc(");
+  result.AppendLiteral("calc(");
 
   val->SetAppUnits(aCalc->mLength);
   val->GetCssText(tmp);
   result.Append(tmp);
 
   if (aCalc->mHasPercent) {
     result.AppendLiteral(" + ");
 
diff --git a/layout/style/test/property_database.js b/layout/style/test/property_database.js
--- a/layout/style/test/property_database.js
+++ b/layout/style/test/property_database.js
@@ -179,26 +179,26 @@ var gCSSProperties = {
 		invalid_values: []
 	},
 	"-moz-border-end-width": {
 		domProp: "MozBorderEndWidth",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		get_computed: logical_box_prop_get_computed,
 		prerequisites: { "-moz-border-end-style": "solid" },
-		initial_values: [ "medium", "3px", "-moz-calc(4px - 1px)" ],
+		initial_values: [ "medium", "3px", "calc(4px - 1px)" ],
 		other_values: [ "thin", "thick", "1px", "2em",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(0em)",
-			"-moz-calc(0px)",
-			"-moz-calc(5em)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 5em)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(0em)",
+			"calc(0px)",
+			"calc(5em)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 5em)",
 		],
 		invalid_values: [ "5%" ]
 	},
 	"border-image": {
 		domProp: "borderImage",
 		inherited: false,
 		type: CSS_TYPE_TRUE_SHORTHAND,
 		subproperties: [ "border-image-source", "border-image-slice", "border-image-width", "border-image-outset", "border-image-repeat" ],
@@ -282,105 +282,105 @@ var gCSSProperties = {
 		invalid_values: [ "red none", "red inherit", "red, green", "none red", "inherit red" ]
 	},
 	"border-radius": {
 		domProp: "borderRadius",
 		inherited: false,
 		type: CSS_TYPE_TRUE_SHORTHAND,
 		prerequisites: { "width": "200px", "height": "100px", "display": "inline-block"},
 		subproperties: [ "border-bottom-left-radius", "border-bottom-right-radius", "border-top-left-radius", "border-top-right-radius" ],
-		initial_values: [ "0", "0px", "0%", "0px 0 0 0px", "-moz-calc(-2px)", "-moz-calc(-1%)", "-moz-calc(0px) -moz-calc(0pt) -moz-calc(0%) -moz-calc(0em)" ],
+		initial_values: [ "0", "0px", "0%", "0px 0 0 0px", "calc(-2px)", "calc(-1%)", "calc(0px) calc(0pt) calc(0%) calc(0em)" ],
 		other_values: [ "3%", "1px", "2em", "3em 2px", "2pt 3% 4em", "2px 2px 2px 2px", // circular
 						"3% / 2%", "1px / 4px", "2em / 1em", "3em 2px / 2px 3em", "2pt 3% 4em / 4pt 1% 5em", "2px 2px 2px 2px / 4px 4px 4px 4px", "1pt / 2pt 3pt", "4pt 5pt / 3pt", // elliptical
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(3*25px) 5px",
-			"5px -moz-calc(3*25px)",
-			"-moz-calc(20%) -moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
-			"2px 2px -moz-calc(2px + 1%) 2px",
-			"1px 2px 2px 2px / 2px 2px -moz-calc(2px + 1%) 2px",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(3*25px) 5px",
+			"5px calc(3*25px)",
+			"calc(20%) calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
+			"2px 2px calc(2px + 1%) 2px",
+			"1px 2px 2px 2px / 2px 2px calc(2px + 1%) 2px",
 					  ],
 		invalid_values: [ "2px -2px", "inherit 2px", "inherit / 2px", "2px inherit", "2px / inherit", "2px 2px 2px 2px 2px", "1px / 2px 2px 2px 2px 2px" ]
 	},
 	"border-bottom-left-radius": {
 		domProp: "borderBottomLeftRadius",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "width": "200px", "height": "100px", "display": "inline-block"},
-		initial_values: [ "0", "0px", "0%", "-moz-calc(-2px)", "-moz-calc(-1%)" ],
+		initial_values: [ "0", "0px", "0%", "calc(-2px)", "calc(-1%)" ],
 		other_values: [ "3%", "1px", "2em", // circular
 						"3% 2%", "1px 4px", "2em 2pt", // elliptical
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(3*25px) 5px",
-			"5px -moz-calc(3*25px)",
-			"-moz-calc(20%) -moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(3*25px) 5px",
+			"5px calc(3*25px)",
+			"calc(20%) calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 					  ],
 		invalid_values: [ "-1px", "4px -2px", "inherit 2px", "2px inherit" ]
 	},
 	"border-bottom-right-radius": {
 		domProp: "borderBottomRightRadius",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "width": "200px", "height": "100px", "display": "inline-block"},
-		initial_values: [ "0", "0px", "0%", "-moz-calc(-2px)", "-moz-calc(-1%)" ],
+		initial_values: [ "0", "0px", "0%", "calc(-2px)", "calc(-1%)" ],
 		other_values: [ "3%", "1px", "2em", // circular
 						"3% 2%", "1px 4px", "2em 2pt", // elliptical
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(3*25px) 5px",
-			"5px -moz-calc(3*25px)",
-			"-moz-calc(20%) -moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(3*25px) 5px",
+			"5px calc(3*25px)",
+			"calc(20%) calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 					  ],
 		invalid_values: [ "-1px", "4px -2px", "inherit 2px", "2px inherit" ]
 	},
 	"border-top-left-radius": {
 		domProp: "borderTopLeftRadius",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "width": "200px", "height": "100px", "display": "inline-block"},
-		initial_values: [ "0", "0px", "0%", "-moz-calc(-2px)", "-moz-calc(-1%)" ],
+		initial_values: [ "0", "0px", "0%", "calc(-2px)", "calc(-1%)" ],
 		other_values: [ "3%", "1px", "2em", // circular
 						"3% 2%", "1px 4px", "2em 2pt", // elliptical
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(3*25px) 5px",
-			"5px -moz-calc(3*25px)",
-			"-moz-calc(20%) -moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(3*25px) 5px",
+			"5px calc(3*25px)",
+			"calc(20%) calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 					  ],
 		invalid_values: [ "-1px", "4px -2px", "inherit 2px", "2px inherit" ]
 	},
 	"border-top-right-radius": {
 		domProp: "borderTopRightRadius",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "width": "200px", "height": "100px", "display": "inline-block"},
-		initial_values: [ "0", "0px", "0%", "-moz-calc(-2px)", "-moz-calc(-1%)" ],
+		initial_values: [ "0", "0px", "0%", "calc(-2px)", "calc(-1%)" ],
 		other_values: [ "3%", "1px", "2em", // circular
 						"3% 2%", "1px 4px", "2em 2pt", // elliptical
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(3*25px) 5px",
-			"5px -moz-calc(3*25px)",
-			"-moz-calc(20%) -moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(3*25px) 5px",
+			"5px calc(3*25px)",
+			"calc(20%) calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 					  ],
 		invalid_values: [ "-1px", "4px -2px", "inherit 2px", "2px inherit" ]
 	},
 	"-moz-border-right-colors": {
 		domProp: "MozBorderRightColors",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "none" ],
@@ -416,26 +416,26 @@ var gCSSProperties = {
 		invalid_values: []
 	},
 	"-moz-border-start-width": {
 		domProp: "MozBorderStartWidth",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		get_computed: logical_box_prop_get_computed,
 		prerequisites: { "-moz-border-start-style": "solid" },
-		initial_values: [ "medium", "3px", "-moz-calc(4px - 1px)" ],
+		initial_values: [ "medium", "3px", "calc(4px - 1px)" ],
 		other_values: [ "thin", "thick", "1px", "2em",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(0em)",
-			"-moz-calc(0px)",
-			"-moz-calc(5em)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 5em)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(0em)",
+			"calc(0px)",
+			"calc(5em)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 5em)",
 		],
 		invalid_values: [ "5%" ]
 	},
 	"-moz-border-top-colors": {
 		domProp: "MozBorderTopColors",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "none" ],
@@ -516,26 +516,26 @@ var gCSSProperties = {
 		other_values: [ "1", "17" ],
 		// negative and zero invalid per editor's draft
 		invalid_values: [ "-1", "0", "3px" ]
 	},
 	"-moz-column-gap": {
 		domProp: "MozColumnGap",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
-		initial_values: [ "normal", "1em", "-moz-calc(-2em + 3em)" ],
+		initial_values: [ "normal", "1em", "calc(-2em + 3em)" ],
 		other_values: [ "2px", "4em",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(0px)",
-			"-moz-calc(0pt)",
-			"-moz-calc(5em)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 5em)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(0px)",
+			"calc(0pt)",
+			"calc(5em)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 5em)",
 		],
 		invalid_values: [ "3%", "-1px" ]
 	},
 	"-moz-column-rule": {
 		domProp: "MozColumnRule",
 		inherited: false,
 		type: CSS_TYPE_TRUE_SHORTHAND,
 		prerequisites: { "color": "green" },
@@ -548,20 +548,22 @@ var gCSSProperties = {
 		domProp: "MozColumnRuleWidth",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "-moz-column-rule-style": "solid" },
 		initial_values: [
 			"medium",
 			"3px",
 			"-moz-calc(3px)",
-			"-moz-calc(5em + 3px - 5em)"
+			"-moz-calc(5em + 3px - 5em)",
+			"calc(3px)",
+			"calc(5em + 3px - 5em)",
 		],
 		other_values: [ "thin", "15px",
-			/* valid calc() values */
+			/* valid -moz-calc() values */
 			"-moz-calc(-2px)",
 			"-moz-calc(2px)",
 			"-moz-calc(3em)",
 			"-moz-calc(3em + 2px)",
 			"-moz-calc( 3em + 2px)",
 			"-moz-calc(3em + 2px )",
 			"-moz-calc( 3em + 2px )",
 			"-moz-calc(3*25px)",
@@ -652,61 +654,169 @@ var gCSSProperties = {
 			// And test zero lengths while we're here.
 			"-moz-calc(2 * 0px)",
 			"-moz-calc(0 * 0px)",
 			"-moz-calc(2 * 0em)",
 			"-moz-calc(0 * 0em)",
 			"-moz-calc(0px * 0)",
 			"-moz-calc(0px * 2)",
 
+			/* valid calc() values */
+			"calc(-2px)",
+			"calc(2px)",
+			"calc(3em)",
+			"calc(3em + 2px)",
+			"calc( 3em + 2px)",
+			"calc(3em + 2px )",
+			"calc( 3em + 2px )",
+			"calc(3*25px)",
+			"calc(3 *25px)",
+			"calc(3 * 25px)",
+			"calc(3* 25px)",
+			"calc(25px*3)",
+			"calc(25px *3)",
+			"calc(25px* 3)",
+			"calc(25px * 3)",
+			"calc(25px * 3 / 4)",
+			"calc((25px * 3) / 4)",
+			"calc(25px * (3 / 4))",
+			"calc(3 * 25px / 4)",
+			"calc((3 * 25px) / 4)",
+			"calc(3 * (25px / 4))",
+			"calc(3em + 25px * 3 / 4)",
+			"calc(3em + (25px * 3) / 4)",
+			"calc(3em + 25px * (3 / 4))",
+			"calc(25px * 3 / 4 + 3em)",
+			"calc((25px * 3) / 4 + 3em)",
+			"calc(25px * (3 / 4) + 3em)",
+			"calc(3em + (25px * 3 / 4))",
+			"calc(3em + ((25px * 3) / 4))",
+			"calc(3em + (25px * (3 / 4)))",
+			"calc((25px * 3 / 4) + 3em)",
+			"calc(((25px * 3) / 4) + 3em)",
+			"calc((25px * (3 / 4)) + 3em)",
+			"calc(3*25px + 1in)",
+			"calc(1in - 3em + 2px)",
+			"calc(1in - (3em + 2px))",
+			"calc((1in - 3em) + 2px)",
+			"calc(50px/2)",
+			"calc(50px/(2 - 1))",
+			"calc(-3px)",
+			/* numeric reduction cases */
+			"calc(5 * 3 * 2em)",
+			"calc(2em * 5 * 3)",
+			"calc((5 * 3) * 2em)",
+			"calc(2em * (5 * 3))",
+			"calc((5 + 3) * 2em)",
+			"calc(2em * (5 + 3))",
+			"calc(2em / (5 + 3))",
+			"calc(2em * (5*2 + 3))",
+			"calc(2em * ((5*2) + 3))",
+			"calc(2em * (5*(2 + 3)))",
+
+			"calc((5 + 7) * 3em)",
+			"calc((5em + 3em) - 2em)",
+			"calc((5em - 3em) + 2em)",
+			"calc(2em - (5em - 3em))",
+			"calc(2em + (5em - 3em))",
+			"calc(2em - (5em + 3em))",
+			"calc(2em + (5em + 3em))",
+			"calc(2em + 5em - 3em)",
+			"calc(2em - 5em - 3em)",
+			"calc(2em + 5em + 3em)",
+			"calc(2em - 5em + 3em)",
+
+			"calc(2em / 4 * 3)",
+			"calc(2em * 4 / 3)",
+			"calc(2em * 4 * 3)",
+			"calc(2em / 4 / 3)",
+			"calc(4 * 2em / 3)",
+			"calc(4 / 3 * 2em)",
+
+			"calc((2em / 4) * 3)",
+			"calc((2em * 4) / 3)",
+			"calc((2em * 4) * 3)",
+			"calc((2em / 4) / 3)",
+			"calc((4 * 2em) / 3)",
+			"calc((4 / 3) * 2em)",
+
+			"calc(2em / (4 * 3))",
+			"calc(2em * (4 / 3))",
+			"calc(2em * (4 * 3))",
+			"calc(2em / (4 / 3))",
+			"calc(4 * (2em / 3))",
+
+			// Valid cases with unitless zero (which is never
+			// a length).
+			"calc(0 * 2em)",
+			"calc(2em * 0)",
+			"calc(3em + 0 * 2em)",
+			"calc(3em + 2em * 0)",
+			"calc((0 + 2) * 2em)",
+			"calc((2 + 0) * 2em)",
+			// And test zero lengths while we're here.
+			"calc(2 * 0px)",
+			"calc(0 * 0px)",
+			"calc(2 * 0em)",
+			"calc(0 * 0em)",
+			"calc(0px * 0)",
+			"calc(0px * 2)",
+
 		],
 		invalid_values: [ "20", "-1px", "red", "50%",
-			/* invalid calc() values */
+			/* invalid -moz-calc() values */
 			"-moz-calc(2em+ 2px)",
 			"-moz-calc(2em +2px)",
 			"-moz-calc(2em+2px)",
 			"-moz-calc(2em- 2px)",
 			"-moz-calc(2em -2px)",
 			"-moz-calc(2em-2px)",
+			/* invalid calc() values */
+			"calc(2em+ 2px)",
+			"calc(2em +2px)",
+			"calc(2em+2px)",
+			"calc(2em- 2px)",
+			"calc(2em -2px)",
+			"calc(2em-2px)",
 			"-moz-min()",
-			"-moz-calc(min())",
+			"calc(min())",
 			"-moz-max()",
-			"-moz-calc(max())",
+			"calc(max())",
 			"-moz-min(5px)",
-			"-moz-calc(min(5px))",
+			"calc(min(5px))",
 			"-moz-max(5px)",
-			"-moz-calc(max(5px))",
+			"calc(max(5px))",
 			"-moz-min(5px,2em)",
-			"-moz-calc(min(5px,2em))",
+			"calc(min(5px,2em))",
 			"-moz-max(5px,2em)",
-			"-moz-calc(max(5px,2em))",
-			"-moz-calc(50px/(2 - 2))",
-			"-moz-calc(5 + 5)",
-			"-moz-calc(5 * 5)",
-			"-moz-calc(5em * 5em)",
-			"-moz-calc(5em / 5em * 5em)",
+			"calc(max(5px,2em))",
+			"calc(50px/(2 - 2))",
+			"calc(5 + 5)",
+			"calc(5 * 5)",
+			"calc(5em * 5em)",
+			"calc(5em / 5em * 5em)",
 
-			"-moz-calc(4 * 3 / 2em)",
-			"-moz-calc((4 * 3) / 2em)",
-			"-moz-calc(4 * (3 / 2em))",
-			"-moz-calc(4 / (3 * 2em))",
+			"calc(4 * 3 / 2em)",
+			"calc((4 * 3) / 2em)",
+			"calc(4 * (3 / 2em))",
+			"calc(4 / (3 * 2em))",
 
 			// Tests for handling of unitless zero, which cannot
 			// be a length inside calc().
-			"-moz-calc(0)",
-			"-moz-calc(0 + 2em)",
-			"-moz-calc(2em + 0)",
-			"-moz-calc(0 * 2)",
-			"-moz-calc(2 * 0)",
-			"-moz-calc(1 * (2em + 0))",
-			"-moz-calc((2em + 0))",
-			"-moz-calc((2em + 0) * 1)",
-			"-moz-calc(1 * (0 + 2em))",
-			"-moz-calc((0 + 2em))",
-			"-moz-calc((0 + 2em) * 1)",
+			"calc(0)",
+			"calc(0 + 2em)",
+			"calc(2em + 0)",
+			"calc(0 * 2)",
+			"calc(2 * 0)",
+			"calc(1 * (2em + 0))",
+			"calc((2em + 0))",
+			"calc((2em + 0) * 1)",
+			"calc(1 * (0 + 2em))",
+			"calc((0 + 2em))",
+			"calc((0 + 2em) * 1)",
 		]
 	},
 	"-moz-column-rule-style": {
 		domProp: "MozColumnRuleStyle",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "none" ],
 		other_values: [ "solid", "hidden", "ridge", "groove", "inset", "outset", "double", "dotted", "dashed" ],
@@ -723,21 +833,21 @@ var gCSSProperties = {
 	},
 	"-moz-column-width": {
 		domProp: "MozColumnWidth",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "auto" ],
 		other_values: [
 			"15px",
-			"-moz-calc(15px)",
-			"-moz-calc(30px - 3em)",
-			"-moz-calc(-15px)",
+			"calc(15px)",
+			"calc(30px - 3em)",
+			"calc(-15px)",
 			"0px",
-			"-moz-calc(0px)"
+			"calc(0px)"
 		],
 		invalid_values: [ "20", "-1px", "50%" ]
 	},
 /* XXXdholbert In builds with MOZ_FLEXBOX enabled, this should be uncommented.
    (This would be #ifdef MOZ_FLEXBOX, if that worked in JS files.)
 	"-moz-align-items": {
 		domProp: "MozAlignItems",
 		inherited: false,
@@ -802,69 +912,69 @@ var gCSSProperties = {
 		initial_values: [ " auto" ],
         // NOTE: This is cribbed directly from the "width" chunk, since this
         // property takes the exact same values as width (albeit with
         // different semantics on 'auto').
         // XXXdholbert (Maybe these should get separated out into
         // a reusable array defined at the top of this file?)
 		other_values: [ "15px", "3em", "15%", "-moz-max-content", "-moz-min-content", "-moz-fit-content", "-moz-available",
 			// valid calc() values
-			"-moz-calc(-2px)",
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(50% + 2px)",
-			"-moz-calc( 50% + 2px)",
-			"-moz-calc(50% + 2px )",
-			"-moz-calc( 50% + 2px )",
-			"-moz-calc(50% - -2px)",
-			"-moz-calc(2px - -50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(3 *25px)",
-			"-moz-calc(3 * 25px)",
-			"-moz-calc(3* 25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(25px *3)",
-			"-moz-calc(25px* 3)",
-			"-moz-calc(25px * 3)",
-			"-moz-calc(3*25px + 50%)",
-			"-moz-calc(50% - 3em + 2px)",
-			"-moz-calc(50% - (3em + 2px))",
-			"-moz-calc((50% - 3em) + 2px)",
-			"-moz-calc(2em)",
-			"-moz-calc(50%)",
-			"-moz-calc(50px/2)",
-			"-moz-calc(50px/(2 - 1))"
+			"calc(-2px)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(50% + 2px)",
+			"calc( 50% + 2px)",
+			"calc(50% + 2px )",
+			"calc( 50% + 2px )",
+			"calc(50% - -2px)",
+			"calc(2px - -50%)",
+			"calc(3*25px)",
+			"calc(3 *25px)",
+			"calc(3 * 25px)",
+			"calc(3* 25px)",
+			"calc(25px*3)",
+			"calc(25px *3)",
+			"calc(25px* 3)",
+			"calc(25px * 3)",
+			"calc(3*25px + 50%)",
+			"calc(50% - 3em + 2px)",
+			"calc(50% - (3em + 2px))",
+			"calc((50% - 3em) + 2px)",
+			"calc(2em)",
+			"calc(50%)",
+			"calc(50px/2)",
+			"calc(50px/(2 - 1))"
 		],
 		invalid_values: [ "none", "-2px",
 			// invalid calc() values
-			"-moz-calc(50%+ 2px)",
-			"-moz-calc(50% +2px)",
-			"-moz-calc(50%+2px)",
+			"calc(50%+ 2px)",
+			"calc(50% +2px)",
+			"calc(50%+2px)",
 			"-moz-min()",
-			"-moz-calc(min())",
+			"calc(min())",
 			"-moz-max()",
-			"-moz-calc(max())",
+			"calc(max())",
 			"-moz-min(5px)",
-			"-moz-calc(min(5px))",
+			"calc(min(5px))",
 			"-moz-max(5px)",
-			"-moz-calc(max(5px))",
+			"calc(max(5px))",
 			"-moz-min(5px,2em)",
-			"-moz-calc(min(5px,2em))",
+			"calc(min(5px,2em))",
 			"-moz-max(5px,2em)",
-			"-moz-calc(max(5px,2em))",
-			"-moz-calc(50px/(2 - 2))",
+			"calc(max(5px,2em))",
+			"calc(50px/(2 - 2))",
 			// If we ever support division by values, which is
 			// complicated for the reasons described in
 			// http://lists.w3.org/Archives/Public/www-style/2010Jan/0007.html
 			// , we should support all 4 of these as described in
 			// http://lists.w3.org/Archives/Public/www-style/2009Dec/0296.html
-			"-moz-calc((3em / 100%) * 3em)",
-			"-moz-calc(3em / 100% * 3em)",
-			"-moz-calc(3em * (3em / 100%))",
-			"-moz-calc(3em * 3em / 100%)"
+			"calc((3em / 100%) * 3em)",
+			"calc(3em / 100% * 3em)",
+			"calc(3em * (3em / 100%))",
+			"calc(3em * 3em / 100%)"
 		]
 	},
 	"-moz-flex-direction": {
 		domProp: "MozFlexDirection",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "row" ],
 		other_values: [ "row-reverse", "column", "column-reverse" ],
@@ -929,172 +1039,172 @@ var gCSSProperties = {
 	},
 	"-moz-margin-end": {
 		domProp: "MozMarginEnd",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		get_computed: logical_box_prop_get_computed,
 		/* no subproperties */
 		/* auto may or may not be initial */
-		initial_values: [ "0", "0px", "0%", "0em", "0ex", "-moz-calc(0pt)", "-moz-calc(0% + 0px)" ],
+		initial_values: [ "0", "0px", "0%", "0em", "0ex", "calc(0pt)", "calc(0% + 0px)" ],
 		other_values: [ "1px", "3em",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: []
 	},
 	"-moz-margin-start": {
 		domProp: "MozMarginStart",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		get_computed: logical_box_prop_get_computed,
 		/* no subproperties */
 		/* auto may or may not be initial */
-		initial_values: [ "0", "0px", "0%", "0em", "0ex", "-moz-calc(0pt)", "-moz-calc(0% + 0px)" ],
+		initial_values: [ "0", "0px", "0%", "0em", "0ex", "calc(0pt)", "calc(0% + 0px)" ],
 		other_values: [ "1px", "3em",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: []
 	},
 	"-moz-outline-radius": {
 		domProp: "MozOutlineRadius",
 		inherited: false,
 		type: CSS_TYPE_TRUE_SHORTHAND,
 		prerequisites: { "width": "200px", "height": "100px", "display": "inline-block"},
 		subproperties: [ "-moz-outline-radius-bottomleft", "-moz-outline-radius-bottomright", "-moz-outline-radius-topleft", "-moz-outline-radius-topright" ],
-		initial_values: [ "0", "0px", "0%", "-moz-calc(-2px)", "-moz-calc(-1%)", "-moz-calc(0px) -moz-calc(0pt) -moz-calc(0%) -moz-calc(0em)" ],
+		initial_values: [ "0", "0px", "0%", "calc(-2px)", "calc(-1%)", "calc(0px) calc(0pt) calc(0%) calc(0em)" ],
 		other_values: [ "3%", "1px", "2em", "3em 2px", "2pt 3% 4em", "2px 2px 2px 2px", // circular
 						"3% / 2%", "1px / 4px", "2em / 1em", "3em 2px / 2px 3em", "2pt 3% 4em / 4pt 1% 5em", "2px 2px 2px 2px / 4px 4px 4px 4px", "1pt / 2pt 3pt", "4pt 5pt / 3pt", // elliptical
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(3*25px) 5px",
-			"5px -moz-calc(3*25px)",
-			"-moz-calc(20%) -moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
-			"2px 2px -moz-calc(2px + 1%) 2px",
-			"1px 2px 2px 2px / 2px 2px -moz-calc(2px + 1%) 2px",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(3*25px) 5px",
+			"5px calc(3*25px)",
+			"calc(20%) calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
+			"2px 2px calc(2px + 1%) 2px",
+			"1px 2px 2px 2px / 2px 2px calc(2px + 1%) 2px",
 					  ],
 		invalid_values: [ "2px -2px", "inherit 2px", "inherit / 2px", "2px inherit", "2px / inherit", "2px 2px 2px 2px 2px", "1px / 2px 2px 2px 2px 2px" ]
 	},
 	"-moz-outline-radius-bottomleft": {
 		domProp: "MozOutlineRadiusBottomleft",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "width": "200px", "height": "100px", "display": "inline-block"},
-		initial_values: [ "0", "0px", "0%", "-moz-calc(-2px)", "-moz-calc(-1%)", "-moz-calc(0px)" ],
+		initial_values: [ "0", "0px", "0%", "calc(-2px)", "calc(-1%)", "calc(0px)" ],
 		other_values: [ "3%", "1px", "2em", // circular
 						"3% 2%", "1px 4px", "2em 2pt", // elliptical
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(3*25px) 5px",
-			"5px -moz-calc(3*25px)",
-			"-moz-calc(20%) -moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(3*25px) 5px",
+			"5px calc(3*25px)",
+			"calc(20%) calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 					  ],
 		invalid_values: [ "-1px", "4px -2px", "inherit 2px", "2px inherit" ]
 	},
 	"-moz-outline-radius-bottomright": {
 		domProp: "MozOutlineRadiusBottomright",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "width": "200px", "height": "100px", "display": "inline-block"},
-		initial_values: [ "0", "0px", "0%", "-moz-calc(-2px)", "-moz-calc(-1%)", "-moz-calc(0px)" ],
+		initial_values: [ "0", "0px", "0%", "calc(-2px)", "calc(-1%)", "calc(0px)" ],
 		other_values: [ "3%", "1px", "2em", // circular
 						"3% 2%", "1px 4px", "2em 2pt", // elliptical
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(3*25px) 5px",
-			"5px -moz-calc(3*25px)",
-			"-moz-calc(20%) -moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(3*25px) 5px",
+			"5px calc(3*25px)",
+			"calc(20%) calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 					  ],
 		invalid_values: [ "-1px", "4px -2px", "inherit 2px", "2px inherit" ]
 	},
 	"-moz-outline-radius-topleft": {
 		domProp: "MozOutlineRadiusTopleft",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "width": "200px", "height": "100px", "display": "inline-block"},
-		initial_values: [ "0", "0px", "0%", "-moz-calc(-2px)", "-moz-calc(-1%)", "-moz-calc(0px)" ],
+		initial_values: [ "0", "0px", "0%", "calc(-2px)", "calc(-1%)", "calc(0px)" ],
 		other_values: [ "3%", "1px", "2em", // circular
 						"3% 2%", "1px 4px", "2em 2pt", // elliptical
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(3*25px) 5px",
-			"5px -moz-calc(3*25px)",
-			"-moz-calc(20%) -moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(3*25px) 5px",
+			"5px calc(3*25px)",
+			"calc(20%) calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 					  ],
 		invalid_values: [ "-1px", "4px -2px", "inherit 2px", "2px inherit" ]
 	},
 	"-moz-outline-radius-topright": {
 		domProp: "MozOutlineRadiusTopright",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "width": "200px", "height": "100px", "display": "inline-block"},
-		initial_values: [ "0", "0px", "0%", "-moz-calc(-2px)", "-moz-calc(-1%)", "-moz-calc(0px)" ],
+		initial_values: [ "0", "0px", "0%", "calc(-2px)", "calc(-1%)", "calc(0px)" ],
 		other_values: [ "3%", "1px", "2em", // circular
 						"3% 2%", "1px 4px", "2em 2pt", // elliptical
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(3*25px) 5px",
-			"5px -moz-calc(3*25px)",
-			"-moz-calc(20%) -moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(3*25px) 5px",
+			"5px calc(3*25px)",
+			"calc(20%) calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 					  ],
 		invalid_values: [ "-1px", "4px -2px", "inherit 2px", "2px inherit" ]
 	},
 	"-moz-padding-end": {
 		domProp: "MozPaddingEnd",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		get_computed: logical_box_prop_get_computed,
 		/* no subproperties */
-		initial_values: [ "0", "0px", "0%", "0em", "0ex", "-moz-calc(0pt)", "-moz-calc(0% + 0px)", "-moz-calc(-3px)", "-moz-calc(-1%)" ],
+		initial_values: [ "0", "0px", "0%", "0em", "0ex", "calc(0pt)", "calc(0% + 0px)", "calc(-3px)", "calc(-1%)" ],
 		other_values: [ "1px", "3em",
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: []
 	},
 	"-moz-padding-start": {
 		domProp: "MozPaddingStart",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		get_computed: logical_box_prop_get_computed,
 		/* no subproperties */
-		initial_values: [ "0", "0px", "0%", "0em", "0ex", "-moz-calc(0pt)", "-moz-calc(0% + 0px)", "-moz-calc(-3px)", "-moz-calc(-1%)" ],
+		initial_values: [ "0", "0px", "0%", "0em", "0ex", "calc(0pt)", "calc(0% + 0px)", "calc(-3px)", "calc(-1%)" ],
 		other_values: [ "1px", "3em",
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: []
 	},
 	"resize": {
 		domProp: "resize",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "display": "block", "overflow": "auto" },
@@ -1142,21 +1252,21 @@ var gCSSProperties = {
 			"skewy(0)", "skewx(30grad)", "skewx(30rad)", "skewx(0.08turn)",
 			"skewy(30deg)", "skewy(30grad)", "skewy(30rad)", "skewy(0.08turn)",
 			"rotate(45deg) scale(2, 1)", "skewx(45deg) skewx(-50grad)",
 			"translate(0, 0) scale(1, 1) skewx(0) skewy(0) matrix(1, 0, 0, 1, 0, 0)",
 			"translatex(50%)", "translatey(50%)", "translate(50%)",
 			"translate(3%, 5px)", "translate(5px, 3%)",
 			"matrix(1, 2, 3, 4, 5, 6)",
 			/* valid calc() values */
-			"translatex(-moz-calc(5px + 10%))",
-			"translatey(-moz-calc(0.25 * 5px + 10% / 3))",
-			"translate(-moz-calc(5px - 10% * 3))",
-			"translate(-moz-calc(5px - 3 * 10%), 50px)",
-			"translate(-50px, -moz-calc(5px - 10% * 3))",
+			"translatex(calc(5px + 10%))",
+			"translatey(calc(0.25 * 5px + 10% / 3))",
+			"translate(calc(5px - 10% * 3))",
+			"translate(calc(5px - 3 * 10%), 50px)",
+			"translate(-50px, calc(5px - 10% * 3))",
 		].concat(SpecialPowers.getBoolPref("layout.3d-transforms.enabled") ? [
 			"translatez(1px)", "translatez(4em)", "translatez(-4px)",
 			"translatez(0px)", "translatez(2px) translatez(5px)",
 			"translate3d(3px, 4px, 5px)", "translate3d(2em, 3px, 1em)",
 			"translatex(2px) translate3d(4px, 5px, 6px) translatey(1px)",
 			"scale3d(4, 4, 4)", "scale3d(-2, 3, -7)", "scalez(4)",
 			"scalez(-6)", "rotate3d(2, 3, 4, 45deg)",
 			"rotate3d(-3, 7, 0, 12rad)", "rotatex(15deg)", "rotatey(-12grad)",
@@ -1170,19 +1280,19 @@ var gCSSProperties = {
 			"skewx(red)", "matrix(1%, 0, 0, 0, 0px, 0px)",
 			"matrix(0, 1%, 2, 3, 4px,5px)", "matrix(0, 1, 2%, 3, 4px, 5px)",
 			"matrix(0, 1, 2, 3%, 4%, 5%)", "matrix(1, 2, 3, 4, 5px, 6%)",
 			"matrix(1, 2, 3, 4, 5%, 6px)", "matrix(1, 2, 3, 4, 5%, 6%)",
 			"matrix(1, 2, 3, 4, 5px, 6em)",
 			/* invalid calc() values */
 			"translatey(-moz-min(5px,10%))",
 			"translatex(-moz-max(5px,10%))",
-			"translate(10px, -moz-calc(min(5px,10%)))",
-			"translate(-moz-calc(max(5px,10%)), 10%)",
-			"matrix(1, 0, 0, 1, -moz-max(5px * 3), -moz-calc(10% - 3px))",
+			"translate(10px, calc(min(5px,10%)))",
+			"translate(calc(max(5px,10%)), 10%)",
+			"matrix(1, 0, 0, 1, -moz-max(5px * 3), calc(10% - 3px))",
 			// Bug 734953
 			"skew(45deg)", "skew(45deg, 45deg)",
 		].concat(SpecialPowers.getBoolPref("layout.3d-transforms.enabled") ? [
 			"perspective(0px)", "perspective(-10px)", "matrix3d(dinosaur)",
 			"matrix3d(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17)",
 			"matrix3d(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15)",
 			"matrix3d(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15%, 16)",
 			"matrix3d(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16px)",
@@ -1199,26 +1309,26 @@ var gCSSProperties = {
 		prerequisites: { "width": "10px", "height": "10px", "display": "block"},
 		initial_values: [ "50% 50%", "center", "center center" ],
 		other_values: [ "25% 25%", "6px 5px", "20% 3em", "0 0", "0in 1in",
 						"top", "bottom","top left", "top right",
 						"top center", "center left", "center right",
 						"bottom left", "bottom right", "bottom center",
 						"20% center", "6px center", "13in bottom",
 						"left 50px", "right 13%", "center 40px",
-			"-moz-calc(20px)",
-			"-moz-calc(20px) 10px",
-			"10px -moz-calc(20px)",
-			"-moz-calc(20px) 25%",
-			"25% -moz-calc(20px)",
-			"-moz-calc(20px) -moz-calc(20px)",
-			"-moz-calc(20px + 1em) -moz-calc(20px / 2)",
-			"-moz-calc(20px + 50%) -moz-calc(50% - 10px)",
-			"-moz-calc(-20px) -moz-calc(-50%)",
-			"-moz-calc(-20%) -moz-calc(-50%)"
+			"calc(20px)",
+			"calc(20px) 10px",
+			"10px calc(20px)",
+			"calc(20px) 25%",
+			"25% calc(20px)",
+			"calc(20px) calc(20px)",
+			"calc(20px + 1em) calc(20px / 2)",
+			"calc(20px + 50%) calc(50% - 10px)",
+			"calc(-20px) calc(-50%)",
+			"calc(-20%) calc(-50%)"
 		],
 		invalid_values: ["red", "auto", "none", "0.5 0.5", "40px #0000ff",
 						 "border", "center red", "right diagonal",
 						 "#00ffff bottom"]
 	},
     "perspective-origin": {
         domProp: "perspectiveOrigin",
         inherited: false,
@@ -1227,26 +1337,26 @@ var gCSSProperties = {
         prerequisites: { "width": "10px", "height": "10px", "display": "block"},
         initial_values: [ "50% 50%", "center", "center center" ],
         other_values: [ "25% 25%", "6px 5px", "20% 3em", "0 0", "0in 1in",
                         "top", "bottom","top left", "top right",
                         "top center", "center left", "center right",
                         "bottom left", "bottom right", "bottom center",
                         "20% center", "6px center", "13in bottom",
                         "left 50px", "right 13%", "center 40px",
-                        "-moz-calc(20px)",
-                        "-moz-calc(20px) 10px",
-                        "10px -moz-calc(20px)",
-                        "-moz-calc(20px) 25%",
-                        "25% -moz-calc(20px)",
-                        "-moz-calc(20px) -moz-calc(20px)",
-                        "-moz-calc(20px + 1em) -moz-calc(20px / 2)",
-                        "-moz-calc(20px + 50%) -moz-calc(50% - 10px)",
-                        "-moz-calc(-20px) -moz-calc(-50%)",
-                        "-moz-calc(-20%) -moz-calc(-50%)" ],
+                        "calc(20px)",
+                        "calc(20px) 10px",
+                        "10px calc(20px)",
+                        "calc(20px) 25%",
+                        "25% calc(20px)",
+                        "calc(20px) calc(20px)",
+                        "calc(20px + 1em) calc(20px / 2)",
+                        "calc(20px + 50%) calc(50% - 10px)",
+                        "calc(-20px) calc(-50%)",
+                        "calc(-20%) calc(-50%)" ],
         invalid_values: [ "red", "auto", "none", "0.5 0.5", "40px #0000ff",
                           "border", "center red", "right diagonal",
                           "#00ffff bottom"]
     },
     "perspective": {
 		domProp: "perspective",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
@@ -1659,28 +1769,28 @@ var gCSSProperties = {
 		"repeating-radial-gradient(30% 40% at top left, red, blue)",
 		"repeating-radial-gradient(50px 60px at 15% 20%, red, blue)",
 		"repeating-radial-gradient(7em 8em at 45px, red, blue)",
 
 		"-moz-image-rect(url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAKElEQVR42u3NQQ0AAAgEoNP+nTWFDzcoQE1udQQCgUAgEAgEAsGTYAGjxAE/G/Q2tQAAAABJRU5ErkJggg==), 2, 10, 10, 2)",
 		"-moz-image-rect(url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAKElEQVR42u3NQQ0AAAgEoNP+nTWFDzcoQE1udQQCgUAgEAgEAsGTYAGjxAE/G/Q2tQAAAABJRU5ErkJggg==), 10%, 50%, 30%, 0%)",
 		"-moz-image-rect(url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAKElEQVR42u3NQQ0AAAgEoNP+nTWFDzcoQE1udQQCgUAgEAgEAsGTYAGjxAE/G/Q2tQAAAABJRU5ErkJggg==), 10, 50%, 30%, 0)",
 
-		"-moz-radial-gradient(-moz-calc(25%) top, red, blue)",
-		"-moz-radial-gradient(left -moz-calc(25%), red, blue)",
-		"-moz-radial-gradient(-moz-calc(25px) top, red, blue)",
-		"-moz-radial-gradient(left -moz-calc(25px), red, blue)",
-		"-moz-radial-gradient(-moz-calc(-25%) top, red, blue)",
-		"-moz-radial-gradient(left -moz-calc(-25%), red, blue)",
-		"-moz-radial-gradient(-moz-calc(-25px) top, red, blue)",
-		"-moz-radial-gradient(left -moz-calc(-25px), red, blue)",
-		"-moz-radial-gradient(-moz-calc(100px + -25%) top, red, blue)",
-		"-moz-radial-gradient(left -moz-calc(100px + -25%), red, blue)",
-		"-moz-radial-gradient(-moz-calc(100px + -25px) top, red, blue)",
-		"-moz-radial-gradient(left -moz-calc(100px + -25px), red, blue)",
+		"-moz-radial-gradient(calc(25%) top, red, blue)",
+		"-moz-radial-gradient(left calc(25%), red, blue)",
+		"-moz-radial-gradient(calc(25px) top, red, blue)",
+		"-moz-radial-gradient(left calc(25px), red, blue)",
+		"-moz-radial-gradient(calc(-25%) top, red, blue)",
+		"-moz-radial-gradient(left calc(-25%), red, blue)",
+		"-moz-radial-gradient(calc(-25px) top, red, blue)",
+		"-moz-radial-gradient(left calc(-25px), red, blue)",
+		"-moz-radial-gradient(calc(100px + -25%) top, red, blue)",
+		"-moz-radial-gradient(left calc(100px + -25%), red, blue)",
+		"-moz-radial-gradient(calc(100px + -25px) top, red, blue)",
+		"-moz-radial-gradient(left calc(100px + -25px), red, blue)",
 		],
 		invalid_values: [
 			"-moz-element(#a:1)",
 			"-moz-element(a#a)",
 			"-moz-element(#a a)",
 			"-moz-element(#a+a)",
 			"-moz-element(#a()",
 			/* Old syntax */
@@ -1907,26 +2017,26 @@ var gCSSProperties = {
 		invalid_values: [ "margin-box", "padding-box padding-box" ]
 	},
 	"background-position": {
 		domProp: "backgroundPosition",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "top 0% left 0%", "top 0% left", "top left", "left top", "0% 0%", "0% top", "left 0%" ],
 		other_values: [ "top", "left", "right", "bottom", "center", "center bottom", "bottom center", "center right", "right center", "center top", "top center", "center left", "left center", "right bottom", "bottom right", "50%", "top left, top left", "top left, top right", "top right, top left", "left top, 0% 0%", "10% 20%, 30%, 40%", "top left, bottom right", "right bottom, left top", "0%", "0px", "30px", "0%, 10%, 20%, 30%", "top, top, top, top, top",
-			"-moz-calc(20px)",
-			"-moz-calc(20px) 10px",
-			"10px -moz-calc(20px)",
-			"-moz-calc(20px) 25%",
-			"25% -moz-calc(20px)",
-			"-moz-calc(20px) -moz-calc(20px)",
-			"-moz-calc(20px + 1em) -moz-calc(20px / 2)",
-			"-moz-calc(20px + 50%) -moz-calc(50% - 10px)",
-			"-moz-calc(-20px) -moz-calc(-50%)",
-			"-moz-calc(-20%) -moz-calc(-50%)",
+			"calc(20px)",
+			"calc(20px) 10px",
+			"10px calc(20px)",
+			"calc(20px) 25%",
+			"25% calc(20px)",
+			"calc(20px) calc(20px)",
+			"calc(20px + 1em) calc(20px / 2)",
+			"calc(20px + 50%) calc(50% - 10px)",
+			"calc(-20px) calc(-50%)",
+			"calc(-20%) calc(-50%)",
 			"0px 0px",
 			"right 20px top 60px",
 			"right 20px bottom 60px",
 			"left 20px top 60px",
 			"left 20px bottom 60px",
 			"right -50px top -50px",
 			"left -50px bottom -50px",
 			"right 20px top -50px",
@@ -1970,36 +2080,36 @@ var gCSSProperties = {
 		                  "repeat-y repeat" ]
 	},
 	"background-size": {
 		domProp: "backgroundSize",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "auto", "auto auto" ],
 		other_values: [ "contain", "cover", "100px auto", "auto 100px", "100% auto", "auto 100%", "25% 50px", "3em 40%",
-			"-moz-calc(20px)",
-			"-moz-calc(20px) 10px",
-			"10px -moz-calc(20px)",
-			"-moz-calc(20px) 25%",
-			"25% -moz-calc(20px)",
-			"-moz-calc(20px) -moz-calc(20px)",
-			"-moz-calc(20px + 1em) -moz-calc(20px / 2)",
-			"-moz-calc(20px + 50%) -moz-calc(50% - 10px)",
-			"-moz-calc(-20px) -moz-calc(-50%)",
-			"-moz-calc(-20%) -moz-calc(-50%)"
+			"calc(20px)",
+			"calc(20px) 10px",
+			"10px calc(20px)",
+			"calc(20px) 25%",
+			"25% calc(20px)",
+			"calc(20px) calc(20px)",
+			"calc(20px + 1em) calc(20px / 2)",
+			"calc(20px + 50%) calc(50% - 10px)",
+			"calc(-20px) calc(-50%)",
+			"calc(-20%) calc(-50%)"
 		],
 		invalid_values: [ "contain contain", "cover cover", "cover auto", "auto cover", "contain cover", "cover contain", "-5px 3px", "3px -5px", "auto -5px", "-5px auto" ]
 	},
 	"border": {
 		domProp: "border",
 		inherited: false,
 		type: CSS_TYPE_TRUE_SHORTHAND,
 		subproperties: [ "border-bottom-color", "border-bottom-style", "border-bottom-width", "border-left-color", "border-left-style", "border-left-width", "border-right-color", "border-right-style", "border-right-width", "border-top-color", "border-top-style", "border-top-width", "-moz-border-top-colors", "-moz-border-right-colors", "-moz-border-bottom-colors", "-moz-border-left-colors", "border-image-source", "border-image-slice", "border-image-width", "border-image-outset", "border-image-repeat" ],
-		initial_values: [ "none", "medium", "currentColor", "thin", "none medium currentcolor", "-moz-calc(4px - 1px) none" ],
-		other_values: [ "solid", "medium solid", "green solid", "10px solid", "thick solid", "-moz-calc(2px) solid blue" ],
+		initial_values: [ "none", "medium", "currentColor", "thin", "none medium currentcolor", "calc(4px - 1px) none" ],
+		other_values: [ "solid", "medium solid", "green solid", "10px solid", "thick solid", "calc(2px) solid blue" ],
 		invalid_values: [ "5%" ]
 	},
 	"border-bottom": {
 		domProp: "borderBottom",
 		inherited: false,
 		type: CSS_TYPE_TRUE_SHORTHAND,
 		subproperties: [ "border-bottom-color", "border-bottom-style", "border-bottom-width" ],
 		initial_values: [ "none", "medium", "currentColor", "thin", "none medium currentcolor" ],
@@ -2024,26 +2134,26 @@ var gCSSProperties = {
 		other_values: [ "solid", "dashed", "dotted", "double", "outset", "inset", "groove", "ridge" ],
 		invalid_values: []
 	},
 	"border-bottom-width": {
 		domProp: "borderBottomWidth",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "border-bottom-style": "solid" },
-		initial_values: [ "medium", "3px", "-moz-calc(4px - 1px)" ],
+		initial_values: [ "medium", "3px", "calc(4px - 1px)" ],
 		other_values: [ "thin", "thick", "1px", "2em",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(0em)",
-			"-moz-calc(0px)",
-			"-moz-calc(5em)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 5em)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(0em)",
+			"calc(0px)",
+			"calc(5em)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 5em)",
 		],
 		invalid_values: [ "5%" ]
 	},
 	"border-collapse": {
 		domProp: "borderCollapse",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "separate" ],
@@ -2086,26 +2196,26 @@ var gCSSProperties = {
 		other_values: [ "solid", "dashed", "dotted", "double", "outset", "inset", "groove", "ridge" ],
 		invalid_values: []
 	},
 	"border-left-width": {
 		domProp: "borderLeftWidth",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		prerequisites: { "border-left-style": "solid" },
-		initial_values: [ "medium", "3px", "-moz-calc(4px - 1px)" ],
+		initial_values: [ "medium", "3px", "calc(4px - 1px)" ],
 		other_values: [ "thin", "thick", "1px", "2em",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(0em)",
-			"-moz-calc(0px)",
-			"-moz-calc(5em)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 5em)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(0em)",
+			"calc(0px)",
+			"calc(5em)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 5em)",
 		],
 		invalid_values: [ "5%" ]
 	},
 	"border-right": {
 		domProp: "borderRight",
 		inherited: false,
 		type: CSS_TYPE_TRUE_SHORTHAND,
 		subproperties: [ "border-right-color", "border-right-style", "border-right-width" ],
@@ -2131,35 +2241,35 @@ var gCSSProperties = {
 		other_values: [ "solid", "dashed", "dotted", "double", "outset", "inset", "groove", "ridge" ],
 		invalid_values: []
 	},
 	"border-right-width": {
 		domProp: "borderRightWidth",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		prerequisites: { "border-right-style": "solid" },
-		initial_values: [ "medium", "3px", "-moz-calc(4px - 1px)" ],
+		initial_values: [ "medium", "3px", "calc(4px - 1px)" ],
 		other_values: [ "thin", "thick", "1px", "2em",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(0em)",
-			"-moz-calc(0px)",
-			"-moz-calc(5em)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 5em)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(0em)",
+			"calc(0px)",
+			"calc(5em)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 5em)",
 		],
 		invalid_values: [ "5%" ]
 	},
 	"border-spacing": {
 		domProp: "borderSpacing",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
-		initial_values: [ "0", "0 0", "0px", "0 0px", "-moz-calc(0px)", "-moz-calc(0px) -moz-calc(0em)", "-moz-calc(2em - 2em) -moz-calc(3px + 7px - 10px)", "-moz-calc(-5px)", "-moz-calc(-5px) -moz-calc(-5px)" ],
-		other_values: [ "3px", "4em 2px", "4em 0", "0px 2px", "-moz-calc(7px)", "0 -moz-calc(7px)", "-moz-calc(7px) 0", "-moz-calc(0px) -moz-calc(7px)", "-moz-calc(7px) -moz-calc(0px)", "7px -moz-calc(0px)", "-moz-calc(0px) 7px", "7px -moz-calc(0px)", "3px -moz-calc(2em)" ],
+		initial_values: [ "0", "0 0", "0px", "0 0px", "calc(0px)", "calc(0px) calc(0em)", "calc(2em - 2em) calc(3px + 7px - 10px)", "calc(-5px)", "calc(-5px) calc(-5px)" ],
+		other_values: [ "3px", "4em 2px", "4em 0", "0px 2px", "calc(7px)", "0 calc(7px)", "calc(7px) 0", "calc(0px) calc(7px)", "calc(7px) calc(0px)", "7px calc(0px)", "calc(0px) 7px", "7px calc(0px)", "3px calc(2em)" ],
 		invalid_values: [ "0%", "0 0%", "-5px", "-5px -5px", "0 -5px", "-5px 0" ]
 	},
 	"border-style": {
 		domProp: "borderStyle",
 		inherited: false,
 		type: CSS_TYPE_TRUE_SHORTHAND,
 		subproperties: [ "border-top-style", "border-right-style", "border-bottom-style", "border-left-style" ],
 		/* XXX hidden is sometimes the same as initial */
@@ -2194,76 +2304,76 @@ var gCSSProperties = {
 		other_values: [ "solid", "dashed", "dotted", "double", "outset", "inset", "groove", "ridge" ],
 		invalid_values: []
 	},
 	"border-top-width": {
 		domProp: "borderTopWidth",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "border-top-style": "solid" },
-		initial_values: [ "medium", "3px", "-moz-calc(4px - 1px)" ],
+		initial_values: [ "medium", "3px", "calc(4px - 1px)" ],
 		other_values: [ "thin", "thick", "1px", "2em",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(0em)",
-			"-moz-calc(0px)",
-			"-moz-calc(5em)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 5em)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(0em)",
+			"calc(0px)",
+			"calc(5em)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 5em)",
 		],
 		invalid_values: [ "5%" ]
 	},
 	"border-width": {
 		domProp: "borderWidth",
 		inherited: false,
 		type: CSS_TYPE_TRUE_SHORTHAND,
 		subproperties: [ "border-top-width", "border-right-width", "border-bottom-width", "border-left-width" ],
 		prerequisites: { "border-style": "solid" },
-		initial_values: [ "medium", "3px", "medium medium", "3px medium medium", "medium 3px medium medium", "-moz-calc(3px) 3px -moz-calc(5px - 2px) -moz-calc(2px - -1px)" ],
-		other_values: [ "thin", "thick", "1px", "2em", "2px 0 0px 1em", "-moz-calc(2em)" ],
+		initial_values: [ "medium", "3px", "medium medium", "3px medium medium", "medium 3px medium medium", "calc(3px) 3px calc(5px - 2px) calc(2px - -1px)" ],
+		other_values: [ "thin", "thick", "1px", "2em", "2px 0 0px 1em", "calc(2em)" ],
 		invalid_values: [ "5%" ]
 	},
 	"bottom": {
 		domProp: "bottom",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		/* FIXME: run tests with multiple prerequisites */
 		prerequisites: { "position": "relative" },
 		/* XXX 0 may or may not be equal to auto */
 		initial_values: [ "auto" ],
 		other_values: [ "32px", "-3em", "12%",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: []
 	},
 	"box-shadow": {
 		domProp: "boxShadow",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "none" ],
 		prerequisites: { "color": "blue" },
 		other_values: [ "2px 2px", "2px 2px 1px", "2px 2px 2px 2px", "blue 3px 2px", "2px 2px 1px 5px green", "2px 2px red", "green 2px 2px 1px", "green 2px 2px, blue 1px 3px 4px", "currentColor 3px 3px", "blue 2px 2px, currentColor 1px 2px, 1px 2px 3px 2px orange", "3px 0 0 0", "inset 2px 2px 3px 4px black", "2px -2px green inset, 4px 4px 3px blue, inset 2px 2px",
 			/* calc() values */
-			"2px 2px -moz-calc(-5px)", /* clamped */
-			"-moz-calc(3em - 2px) 2px green",
-			"green -moz-calc(3em - 2px) 2px",
-			"2px -moz-calc(2px + 0.2em)",
-			"blue 2px -moz-calc(2px + 0.2em)",
-			"2px -moz-calc(2px + 0.2em) blue",
-			"-moz-calc(-2px) -moz-calc(-2px)",
+			"2px 2px calc(-5px)", /* clamped */
+			"calc(3em - 2px) 2px green",
+			"green calc(3em - 2px) 2px",
+			"2px calc(2px + 0.2em)",
+			"blue 2px calc(2px + 0.2em)",
+			"2px calc(2px + 0.2em) blue",
+			"calc(-2px) calc(-2px)",
 			"-2px -2px",
-			"-moz-calc(2px) -moz-calc(2px)",
-			"-moz-calc(2px) -moz-calc(2px) -moz-calc(2px)",
-			"-moz-calc(2px) -moz-calc(2px) -moz-calc(2px) -moz-calc(2px)"
+			"calc(2px) calc(2px)",
+			"calc(2px) calc(2px) calc(2px)",
+			"calc(2px) calc(2px) calc(2px) calc(2px)"
 		],
 		invalid_values: [ "3% 3%", "1px 1px 1px 1px 1px", "2px 2px, none", "red 2px 2px blue", "inherit, 2px 2px", "2px 2px, inherit", "2px 2px -5px", "inset 4px 4px black inset", "inset inherit", "inset none" ]
 	},
 	"caption-side": {
 		domProp: "captionSide",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "top" ],
@@ -2427,27 +2537,27 @@ var gCSSProperties = {
 		invalid_values: [ "TRK", "ja" ]
 	},
 	"font-size": {
 		domProp: "fontSize",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "medium",
 			"1rem",
-			"-moz-calc(1rem)",
-			"-moz-calc(0.75rem + 200% - 125% + 0.25rem - 75%)"
+			"calc(1rem)",
+			"calc(0.75rem + 200% - 125% + 0.25rem - 75%)"
 		],
 		other_values: [ "large", "2em", "50%", "xx-small", "36pt", "8px",
 			"0px",
 			"0%",
-			"-moz-calc(2em)",
-			"-moz-calc(36pt + 75% + (30% + 2em + 2px))",
-			"-moz-calc(-2em)",
-			"-moz-calc(-50%)",
-			"-moz-calc(-1px)"
+			"calc(2em)",
+			"calc(36pt + 75% + (30% + 2em + 2px))",
+			"calc(-2em)",
+			"calc(-50%)",
+			"calc(-1px)"
 		],
 		invalid_values: [ "-2em", "-50%", "-1px" ]
 	},
 	"font-size-adjust": {
 		domProp: "fontSizeAdjust",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "none" ],
@@ -2490,21 +2600,21 @@ var gCSSProperties = {
 		domProp: "height",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		/* FIXME: test zero, and test calc clamping */
 		initial_values: [ " auto" ],
 		/* computed value tests for height test more with display:block */
 		prerequisites: { "display": "block" },
 		other_values: [ "15px", "3em", "15%",
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ "none", "-moz-max-content", "-moz-min-content", "-moz-fit-content", "-moz-available" ]
 	},
 	"ime-mode": {
 		domProp: "imeMode",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "auto" ],
@@ -2515,33 +2625,33 @@ var gCSSProperties = {
 		domProp: "left",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		/* FIXME: run tests with multiple prerequisites */
 		prerequisites: { "position": "relative" },
 		/* XXX 0 may or may not be equal to auto */
 		initial_values: [ "auto" ],
 		other_values: [ "32px", "-3em", "12%",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: []
 	},
 	"letter-spacing": {
 		domProp: "letterSpacing",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "normal" ],
 		other_values: [ "0", "0px", "1em", "2px", "-3px",
-			"-moz-calc(0px)", "-moz-calc(1em)", "-moz-calc(1em + 3px)",
-			"-moz-calc(15px / 2)", "-moz-calc(15px/2)", "-moz-calc(-3px)"
+			"calc(0px)", "calc(1em)", "calc(1em + 3px)",
+			"calc(15px / 2)", "calc(15px/2)", "calc(-3px)"
 		],
 		invalid_values: []
 	},
 	"line-height": {
 		domProp: "lineHeight",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		/*
@@ -2620,83 +2730,83 @@ var gCSSProperties = {
 		other_values: [ "3px 0", "2em 4px 2pt", "1em 2em 3px 4px" ],
 		invalid_values: []
 	},
 	"margin-bottom": {
 		domProp: "marginBottom",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		/* XXX testing auto has prerequisites */
-		initial_values: [ "0", "0px", "0%", "-moz-calc(0pt)", "-moz-calc(0% + 0px)" ],
+		initial_values: [ "0", "0px", "0%", "calc(0pt)", "calc(0% + 0px)" ],
 		other_values: [ "1px", "2em", "5%",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ ]
 	},
 	"margin-left": {
 		domProp: "marginLeft",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		/* no subproperties */
 		/* XXX testing auto has prerequisites */
-		initial_values: [ "0", "0px", "0%", "-moz-calc(0pt)", "-moz-calc(0% + 0px)" ],
+		initial_values: [ "0", "0px", "0%", "calc(0pt)", "calc(0% + 0px)" ],
 		other_values: [ "1px", "2em", "5%", ".5px", "+32px", "+.789px", "-.328px", "+0.56px", "-0.974px", "237px", "-289px", "-056px", "1987.45px", "-84.32px",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ "..25px", ".+5px", ".px", "-.px", "++5px", "-+4px", "+-3px", "--7px", "+-.6px", "-+.5px", "++.7px", "--.4px" ]
 	},
 	"margin-right": {
 		domProp: "marginRight",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		/* no subproperties */
 		/* XXX testing auto has prerequisites */
-		initial_values: [ "0", "0px", "0%", "-moz-calc(0pt)", "-moz-calc(0% + 0px)" ],
+		initial_values: [ "0", "0px", "0%", "calc(0pt)", "calc(0% + 0px)" ],
 		other_values: [ "1px", "2em", "5%",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ ]
 	},
 	"margin-top": {
 		domProp: "marginTop",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		/* XXX testing auto has prerequisites */
-		initial_values: [ "0", "0px", "0%", "-moz-calc(0pt)", "-moz-calc(0% + 0px)" ],
+		initial_values: [ "0", "0px", "0%", "calc(0pt)", "calc(0% + 0px)" ],
 		other_values: [ "1px", "2em", "5%",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ ]
 	},
 	"marker-offset": {
 		domProp: "markerOffset",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "auto" ],
-		other_values: [ "6em", "-1px", "-moz-calc(0px)", "-moz-calc(3em + 2px - 4px)", "-moz-calc(-2em)" ],
+		other_values: [ "6em", "-1px", "calc(0px)", "calc(3em + 2px - 4px)", "calc(-2em)" ],
 		invalid_values: []
 	},
 	"marks": {
 		/* XXX not a real property; applies only to page context */
 		domProp: "marks",
 		inherited: false,
 		backend_only: true,
 		type: CSS_TYPE_LONGHAND,
@@ -2706,70 +2816,70 @@ var gCSSProperties = {
 	},
 	"max-height": {
 		domProp: "maxHeight",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "display": "block" },
 		initial_values: [ "none" ],
 		other_values: [ "30px", "50%", "0",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(0px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(0px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ "auto", "-moz-max-content", "-moz-min-content", "-moz-fit-content", "-moz-available" ]
 	},
 	"max-width": {
 		domProp: "maxWidth",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "display": "block" },
 		initial_values: [ "none" ],
 		other_values: [ "30px", "50%", "0", "-moz-max-content", "-moz-min-content", "-moz-fit-content", "-moz-available",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(0px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(0px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ "auto" ]
 	},
 	"min-height": {
 		domProp: "minHeight",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "display": "block" },
-		initial_values: [ "auto", "0", "-moz-calc(0em)", "-moz-calc(-2px)", "-moz-calc(-1%)" ],
+		initial_values: [ "auto", "0", "calc(0em)", "calc(-2px)", "calc(-1%)" ],
 		other_values: [ "30px", "50%",
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ "none", "-moz-max-content", "-moz-min-content", "-moz-fit-content", "-moz-available" ]
 	},
 	"min-width": {
 		domProp: "minWidth",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "display": "block" },
-		initial_values: [ "auto", "0", "-moz-calc(0em)", "-moz-calc(-2px)", "-moz-calc(-1%)" ],
+		initial_values: [ "auto", "0", "calc(0em)", "calc(-2px)", "calc(-1%)" ],
 		other_values: [ "30px", "50%", "-moz-max-content", "-moz-min-content", "-moz-fit-content", "-moz-available",
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ "none" ]
 	},
 	"opacity": {
 		domProp: "opacity",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "1", "17", "397.376" ],
@@ -2816,44 +2926,44 @@ var gCSSProperties = {
 		initial_values: [ "currentColor", "-moz-use-text-color" ], // XXX should be invert
 		other_values: [ "green", "rgba(255,128,0,0.5)", "transparent" ],
 		invalid_values: [ "#0", "#00", "#0000", "#00000", "#0000000", "#00000000", "#000000000" ]
 	},
 	"outline-offset": {
 		domProp: "outlineOffset",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
-		initial_values: [ "0", "0px", "-0", "-moz-calc(0px)", "-moz-calc(3em + 2px - 2px - 3em)", "-moz-calc(-0em)" ],
-		other_values: [ "-3px", "1em", "-moz-calc(3em)", "-moz-calc(7pt + 3 * 2em)", "-moz-calc(-3px)" ],
+		initial_values: [ "0", "0px", "-0", "calc(0px)", "calc(3em + 2px - 2px - 3em)", "calc(-0em)" ],
+		other_values: [ "-3px", "1em", "calc(3em)", "calc(7pt + 3 * 2em)", "calc(-3px)" ],
 		invalid_values: [ "5%" ]
 	},
 	"outline-style": {
 		domProp: "outlineStyle",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		// XXX Should 'hidden' be the same as initial?
 		initial_values: [ "none" ],
 		other_values: [ "solid", "dashed", "dotted", "double", "outset", "inset", "groove", "ridge" ],
 		invalid_values: []
 	},
 	"outline-width": {
 		domProp: "outlineWidth",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "outline-style": "solid" },
-		initial_values: [ "medium", "3px", "-moz-calc(4px - 1px)" ],
+		initial_values: [ "medium", "3px", "calc(4px - 1px)" ],
 		other_values: [ "thin", "thick", "1px", "2em",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(0px)",
-			"-moz-calc(0px)",
-			"-moz-calc(5em)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 5em)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(0px)",
+			"calc(0px)",
+			"calc(5em)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 5em)",
 		],
 		invalid_values: [ "5%" ]
 	},
 	"overflow": {
 		domProp: "overflow",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		prerequisites: { "display": "block" },
@@ -2880,75 +2990,75 @@ var gCSSProperties = {
 		other_values: [ "auto", "scroll", "hidden" ],
 		invalid_values: []
 	},
 	"padding": {
 		domProp: "padding",
 		inherited: false,
 		type: CSS_TYPE_TRUE_SHORTHAND,
 		subproperties: [ "padding-top", "padding-right", "padding-bottom", "padding-left" ],
-		initial_values: [ "0", "0px 0 0em", "0% 0px 0em 0pt", "-moz-calc(0px) -moz-calc(0em) -moz-calc(-2px) -moz-calc(-1%)" ],
+		initial_values: [ "0", "0px 0 0em", "0% 0px 0em 0pt", "calc(0px) calc(0em) calc(-2px) calc(-1%)" ],
 		other_values: [ "3px 0", "2em 4px 2pt", "1em 2em 3px 4px" ],
 		invalid_values: []
 	},
 	"padding-bottom": {
 		domProp: "paddingBottom",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
-		initial_values: [ "0", "0px", "0%", "-moz-calc(0pt)", "-moz-calc(0% + 0px)", "-moz-calc(-3px)", "-moz-calc(-1%)" ],
+		initial_values: [ "0", "0px", "0%", "calc(0pt)", "calc(0% + 0px)", "calc(-3px)", "calc(-1%)" ],
 		other_values: [ "1px", "2em", "5%",
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ ]
 	},
 	"padding-left": {
 		domProp: "paddingLeft",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		/* no subproperties */
-		initial_values: [ "0", "0px", "0%", "-moz-calc(0pt)", "-moz-calc(0% + 0px)", "-moz-calc(-3px)", "-moz-calc(-1%)" ],
+		initial_values: [ "0", "0px", "0%", "calc(0pt)", "calc(0% + 0px)", "calc(-3px)", "calc(-1%)" ],
 		other_values: [ "1px", "2em", "5%",
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ ]
 	},
 	"padding-right": {
 		domProp: "paddingRight",
 		inherited: false,
 		type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
 		/* no subproperties */
-		initial_values: [ "0", "0px", "0%", "-moz-calc(0pt)", "-moz-calc(0% + 0px)", "-moz-calc(-3px)", "-moz-calc(-1%)" ],
+		initial_values: [ "0", "0px", "0%", "calc(0pt)", "calc(0% + 0px)", "calc(-3px)", "calc(-1%)" ],
 		other_values: [ "1px", "2em", "5%",
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ ]
 	},
 	"padding-top": {
 		domProp: "paddingTop",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
-		initial_values: [ "0", "0px", "0%", "-moz-calc(0pt)", "-moz-calc(0% + 0px)", "-moz-calc(-3px)", "-moz-calc(-1%)" ],
+		initial_values: [ "0", "0px", "0%", "calc(0pt)", "calc(0% + 0px)", "calc(-3px)", "calc(-1%)" ],
 		other_values: [ "1px", "2em", "5%",
-			"-moz-calc(2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: [ ]
 	},
 	"page": {
 		domProp: "page",
 		inherited: true,
 		backend_only: true,
 		type: CSS_TYPE_LONGHAND,
@@ -3011,22 +3121,22 @@ var gCSSProperties = {
 		domProp: "right",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		/* FIXME: run tests with multiple prerequisites */
 		prerequisites: { "position": "relative" },
 		/* XXX 0 may or may not be equal to auto */
 		initial_values: [ "auto" ],
 		other_values: [ "32px", "-3em", "12%",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: []
 	},
 	"size": {
 		/* XXX not a real property; applies only to page context */
 		domProp: "size",
 		inherited: false,
 		backend_only: true,
@@ -3105,24 +3215,24 @@ var gCSSProperties = {
 		initial_values: [ "solid" ],
 		other_values: [ "double", "dotted", "dashed", "wavy", "-moz-none" ],
 		invalid_values: [ "none", "groove", "ridge", "inset", "outset", "solid dashed", "wave" ]
 	},
 	"text-indent": {
 		domProp: "textIndent",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
-		initial_values: [ "0", "-moz-calc(3em - 5em + 2px + 2em - 2px)" ],
+		initial_values: [ "0", "calc(3em - 5em + 2px + 2em - 2px)" ],
 		other_values: [ "2em", "5%", "-10px",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: []
 	},
 	"text-overflow": {
 		domProp: "textOverflow",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "clip" ],
@@ -3132,29 +3242,29 @@ var gCSSProperties = {
 	"text-shadow": {
 		domProp: "textShadow",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		prerequisites: { "color": "blue" },
 		initial_values: [ "none" ],
 		other_values: [ "2px 2px", "2px 2px 1px", "2px 2px green", "2px 2px 1px green", "green 2px 2px", "green 2px 2px 1px", "green 2px 2px, blue 1px 3px 4px", "currentColor 3px 3px", "blue 2px 2px, currentColor 1px 2px",
 			/* calc() values */
-			"2px 2px -moz-calc(-5px)", /* clamped */
-			"-moz-calc(3em - 2px) 2px green",
-			"green -moz-calc(3em - 2px) 2px",
-			"2px -moz-calc(2px + 0.2em)",
-			"blue 2px -moz-calc(2px + 0.2em)",
-			"2px -moz-calc(2px + 0.2em) blue",
-			"-moz-calc(-2px) -moz-calc(-2px)",
+			"2px 2px calc(-5px)", /* clamped */
+			"calc(3em - 2px) 2px green",
+			"green calc(3em - 2px) 2px",
+			"2px calc(2px + 0.2em)",
+			"blue 2px calc(2px + 0.2em)",
+			"2px calc(2px + 0.2em) blue",
+			"calc(-2px) calc(-2px)",
 			"-2px -2px",
-			"-moz-calc(2px) -moz-calc(2px)",
-			"-moz-calc(2px) -moz-calc(2px) -moz-calc(2px)",
+			"calc(2px) calc(2px)",
+			"calc(2px) calc(2px) calc(2px)",
 		],
 		invalid_values: [ "3% 3%", "2px 2px -5px", "2px 2px 2px 2px", "2px 2px, none", "none, 2px 2px", "inherit, 2px 2px", "2px 2px, inherit",
-			"-moz-calc(2px) -moz-calc(2px) -moz-calc(2px) -moz-calc(2px)"
+			"calc(2px) calc(2px) calc(2px) calc(2px)"
 		]
 	},
 	"text-transform": {
 		domProp: "textTransform",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "none" ],
 		other_values: [ "capitalize", "uppercase", "lowercase" ],
@@ -3164,22 +3274,22 @@ var gCSSProperties = {
 		domProp: "top",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		/* FIXME: run tests with multiple prerequisites */
 		prerequisites: { "position": "relative" },
 		/* XXX 0 may or may not be equal to auto */
 		initial_values: [ "auto" ],
 		other_values: [ "32px", "-3em", "12%",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: []
 	},
 	"transition": {
 		domProp: "transition",
 		inherited: false,
 		type: CSS_TYPE_TRUE_SHORTHAND,
 		subproperties: [ "transition-property", "transition-duration", "transition-timing-function", "transition-delay" ],
@@ -3228,22 +3338,22 @@ var gCSSProperties = {
 		invalid_values: [ "auto", "none", "normal embed", "normal bidi-override", "normal -moz-isolate", "normal -moz-plaintext", "embed normal", "embed -moz-isolate", "embed bidi-override", "embed -moz-plaintext", "bidi-override normal", "bidi-override embed", "bidi-override -moz-plaintext", "-moz-isolate normal", "-moz-isolate embed", "-moz-isolate -moz-plaintext", "-moz-plaintext normal", "-moz-plaintext embed", "-moz-plaintext bidi-override", "-moz-plaintext -moz-isolate" ]
 	},
 	"vertical-align": {
 		domProp: "verticalAlign",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "baseline" ],
 		other_values: [ "sub", "super", "top", "text-top", "middle", "bottom", "text-bottom", "15%", "3px", "0.2em", "-5px", "-3%",
-			"-moz-calc(2px)",
-			"-moz-calc(-2px)",
-			"-moz-calc(50%)",
-			"-moz-calc(3*25px)",
-			"-moz-calc(25px*3)",
-			"-moz-calc(3*25px + 50%)",
+			"calc(2px)",
+			"calc(-2px)",
+			"calc(50%)",
+			"calc(3*25px)",
+			"calc(25px*3)",
+			"calc(3*25px + 50%)",
 		],
 		invalid_values: []
 	},
 	"visibility": {
 		domProp: "visibility",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "visible" ],
@@ -3272,17 +3382,17 @@ var gCSSProperties = {
 		domProp: "width",
 		inherited: false,
 		type: CSS_TYPE_LONGHAND,
 		/* computed value tests for width test more with display:block */
 		prerequisites: { "display": "block" },
 		initial_values: [ " auto" ],
 		/* XXX these have prerequisites */
 		other_values: [ "15px", "3em", "15%", "-moz-max-content", "-moz-min-content", "-moz-fit-content", "-moz-available",
-			/* valid calc() values */
+			/* valid -moz-calc() values */
 			"-moz-calc(-2px)",
 			"-moz-calc(2px)",
 			"-moz-calc(50%)",
 			"-moz-calc(50% + 2px)",
 			"-moz-calc( 50% + 2px)",
 			"-moz-calc(50% + 2px )",
 			"-moz-calc( 50% + 2px )",
 			"-moz-calc(50% - -2px)",
@@ -3297,67 +3407,97 @@ var gCSSProperties = {
 			"-moz-calc(25px * 3)",
 			"-moz-calc(3*25px + 50%)",
 			"-moz-calc(50% - 3em + 2px)",
 			"-moz-calc(50% - (3em + 2px))",
 			"-moz-calc((50% - 3em) + 2px)",
 			"-moz-calc(2em)",
 			"-moz-calc(50%)",
 			"-moz-calc(50px/2)",
-			"-moz-calc(50px/(2 - 1))"
+			"-moz-calc(50px/(2 - 1))",
+			/* valid calc() values */
+			"calc(-2px)",
+			"calc(2px)",
+			"calc(50%)",
+			"calc(50% + 2px)",
+			"calc( 50% + 2px)",
+			"calc(50% + 2px )",
+			"calc( 50% + 2px )",
+			"calc(50% - -2px)",
+			"calc(2px - -50%)",
+			"calc(3*25px)",
+			"calc(3 *25px)",
+			"calc(3 * 25px)",
+			"calc(3* 25px)",
+			"calc(25px*3)",
+			"calc(25px *3)",
+			"calc(25px* 3)",
+			"calc(25px * 3)",
+			"calc(3*25px + 50%)",
+			"calc(50% - 3em + 2px)",
+			"calc(50% - (3em + 2px))",
+			"calc((50% - 3em) + 2px)",
+			"calc(2em)",
+			"calc(50%)",
+			"calc(50px/2)",
+			"calc(50px/(2 - 1))",
 		],
 		invalid_values: [ "none", "-2px",
-			/* invalid calc() values */
+			/* invalid -moz-calc() values */
 			"-moz-calc(50%+ 2px)",
 			"-moz-calc(50% +2px)",
 			"-moz-calc(50%+2px)",
+			/* invalid calc() values */
+			"calc(50%+ 2px)",
+			"calc(50% +2px)",
+			"calc(50%+2px)",
 			"-moz-min()",
-			"-moz-calc(min())",
+			"calc(min())",
 			"-moz-max()",
-			"-moz-calc(max())",
+			"calc(max())",
 			"-moz-min(5px)",
-			"-moz-calc(min(5px))",
+			"calc(min(5px))",
 			"-moz-max(5px)",
-			"-moz-calc(max(5px))",
+			"calc(max(5px))",
 			"-moz-min(5px,2em)",
-			"-moz-calc(min(5px,2em))",
+			"calc(min(5px,2em))",
 			"-moz-max(5px,2em)",
-			"-moz-calc(max(5px,2em))",
-			"-moz-calc(50px/(2 - 2))",
+			"calc(max(5px,2em))",
+			"calc(50px/(2 - 2))",
 			/* If we ever support division by values, which is
 			 * complicated for the reasons described in
 			 * http://lists.w3.org/Archives/Public/www-style/2010Jan/0007.html
 			 * , we should support all 4 of these as described in
 			 * http://lists.w3.org/Archives/Public/www-style/2009Dec/0296.html
 			 */
-			"-moz-calc((3em / 100%) * 3em)",
-			"-moz-calc(3em / 100% * 3em)",
-			"-moz-calc(3em * (3em / 100%))",
-			"-moz-calc(3em * 3em / 100%)"
+			"calc((3em / 100%) * 3em)",
+			"calc(3em / 100% * 3em)",
+			"calc(3em * (3em / 100%))",
+			"calc(3em * 3em / 100%)",
 		]
 	},
 	"word-break": {
 		domProp: "wordBreak",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "normal" ],
 		other_values: [ "break-all", "keep-all" ],
 		invalid_values: []
 	},
 	"word-spacing": {
 		domProp: "wordSpacing",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "normal", "0", "0px", "-0em",
-			"-moz-calc(-0px)", "-moz-calc(0em)"
+			"calc(-0px)", "calc(0em)"
 		],
 		other_values: [ "1em", "2px", "-3px",
-			"-moz-calc(1em)", "-moz-calc(1em + 3px)",
-			"-moz-calc(15px / 2)", "-moz-calc(15px/2)",
-			"-moz-calc(-2em)"
+			"calc(1em)", "calc(1em + 3px)",
+			"calc(15px / 2)", "calc(15px/2)",
+			"calc(-2em)"
 		],
 		invalid_values: []
 	},
 	"word-wrap": {
 		domProp: "wordWrap",
 		inherited: true,
 		type: CSS_TYPE_LONGHAND,
 		initial_values: [ "normal" ],
diff --git a/layout/style/test/test_computed_style.html b/layout/style/test/test_computed_style.html
--- a/layout/style/test/test_computed_style.html
+++ b/layout/style/test/test_computed_style.html
@@ -131,27 +131,27 @@ var noframe_container = document.getElem
 })();
 
 (function test_bug_647885_1() {
   // Test that various background-position styles round-trip correctly
   var backgroundPositions = [
     [ "0 0", "0px 0px", "unitless 0" ],
     [ "0px 0px", "0px 0px", "0 with units" ],
     [ "0% 0%", "0% 0%", "0%" ],
-    [ "-moz-calc(0px) 0", "0px 0px", "0 calc with units x" ],
-    [ "0 -moz-calc(0px)", "0px 0px", "0 calc with units y" ],
-    [ "-moz-calc(3px - 3px) 0", "0px 0px", "computed 0 calc with units x" ],
-    [ "0 -moz-calc(3px - 3px)", "0px 0px", "computed 0 calc with units y" ],
-    [ "-moz-calc(0%) 0", "0% 0px", "0% calc x"],
-    [ "0 -moz-calc(0%)", "0px 0%", "0% calc y"],
-    [ "-moz-calc(3px + 2% - 2%) 0", "-moz-calc(3px + 0%) 0px",
+    [ "calc(0px) 0", "0px 0px", "0 calc with units x" ],
+    [ "0 calc(0px)", "0px 0px", "0 calc with units y" ],
+    [ "calc(3px - 3px) 0", "0px 0px", "computed 0 calc with units x" ],
+    [ "0 calc(3px - 3px)", "0px 0px", "computed 0 calc with units y" ],
+    [ "calc(0%) 0", "0% 0px", "0% calc x"],
+    [ "0 calc(0%)", "0px 0%", "0% calc y"],
+    [ "calc(3px + 2% - 2%) 0", "calc(3px + 0%) 0px",
       "computed 0% calc x"],
-    [ "0 -moz-calc(3px + 2% - 2%)", "0px -moz-calc(3px + 0%)",
+    [ "0 calc(3px + 2% - 2%)", "0px calc(3px + 0%)",
       "computed 0% calc y"],
-    [ "-moz-calc(3px - 5px) -moz-calc(6px - 7px)", "-2px -1px",
+    [ "calc(3px - 5px) calc(6px - 7px)", "-2px -1px",
       "negative pixel width"],
     [ "", "0% 0%", "initial value" ],
   ];
 
   var p = document.createElement("p");
   var cs = getComputedStyle(p, "");
   frame_container.appendChild(p);
 
@@ -165,28 +165,28 @@ var noframe_container = document.getElem
 })();
 
 (function test_bug_647885_2() {
   // Test that various background-size styles round-trip correctly
   var backgroundSizes = [
     [ "0 0", "0px 0px", "unitless 0" ],
     [ "0px 0px", "0px 0px", "0 with units" ],
     [ "0% 0%", "0% 0%", "0%" ],
-    [ "-moz-calc(0px) 0", "0px 0px", "0 calc with units horizontal" ],
-    [ "0 -moz-calc(0px)", "0px 0px", "0 calc with units vertical" ],
-    [ "-moz-calc(3px - 3px) 0", "0px 0px", "computed 0 calc with units horizontal" ],
-    [ "0 -moz-calc(3px - 3px)", "0px 0px", "computed 0 calc with units vertical" ],
-    [ "-moz-calc(0%) 0", "0% 0px", "0% calc horizontal"],
-    [ "0 -moz-calc(0%)", "0px 0%", "0% calc vertical"],
-    [ "-moz-calc(3px + 2% - 2%) 0", "-moz-calc(3px + 0%) 0px",
+    [ "calc(0px) 0", "0px 0px", "0 calc with units horizontal" ],
+    [ "0 calc(0px)", "0px 0px", "0 calc with units vertical" ],
+    [ "calc(3px - 3px) 0", "0px 0px", "computed 0 calc with units horizontal" ],
+    [ "0 calc(3px - 3px)", "0px 0px", "computed 0 calc with units vertical" ],
+    [ "calc(0%) 0", "0% 0px", "0% calc horizontal"],
+    [ "0 calc(0%)", "0px 0%", "0% calc vertical"],
+    [ "calc(3px + 2% - 2%) 0", "calc(3px + 0%) 0px",
                       "computed 0% calc horizontal"],
-    [ "0 -moz-calc(3px + 2% - 2%)", "0px -moz-calc(3px + 0%)",
+    [ "0 calc(3px + 2% - 2%)", "0px calc(3px + 0%)",
                       "computed 0% calc vertical"],
-    [ "-moz-calc(3px - 5px) -moz-calc(6px - 9px)",
-      "-moz-calc(-2px) -moz-calc(-3px)", "negative pixel width" ],
+    [ "calc(3px - 5px) calc(6px - 9px)",
+      "calc(-2px) calc(-3px)", "negative pixel width" ],
     [ "", "auto auto", "initial value" ],
   ];
 
   var p = document.createElement("p");
   var cs = getComputedStyle(p, "");
   frame_container.appendChild(p);
 
   for (var i = 0; i < backgroundSizes.length; ++i) {
diff --git a/layout/style/test/test_flexbox_flex_shorthand.html b/layout/style/test/test_flexbox_flex_shorthand.html
--- a/layout/style/test/test_flexbox_flex_shorthand.html
+++ b/layout/style/test/test_flexbox_flex_shorthand.html
@@ -120,22 +120,22 @@ let gFlexShorthandTestcases = [
     "-moz-flex":        "auto",
     "-moz-flex-basis":  "auto",
   },
   {
     "-moz-flex":        "-moz-fit-content",
     "-moz-flex-basis":  "-moz-fit-content",
   },
   {
-    "-moz-flex":        "-moz-calc(5px + 6px)",
+    "-moz-flex":        "calc(5px + 6px)",
     "-moz-flex-basis":  "11px",
   },
   {
-    "-moz-flex":        "-moz-calc(15% + 30px)",
-    "-moz-flex-basis":  "-moz-calc(30px + 15%)",
+    "-moz-flex":        "calc(15% + 30px)",
+    "-moz-flex-basis":  "calc(30px + 15%)",
   },
 
   // Two Values (numeric) --> sets flex-grow, flex-shrink
   // ----------------------------------------------------
   {
     "-moz-flex":        "0 0",
     "-moz-flex-grow":   "0",
     "-moz-flex-shrink": "0",
@@ -194,19 +194,19 @@ let gFlexShorthandTestcases = [
     "-moz-flex-basis":  "auto",
   },
   {
     "-moz-flex":        "5 -moz-fit-content",
     "-moz-flex-grow":   "5",
     "-moz-flex-basis":  "-moz-fit-content",
   },
   {
-    "-moz-flex":        "-moz-calc(5% + 10px) 3",
+    "-moz-flex":        "calc(5% + 10px) 3",
     "-moz-flex-grow":   "3",
-    "-moz-flex-basis":  "-moz-calc(10px + 5%)",
+    "-moz-flex-basis":  "calc(10px + 5%)",
   },
 
   // Three Values --> Sets all three subproperties
   // ---------------------------------------------
   {
     "-moz-flex":        "0.0 0.00 0px",
     "-moz-flex-grow":   "0",
     "-moz-flex-shrink": "0",
diff --git a/layout/style/test/test_transitions_per_property.html b/layout/style/test/test_transitions_per_property.html
--- a/layout/style/test/test_transitions_per_property.html
+++ b/layout/style/test/test_transitions_per_property.html
@@ -532,44 +532,44 @@ function test_length_percent_calc_transi
   div.style.setProperty("transition-property", prop, "");
   div.style.setProperty(prop, "200px", "");
   var v2v = cs.getPropertyValue(prop);
   is(any_unit_to_num(v2v) * 8, 5*a + 3*b + 4*c,
      "interpolation between length and percent for " + prop + ": '"
      + v2v + "'");
 
   div.style.setProperty("transition-property", "none", "");
-  div.style.setProperty(prop, "-moz-calc(25% + 100px)", "");
+  div.style.setProperty(prop, "calc(25% + 100px)", "");
   v1v = cs.getPropertyValue(prop);
   is(any_unit_to_num(v1v) * 4, b + 4*c,
      "computed value before transition for " + prop + ": '" + v1v + "'");
   div.style.setProperty("transition-property", prop, "");
   div.style.setProperty(prop, "75%", "");
   v2v = cs.getPropertyValue(prop);
   is(any_unit_to_num(v2v) * 8, 5*a + 3*b + 6*c,
      "interpolation between calc() and percent for " + prop + ": '" +
      v2v + "'");
 
   div.style.setProperty("transition-property", "none", "");
   div.style.setProperty(prop, "150px", "");
   v1v = cs.getPropertyValue(prop);
   is(any_unit_to_num(v1v) * 2, c * 3,
      "computed value before transition for " + prop + ": '" + v1v + "'");
   div.style.setProperty("transition-property", prop, "");
-  div.style.setProperty(prop, "-moz-calc(50% + 50px)", "");
+  div.style.setProperty(prop, "calc(50% + 50px)", "");
   v2v = cs.getPropertyValue(prop);
   is(any_unit_to_num(v2v) * 8, 7 * a + b + 10*c,
      "interpolation between length and calc() for " + prop + ": '" +
      v2v + "'");
 
-  check_distance(prop, "50%", "-moz-calc(37.5% + 50px)", "200px");
-  check_distance(prop, "-moz-calc(25% + 100px)", "-moz-calc(37.5% + 75px)",
+  check_distance(prop, "50%", "calc(37.5% + 50px)", "200px");
+  check_distance(prop, "calc(25% + 100px)", "calc(37.5% + 75px)",
                        "75%");
-  check_distance(prop, "150px", "-moz-calc(125px + 12.5%)",
-                       "-moz-calc(50% + 50px)");
+  check_distance(prop, "150px", "calc(125px + 12.5%)",
+                       "calc(50% + 50px)");
 }
 
 function test_color_transition(prop) {
   div.style.setProperty("transition-property", "none", "");
   div.style.setProperty(prop, "rgb(255, 28, 0)", "");
   is(cs.getPropertyValue(prop), "rgb(255, 28, 0)",
      "color-valued property " + prop + ": computed value before transition");
   div.style.setProperty("transition-property", prop, "");
@@ -834,17 +834,17 @@ function test_radius_transition(prop) {
   div.style.setProperty(prop, "6.25% 12.5%", "");
   is(cs.getPropertyValue(prop), "16px 32px",
      "radius-valued property " + prop + ": computed value before transition");
   div.style.setProperty("transition-property", prop, "");
   div.style.setProperty(prop, "64px 16px", "");
   is(cs.getPropertyValue(prop), "28px",
      "radius-valued property " + prop + ": interpolation of radius with mixed units");
   check_distance(prop, "6.25% 12.5%",
-                 "-moz-calc(4.6875% + 16px) -moz-calc(9.375% + 4px)",
+                 "calc(4.6875% + 16px) calc(9.375% + 4px)",
                  "64px 16px");
 
   div.style.setProperty("transition-timing-function", FUNC_NEGATIVE, "");
   div.style.setProperty("transition-property", "none", "");
   div.style.setProperty(prop, "0px 0px", "");
   is(cs.getPropertyValue(prop), "0px",
      "radius-valued property " + prop + ": flush before clamping test");
   div.style.setProperty("transition-property", prop, "");
@@ -1236,30 +1236,30 @@ function test_background_position_size_c
      "property " + prop + ": interpolation of lists of lengths and percents");
   check_distance(prop, "10px 40%, 50% 50px, 30% 20%, 5px 10px",
                        "20px 35%, 55% 50px, 30% 25%, 10px 20px",
                        "50px 20%, 70% 50px, 30% 40%, 25px 50px");
   div.style.setProperty(prop, "20% 40%, 8px 12px", "");
   is(cs.getPropertyValue(prop), "20% 40%, 8px 12px",
      "property " + prop + ": computed value before transition");
   div.style.setProperty(prop, "12px 20px, 40% 16%", "");
-  is(cs.getPropertyValue(prop), "-moz-calc(3px + 15%) -moz-calc(5px + 30%), -moz-calc(6px + 10%) -moz-calc(9px + 4%)",
+  is(cs.getPropertyValue(prop), "calc(3px + 15%) calc(5px + 30%), calc(6px + 10%) calc(9px + 4%)",
      "property " + prop + ": interpolation that computes to calc()");
   check_distance(prop, "20% 40%, 8px 12px",
-                       "-moz-calc(3px + 15%) -moz-calc(5px + 30%), -moz-calc(6px + 10%) -moz-calc(9px + 4%)",
+                       "calc(3px + 15%) calc(5px + 30%), calc(6px + 10%) calc(9px + 4%)",
                        "12px 20px, 40% 16%");
-  div.style.setProperty(prop, "-moz-calc(20% + 40px) -moz-calc(40px + 40%), 8px 12%, -moz-calc(20px + 12%) -moz-calc(24px + 8%)", "");
-  is(cs.getPropertyValue(prop), "-moz-calc(40px + 20%) -moz-calc(40px + 40%), 8px 12%, -moz-calc(20px + 12%) -moz-calc(24px + 8%)",
+  div.style.setProperty(prop, "calc(20% + 40px) calc(40px + 40%), 8px 12%, calc(20px + 12%) calc(24px + 8%)", "");
+  is(cs.getPropertyValue(prop), "calc(40px + 20%) calc(40px + 40%), 8px 12%, calc(20px + 12%) calc(24px + 8%)",
      "property " + prop + ": computed value before transition");
-  div.style.setProperty(prop, "12px 20%, -moz-calc(20%) -moz-calc(16px + 60%), -moz-calc(8px + 20%) -moz-calc(40px + 16%)", "");
-  is(cs.getPropertyValue(prop), "-moz-calc(33px + 15%) -moz-calc(30px + 35%), -moz-calc(6px + 5%) -moz-calc(4px + 24%), -moz-calc(17px + 14%) -moz-calc(28px + 10%)",
+  div.style.setProperty(prop, "12px 20%, calc(20%) calc(16px + 60%), calc(8px + 20%) calc(40px + 16%)", "");
+  is(cs.getPropertyValue(prop), "calc(33px + 15%) calc(30px + 35%), calc(6px + 5%) calc(4px + 24%), calc(17px + 14%) calc(28px + 10%)",
      "property " + prop + ": interpolation that computes to calc()");
-  check_distance(prop, "-moz-calc(20% + 40px) -moz-calc(40px + 40%), 8px 12%, -moz-calc(20px + 12%) -moz-calc(24px + 8%)",
-                       "-moz-calc(33px + 15%) -moz-calc(30px + 35%), -moz-calc(6px + 5%) -moz-calc(4px + 24%), -moz-calc(17px + 14%) -moz-calc(28px + 10%)",
-                       "12px 20%, -moz-calc(20%) -moz-calc(16px + 60%), -moz-calc(8px + 20%) -moz-calc(40px + 16%)");
+  check_distance(prop, "calc(20% + 40px) calc(40px + 40%), 8px 12%, calc(20px + 12%) calc(24px + 8%)",
+                       "calc(33px + 15%) calc(30px + 35%), calc(6px + 5%) calc(4px + 24%), calc(17px + 14%) calc(28px + 10%)",
+                       "12px 20%, calc(20%) calc(16px + 60%), calc(8px + 20%) calc(40px + 16%)");
 }
 
 function test_transform_transition(prop) {
   function c(v) {
     div.style.setProperty(prop, v, "");
     var result = cs.getPropertyValue(prop);
     div.style.removeProperty(prop);
     return result;
@@ -1378,21 +1378,21 @@ function test_transform_transition(prop)
       end: 'rotate(-90deg) translate(20%, 20%) rotate(90deg)',
       expected: 'matrix(1, 0, 0, 1, 2.5, -15)',
       round_error_ok: true },
     // test calc() in translate
     // Note that font-size: is 20px, and that percentages are relative
     // to 300px (width) and 50px (height) per the prerequisites in
     // property_database.js
     { start: 'translateX(20%)', /* 60px */
-      end: 'translateX(-moz-calc(10% + 1em))', /* 30px + 20px = 50px */
-      expected_uncomputed: 'translateX(-moz-calc(17.5% + 0.25em))',
+      end: 'translateX(calc(10% + 1em))', /* 30px + 20px = 50px */
+      expected_uncomputed: 'translateX(calc(17.5% + 0.25em))',
       expected: 'matrix(1, 0, 0, 1, 57.5, 0)' },
-    { start: 'translate(-moz-calc(0.75 * 3em + 1.5 * 10%), -moz-calc(0.5 * 5em + 0.5 * 8%))', /* 90px, 52px */
-      end: 'rotate(90deg) translateY(20%) rotate(90deg) translateY(-moz-calc(10% + 0.5em)) rotate(180deg)', /* -10px, -15px */
+    { start: 'translate(calc(0.75 * 3em + 1.5 * 10%), calc(0.5 * 5em + 0.5 * 8%))', /* 90px, 52px */
+      end: 'rotate(90deg) translateY(20%) rotate(90deg) translateY(calc(10% + 0.5em)) rotate(180deg)', /* -10px, -15px */
       expected: 'matrix(1, 0, 0, 1, 65, 35.25)' },
 
     // scale
     { start: 'scale(2)', end: 'none',
       expected_uncomputed: 'scale(1.75)',
       expected: 'matrix(1.75, 0, 0, 1.75, 0, 0)' },
     { start: 'none', end: 'scale(0.4)',
       expected_uncomputed: 'scale(0.85)',
diff --git a/layout/style/test/test_unclosed_parentheses.html b/layout/style/test/test_unclosed_parentheses.html
--- a/layout/style/test/test_unclosed_parentheses.html
+++ b/layout/style/test/test_unclosed_parentheses.html
@@ -216,26 +216,26 @@ var declarations = [
   "transition-timing-function: cubic-bezier(0, 0, 1",
   "transition-timing-function: cubic-bezier(0, 0, 1 ",
   "transition-timing-function: cubic-bezier(0, 0, 1,",
   "transition-timing-function: cubic-bezier(0, 0, 1, ",
   "transition-timing-function: cubic-bezier(0, 0, 1, 1",
   "transition-timing-function: cubic-bezier(0, 0, 1, 1 ",
   "transition-timing-function: cubic-bezier(0, 0, 1, 1,",
   "transition-timing-function: cubic-bezier(0, 0, 1, 1, ",
-  "border-top-width: -moz-calc(",
-  "border-top-width: -moz-calc( ",
-  "border-top-width: -moz-calc(2em",
-  "border-top-width: -moz-calc(2em ",
-  "border-top-width: -moz-calc(2em +",
-  "border-top-width: -moz-calc(2em + ",
-  "border-top-width: -moz-calc(2em *",
-  "border-top-width: -moz-calc(2em * ",
-  "border-top-width: -moz-calc((2em)",
-  "border-top-width: -moz-calc((2em) ",
+  "border-top-width: calc(",
+  "border-top-width: calc( ",
+  "border-top-width: calc(2em",
+  "border-top-width: calc(2em ",
+  "border-top-width: calc(2em +",
+  "border-top-width: calc(2em + ",
+  "border-top-width: calc(2em *",
+  "border-top-width: calc(2em * ",
+  "border-top-width: calc((2em)",
+  "border-top-width: calc((2em) ",
 ];
 
 var selectors = [
   ":not(",
   ":not( ",
   ":not(-",
   ":not(- ",
   ":not(>",
diff --git a/layout/style/test/test_value_computation.html b/layout/style/test/test_value_computation.html
--- a/layout/style/test/test_value_computation.html
+++ b/layout/style/test/test_value_computation.html
@@ -45,42 +45,42 @@ var gBadComputed = {
 
   // This is the only SVG-length property (i.e., length allowing
   // unitless lengths) whose initial value is zero.
   "stroke-dashoffset": [ "0" ],
 };
 
 var gBadComputedNoFrame = {
   // These are probably bogus tests...
-  "border-radius": [ "0%", "-moz-calc(-1%)", "-moz-calc(0px) -moz-calc(0pt) -moz-calc(0%) -moz-calc(0em)" ],
-  "border-bottom-left-radius": [ "0%", "-moz-calc(-1%)" ],
-  "border-bottom-right-radius": [ "0%", "-moz-calc(-1%)" ],
-  "border-top-left-radius": [ "0%", "-moz-calc(-1%)" ],
-  "border-top-right-radius": [ "0%", "-moz-calc(-1%)" ],
-  "-moz-margin-end": [ "0%", "-moz-calc(0% + 0px)", "-moz-calc(-1%)" ],
-  "-moz-margin-start": [ "0%", "-moz-calc(0% + 0px)", "-moz-calc(-1%)" ],
-  "-moz-outline-radius": [ "0%", "-moz-calc(-1%)", "-moz-calc(0px) -moz-calc(0pt) -moz-calc(0%) -moz-calc(0em)" ],
-  "-moz-outline-radius-bottomleft": [ "0%", "-moz-calc(-1%)" ],
-  "-moz-outline-radius-bottomright": [ "0%", "-moz-calc(-1%)" ],
-  "-moz-outline-radius-topleft": [ "0%", "-moz-calc(-1%)" ],
-  "-moz-outline-radius-topright": [ "0%", "-moz-calc(-1%)" ],
-  "-moz-padding-end": [ "0%", "-moz-calc(0% + 0px)", "-moz-calc(-1%)" ],
-  "-moz-padding-start": [ "0%", "-moz-calc(0% + 0px)", "-moz-calc(-1%)" ],
+  "border-radius": [ "0%", "calc(-1%)", "calc(0px) calc(0pt) calc(0%) calc(0em)" ],
+  "border-bottom-left-radius": [ "0%", "calc(-1%)" ],
+  "border-bottom-right-radius": [ "0%", "calc(-1%)" ],
+  "border-top-left-radius": [ "0%", "calc(-1%)" ],
+  "border-top-right-radius": [ "0%", "calc(-1%)" ],
+  "-moz-margin-end": [ "0%", "calc(0% + 0px)", "calc(-1%)" ],
+  "-moz-margin-start": [ "0%", "calc(0% + 0px)", "calc(-1%)" ],
+  "-moz-outline-radius": [ "0%", "calc(-1%)", "calc(0px) calc(0pt) calc(0%) calc(0em)" ],
+  "-moz-outline-radius-bottomleft": [ "0%", "calc(-1%)" ],
+  "-moz-outline-radius-bottomright": [ "0%", "calc(-1%)" ],
+  "-moz-outline-radius-topleft": [ "0%", "calc(-1%)" ],
+  "-moz-outline-radius-topright": [ "0%", "calc(-1%)" ],
+  "-moz-padding-end": [ "0%", "calc(0% + 0px)", "calc(-1%)" ],
+  "-moz-padding-start": [ "0%", "calc(0% + 0px)", "calc(-1%)" ],
   "margin": [ "0% 0px 0em 0pt" ],
-  "margin-bottom": [ "0%", "-moz-calc(0% + 0px)" ],
-  "margin-left": [ "0%", "-moz-calc(0% + 0px)" ],
-  "margin-right": [ "0%", "-moz-calc(0% + 0px)" ],
-  "margin-top": [ "0%", "-moz-calc(0% + 0px)" ],
-  "min-height": [ "-moz-calc(-1%)" ],
-  "min-width": [ "-moz-calc(-1%)" ],
-  "padding": [ "0% 0px 0em 0pt", "-moz-calc(0px) -moz-calc(0em) -moz-calc(-2px) -moz-calc(-1%)" ],
-  "padding-bottom": [ "0%", "-moz-calc(0% + 0px)", "-moz-calc(-1%)" ],
-  "padding-left": [ "0%", "-moz-calc(0% + 0px)", "-moz-calc(-1%)" ],
-  "padding-right": [ "0%", "-moz-calc(0% + 0px)", "-moz-calc(-1%)" ],
-  "padding-top": [ "0%", "-moz-calc(0% + 0px)", "-moz-calc(-1%)" ],
+  "margin-bottom": [ "0%", "calc(0% + 0px)" ],
+  "margin-left": [ "0%", "calc(0% + 0px)" ],
+  "margin-right": [ "0%", "calc(0% + 0px)" ],
+  "margin-top": [ "0%", "calc(0% + 0px)" ],
+  "min-height": [ "calc(-1%)" ],
+  "min-width": [ "calc(-1%)" ],
+  "padding": [ "0% 0px 0em 0pt", "calc(0px) calc(0em) calc(-2px) calc(-1%)" ],
+  "padding-bottom": [ "0%", "calc(0% + 0px)", "calc(-1%)" ],
+  "padding-left": [ "0%", "calc(0% + 0px)", "calc(-1%)" ],
+  "padding-right": [ "0%", "calc(0% + 0px)", "calc(-1%)" ],
+  "padding-top": [ "0%", "calc(0% + 0px)", "calc(-1%)" ],
 };
 
 function xfail_value(property, value, is_initial, has_frame) {
   if ((property in gBadComputed) &&
       gBadComputed[property].indexOf(value) != -1)
     return true;
 
   if (!has_frame && (property in gBadComputedNoFrame) &&
