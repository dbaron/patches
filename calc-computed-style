From: L. David Baron <dbaron@dbaron.org>

Handle stored calc() expressions in computed style.  (Bug 363249)

diff --git a/layout/style/nsComputedDOMStyle.cpp b/layout/style/nsComputedDOMStyle.cpp
--- a/layout/style/nsComputedDOMStyle.cpp
+++ b/layout/style/nsComputedDOMStyle.cpp
@@ -3666,17 +3666,23 @@ nsComputedDOMStyle::SetValueToCoord(nsRO
             (this->*aPercentageBaseGetter)(percentageBase)) {
           nscoord val = nscoord(aCoord.GetPercentValue() * percentageBase);
           aValue->SetAppUnits(NS_MAX(aMinAppUnits, NS_MIN(val, aMaxAppUnits)));
         } else {
           aValue->SetPercent(aCoord.GetPercentValue());
         }
       }
       break;
-      
+
+    case eStyleUnit_Calc:
+      {
+        // FIXME: WRITE ME
+      }
+      break;
+
     case eStyleUnit_Factor:
       aValue->SetNumber(aCoord.GetFactorValue());
       break;
       
     case eStyleUnit_Coord:
       {
         nscoord val = aCoord.GetCoordValue();
         aValue->SetAppUnits(NS_MAX(aMinAppUnits, NS_MIN(val, aMaxAppUnits)));
@@ -3715,16 +3721,21 @@ nsComputedDOMStyle::StyleCoordToNSCoord(
     case eStyleUnit_Percent:
       {
         nscoord percentageBase;
         if ((this->*aPercentageBaseGetter)(percentageBase)) {
           return nscoord(aCoord.GetPercentValue() * percentageBase);
         }
       }
       // Fall through to returning aDefaultValue if we have no percentage base.
+      break;
+    case eStyleUnit_Calc:
+      {
+        // FIXME: WRITE ME
+      }
     default:
       break;
   }
       
   return aDefaultValue;
 }
 
 PRBool
