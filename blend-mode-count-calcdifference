From: L. David Baron <dbaron@dbaron.org>

Bug 1203571 - Fix missed change for background-blend-mode.

diff --git a/layout/style/nsStyleStruct.cpp b/layout/style/nsStyleStruct.cpp
--- a/layout/style/nsStyleStruct.cpp
+++ b/layout/style/nsStyleStruct.cpp
@@ -288,16 +288,20 @@ void nsStyleMargin::RecalcData()
     mHasCachedMargin = true;
   }
   else
     mHasCachedMargin = false;
 }
 
 nsChangeHint nsStyleMargin::CalcDifference(const nsStyleMargin& aOther) const
 {
+  // NOTE:  We don't need to compare mHasCachedMargin or mCachedMargin
+  // (for producing nsChangeHint_NeutralChange) because their values are
+  // derived entirely from mMargin.
+
   if (mMargin == aOther.mMargin) {
     return NS_STYLE_HINT_NONE;
   }
   // Margin differences can't affect descendant intrinsic sizes and
   // don't need to force children to reflow.
   return nsChangeHint_NeedReflow |
          nsChangeHint_ReflowChangesSizeOrPosition |
          nsChangeHint_ClearAncestorIntrinsics;
@@ -340,16 +344,20 @@ void nsStylePadding::RecalcData()
     mHasCachedPadding = true;
   }
   else
     mHasCachedPadding = false;
 }
 
 nsChangeHint nsStylePadding::CalcDifference(const nsStylePadding& aOther) const
 {
+  // NOTE:  We don't need to compare mHasCachedPadding or mCachedPadding
+  // (for producing nsChangeHint_NeutralChange) because their values are
+  // derived entirely from mPadding.
+
   if (mPadding == aOther.mPadding) {
     return NS_STYLE_HINT_NONE;
   }
   // Padding differences can't affect descendant intrinsic sizes, but do need
   // to force children to reflow so that we can reposition them, since their
   // offsets are from our frame bounds but our content rect's position within
   // those bounds is moving.
   return NS_SubtractHint(NS_STYLE_HINT_REFLOW,
@@ -2305,17 +2313,18 @@ nsChangeHint nsStyleBackground::CalcDiff
     return hint;
   }
 
   if (mAttachmentCount != aOther.mAttachmentCount ||
       mClipCount != aOther.mClipCount ||
       mOriginCount != aOther.mOriginCount ||
       mRepeatCount != aOther.mRepeatCount ||
       mPositionCount != aOther.mPositionCount ||
-      mSizeCount != aOther.mSizeCount) {
+      mSizeCount != aOther.mSizeCount ||
+      mBlendModeCount != aOther.mBlendModeCount) {
     return nsChangeHint_NeutralChange;
   }
 
   return NS_STYLE_HINT_NONE;
 }
 
 bool nsStyleBackground::HasFixedBackground() const
 {
