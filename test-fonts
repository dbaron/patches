Add a set of fonts for presence testing, each of which has a single glyph at the codepoint for a capital letter A-Z.

diff --git a/layout/reftests/font-face/download-1-notref.html b/layout/reftests/font-face/download-1-notref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/font-face/download-1-notref.html
@@ -0,0 +1,18 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
+	"http://www.w3.org/TR/html4/strict.dtd">
+<html lang="en-US">
+<head>
+	<title></title>
+	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
+	<style type="text/css">
+
+	body { font-family: "Mark A"; }
+
+	</style>
+</head>
+<body>
+
+<p>ABC</p>
+
+</body>
+</html>
diff --git a/layout/reftests/font-face/download-1.html b/layout/reftests/font-face/download-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/font-face/download-1.html
@@ -0,0 +1,23 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
+	"http://www.w3.org/TR/html4/strict.dtd">
+<html lang="en-US">
+<head>
+	<title></title>
+	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
+	<style type="text/css">
+
+	@font-face {
+		font-family: "Mark A"
+		src: url(../fonts/markA.ttf);
+	}
+
+	body { font-family: "Mark A"; }
+
+	</style>
+</head>
+<body>
+
+<p>ABC</p>
+
+</body>
+</html>
diff --git a/layout/reftests/font-face/download-2-ref.html b/layout/reftests/font-face/download-2-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/font-face/download-2-ref.html
@@ -0,0 +1,23 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
+	"http://www.w3.org/TR/html4/strict.dtd">
+<html lang="en-US">
+<head>
+	<title></title>
+	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
+	<style type="text/css">
+
+	@font-face {
+		font-family: "Mark B"
+		src: url(../fonts/markB.ttf);
+	}
+
+	body { font-family: "Mark B"; }
+
+	</style>
+</head>
+<body>
+
+<p>B</p>
+
+</body>
+</html>
diff --git a/layout/reftests/font-face/download-2.html b/layout/reftests/font-face/download-2.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/font-face/download-2.html
@@ -0,0 +1,23 @@
+<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
+	"http://www.w3.org/TR/html4/strict.dtd">
+<html lang="en-US">
+<head>
+	<title></title>
+	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
+	<style type="text/css">
+
+	@font-face {
+		font-family: "Mark A"
+		src: url(../fonts/markA.ttf);
+	}
+
+	body { font-family: "Mark A"; }
+
+	</style>
+</head>
+<body>
+
+<p>A</p>
+
+</body>
+</html>
diff --git a/layout/reftests/font-face/reftest.list b/layout/reftests/font-face/reftest.list
new file mode 100644
--- /dev/null
+++ b/layout/reftests/font-face/reftest.list
@@ -0,0 +1,2 @@
+!= download-1.html download-1-notref.html
+== download-2.html download-2-ref.html
diff --git a/layout/reftests/fonts/mark-generate.py b/layout/reftests/fonts/mark-generate.py
new file mode 100755
--- /dev/null
+++ b/layout/reftests/fonts/mark-generate.py
@@ -0,0 +1,26 @@
+#!/usr/bin/python
+
+# For general fontforge documentation, see:
+#   http://fontforge.sourceforge.net/
+# For fontforge scripting documentation, see:
+#   http://fontforge.sourceforge.net/scripting-tutorial.html
+#   http://fontforge.sourceforge.net/scripting.html
+
+# To install what you need, on Ubuntu,
+#   sudo apt-get install python-fontforge
+
+import fontforge
+
+# generate a set of fonts, each with our special glyph at one codepoint,
+# and nothing else
+for codepoint in range(ord("A"), ord("C") + 1):
+    charname = chr(codepoint)
+    f = fontforge.font()
+    f.fontname = "Mark " + charname
+    # print f.design_size
+
+    g = f.createChar(codepoint, charname)
+    g.importOutlines("mark-glyph.svg")
+    g.width = 1500
+
+    f.generate("mark" + charname + ".ttf")
diff --git a/layout/reftests/fonts/mark-glyph.svg b/layout/reftests/fonts/mark-glyph.svg
new file mode 100644
--- /dev/null
+++ b/layout/reftests/fonts/mark-glyph.svg
@@ -0,0 +1,6 @@
+<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 1500 1000" width="1500px" height="1000px">
+  <rect x="500" y="100" height="200" width="500" fill="black" />
+  <rect x="300" y="400" height="200" width="900" fill="black" />
+  <!-- baseline defaults to being at 800 -->
+  <rect x="100" y="700" height="200" width="1300" fill="black" />
+</svg>
diff --git a/layout/reftests/fonts/markA.ttf b/layout/reftests/fonts/markA.ttf
new file mode 100644
index 0000000000000000000000000000000000000000..04a3c8808e75e4e5ac7e89e9c73cabddf322f7ce
GIT binary patch
literal 1672
zc%02tNpBQK6#lB0@q$?fksF5^0g6F(PtPDHjy0f+aYiDn5?~=D6gBQ1&&ac>r!k&G
zBm~JNaEKx#6pI7=0SjA*69>d1_yHVE6mjALNXVR6CSTPw0|*E?rb@5sd*6HY>Q(jY
zf&j1@r(xn?p>TNL{)IDpfJBAt#si1a*-6ju2gFh8lT%f%fwkr{>NhFlQ?rpo%4h+m
zMY}caH5=_VBO&2a@13r+ioMSK0opfEKVJ$w|JmSoe-bZKzA2ID{oVeVv6OvtsT$2C
zFW^_|SE;Y7)TcZ&aG2|RsrOgCxdwJ)2koQOWzDMwtNUlJ(|#E+E;j1TsJ(y@?yv0I
zpw31akPllwt<Al_D)TWJ-2L{Y)16c8OZJ>`L*)wtoyIlBjrJuRvsIq3=X9j^o23~G
z1M0MFhF+z(@8NV}*vn!CHch|j=;u4L_!}8vs0E3>ZnO`gA1wahGfEzLQ?^HOjH~>2
zKFlZ;&q|cVjAdi&lcOfIZb9lSJK5&>ZS>f_^){MFyxUx5)xCjFX7-t8{s*7`chfb@
zdQrUqbql;>vCWw0*?QnC3Z!#OJr<s17Zdh!ZpkzVv1lsVR`gO&LcGc?3B_+urjlQ8
zPi{(yzQ_0O8S}4;DdVWRB|ok-6>}BikEFip%8FQdJz@Ux@|wLttlYo<=0Qhvc5ATE
z{SLcvA;toIcphUGljx7Ji7n!Ij4kwui!rvbPTY=hg8q+Gl~}3<|In)x7FdtJVr;Os
zU&YwOk0Kdk3+u(%7~7EIN{ka25D%~mAp&@aIQp!<6KHYV%YQ;*g8VGXnja?)QAZ6!
zx=Wm*B|?d)p!rD8A*LBgBFhLa=RtZz><x?|&0dUsi(Ov_O==F=fc#cqR~UFv;L8&&
zxz~{s-fY>I<6c;=4Gj&+Q{|{63-wx5sE5;m%sQ?dEJaacES)ZrEh^S&7M)rUG1L*g
zm&&uE&zB)pi^@?Y@Co;6u8fnYQVIO>NzVUvm@&%7Av^pChKVyAv-EYr2kpZ&$7FYF
z;*sG@W;pA*qhCsLl3d6uD(k$Yj-Ao@xH>0H24S;YuSwU<IIinTbuRU-W@yY)@xmFI
jNB5;@pJjrddM7N+8ra;aR=z#PTfaLy&plQ1`|t2SN;>uk

diff --git a/layout/reftests/fonts/markB.ttf b/layout/reftests/fonts/markB.ttf
new file mode 100644
index 0000000000000000000000000000000000000000..88a1f3cd333661df08fbb6c2fdf0afa0117c9ea3
GIT binary patch
literal 1672
zc%02tOK%iM5dL}|Ynzu@<lKDdRX}l&Jv+O|#IZIgTFgo$I3R^s2nnIFXV$x7Uz!~o
z?;%pe;}STa2nk_vfIk4Sg~Wve5sB~*@C_@9a^gZFA#(z<`MP&lKs=9htERvDs=B(m
zyQU!kY{pM8ai~x@Jo(-AQ{MuK3faMf->0)v)BZ+49HBlnQ}r5Vzxj~*9ZG&?K9Wco
zEx@#Bw`RR&qupjCBz)?<vz1n{*I7JB`vCRxrNHz59s2Sz@fu}!iA3)O`$xu7_U)x=
zw2-`rv($g3zO_=H@zB6w&hMqZq3SI(upeL1K1N;EylT+DrE-h*tAKH-QEx`=8yMyK
z%Dxk7ZxmzTe(QLD?lCr+56Iw;FP=EvG1b0eFBrE~zA(^fYR>KU6&$ryp0F2mq?ene
z84H`#ZrKbyOL1Sr>BO+t#5!!6e%8^?cSi9SGQv<35`EohuS7po+~+e&9(hx?$8eOh
z{1-mVC>4)Nl*No?F!sq&6I!<*b(WoM^Sm4VZU6Q>nn=7@TxHcgfj4IMwq|~a)5qL&
z4YOWUFF>6F&sgj<7P++^I7<TQ+;WeFhuNisy_Q=x4MHrLinbNK+>;PbbIU^UyOOEo
zXS<T0rbOR^d-sgRXT_9pL>-bJSDK2c{;AQ_CtX<=>(3_4Gf!^X17dw;<-gUA=<K%O
zdiNgo<6?{j`tT^mEGDrb#wK=%V==bSCoaX<##V7R#tHiWt*XRQHTa93rLe#@{260|
zwf!{4CcY8L7+csTPRH1W6xU*$z$USZy$BJ&L&UGo>YGN3-vj(7BqqquqpbNnafmu<
z7}j0lBrOq2L<P-9dJHkkND^5_a5)aqBVuo09BKAq>|5;mI%raJ$Ohy;2lj@67X`kY
zZpj0Vobcw$zRY`Jy*4~NEKioBk}T9~QK25r1~Tioa;OwVjq!B4NVce0r&)ArLBvo$
z=(SXy6}`VKsajNyDuGWpskt)dP^A+1<vEV;+RQlR^^hHY6eGy6kC1WM`Jla;=D6%G
zO*}f1$&6%OckF#hPLT_FL}i_q)Uh)<A6MsusUU2Y>ow`R8OL>9srIGr>V&>EOnTu7
lnMe1fXrERKyy2a&G;3f-r&{^;7|;EF-*fICHNN}~{|_G8_6Ps~

diff --git a/layout/reftests/fonts/markC.ttf b/layout/reftests/fonts/markC.ttf
new file mode 100644
index 0000000000000000000000000000000000000000..3f6bc2f76e30bd18e4748ca124cf70ccf38767ed
GIT binary patch
literal 1672
zc%02tO>0zF7=F(Em?WC26XMRr8EQ33a_7#3)HIAmGU<R{ji3!86uIW!$qbn<?p$NC
zD2TBen}vuF3|X{)KumDq!iCTl{Q=n&f=E|xYC+PKAJgZYxsFQh$Fk>e?s?wlea~~>
zbMAW&1b~ll8758@3TIA!dHc$7AW<Q^XYzD9J2mb10^%&~sp+cMK%e=H_5+Ub>A6TE
zWh?-uMZY!UH5;uKm5}ghch6K7irvo2B>nxgmr8->|32{9E#gg%PfH}auiM{HOZoSf
zs?mJ%CcdS8hxV>YecD3<XSlwb_O_}w-@s8Erhk;Sta;TS*;l<s|M!5g+^9FB)*X!S
z{mOq3YHu8t@k{gk&fFi^ZayW0pAWroI&-SEYR?<@RlYFLZd_yBZ>{2-t@4CDua(|y
zmS!yUs@<{~dX?giz-epPn_>$#UDvewQhOFpkP(Jjkm%{Cy{CSv_=QiEJo2V&jp7_v
z`EO&GQ7WF*P#!ZLd*YZJEun1-QfJxDHqURPpREUP)I{R#%T-pL6Zl|ef7{Ie6!rgY
zx`tUVsu!S6foCiZ8Y|pc7o0VLbZ))N!f)BNguR(tHw{9pnToa*z221&FLUcc@x#ef
za{qAh<CN%m`tYH#@~W6J&Z;x=<4RMS+o?a2+T9sjV(Zm}dG*CzyI*WQdh~juJ#=<E
zaJ%yzj^bvF1$yv2#w;eWEygB35nspHLXTLEv5j5g#~3FV|EsDJOV!{Fy-Hz$K0J=G
z!P<TqV-v?jGR7AA#A1wXNby6A6X+EitlAI(JVbo@tiB6a;PV9k35f~vb0}+moH#@s
zH4N%5afzM?C8C1nBRz+hp^`+F3NGgXMnvolj3LcljAM(PSO-m74%vYG0Tz51cv0ZX
z3k&juBPYDMvM<NIuwEM+9F&*JQArl+wWv@JX9AgZTscsRqQ+P{T_jsntkWzywIHI@
zSNdHl&x+pPFsWKpjw*pqcv5p^Ttt;d;Fm9Q{-@21ar{-X&5vLR8TKJYyX?Hs-cNH(
zc3w?9GL*>-WnFjl-;$gn7xIY8IxnfUGddqv=Y**sY?kXa>AD%mbzQ0UrM}fHop~Bw
mI4kq$+!U=vCitOy!qTjPeeG)H-DA9o`|0!Vo~ilWd-zZDclHPX

