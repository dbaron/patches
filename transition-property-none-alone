From: L. David Baron <dbaron@dbaron.org>

Only acccept 'none' on its own within transition-property.

FIXME: Check that this is Web-compatible first!  If not, fix the spec.

diff --git a/layout/style/nsCSSParser.cpp b/layout/style/nsCSSParser.cpp
--- a/layout/style/nsCSSParser.cpp
+++ b/layout/style/nsCSSParser.cpp
@@ -15141,16 +15141,21 @@ CSSParserImpl::ParseTransition()
   initialValues[0].SetFloatValue(0.0, eCSSUnit_Seconds);
   initialValues[1].SetIntValue(NS_STYLE_TRANSITION_TIMING_FUNCTION_EASE,
                                eCSSUnit_Enumerated);
   initialValues[2].SetFloatValue(0.0, eCSSUnit_Seconds);
   initialValues[3].SetAllValue();
 
   nsCSSValue values[numProps];
 
+  nsCSSValue tempValue;
+  if (ParseSingleTokenVariant(tempValue, VARIANT_NONE, nullptr)) {
+    // FIXME: WRITE ME
+  }
+
   ParseAnimationOrTransitionShorthandResult spres =
     ParseAnimationOrTransitionShorthand(kTransitionProperties,
                                         initialValues, values, numProps);
   if (spres != eParseAnimationOrTransitionShorthand_Values) {
     return spres != eParseAnimationOrTransitionShorthand_Error;
   }
 
   // Make two checks on the list for 'transition-property':
diff --git a/layout/style/nsCSSPropList.h b/layout/style/nsCSSPropList.h
--- a/layout/style/nsCSSPropList.h
+++ b/layout/style/nsCSSPropList.h
@@ -3449,17 +3449,17 @@ CSS_PROP_DISPLAY(
     eStyleAnimType_None)
 CSS_PROP_DISPLAY(
     transition-property,
     transition_property,
     TransitionProperty,
     CSS_PROPERTY_PARSE_FUNCTION |
         CSS_PROPERTY_VALUE_LIST_USES_COMMAS,
     "",
-    VARIANT_IDENTIFIER | VARIANT_NONE | VARIANT_ALL, // used only in shorthand
+    VARIANT_IDENTIFIER | VARIANT_ALL, // used only in shorthand
     nullptr,
     CSS_PROP_NO_OFFSET,
     eStyleAnimType_None)
 CSS_PROP_DISPLAY(
     transition-timing-function,
     transition_timing_function,
     TransitionTimingFunction,
     CSS_PROPERTY_PARSE_VALUE_LIST |
