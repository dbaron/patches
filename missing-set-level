From: L. David Baron <dbaron@dbaron.org>

Add missing SetLevel call that is caught by assertions once the following patch lands.  (Bug 492675)  r=bzbarsky

diff --git a/layout/style/nsStyleSet.cpp b/layout/style/nsStyleSet.cpp
--- a/layout/style/nsStyleSet.cpp
+++ b/layout/style/nsStyleSet.cpp
@@ -745,16 +745,17 @@ nsStyleSet::ResolveStyleForNonElement(ns
   return result;
 }
 
 void
 nsStyleSet::WalkRestrictionRule(nsIAtom* aPseudoType)
 {
   // This needs to match GetPseudoRestriction in nsRuleNode.cpp.
   if (aPseudoType) {
+    mRuleWalker->SetLevel(eAgentSheet, PR_FALSE);
     if (aPseudoType == nsCSSPseudoElements::firstLetter)
       mRuleWalker->Forward(mFirstLetterRule);
     else if (aPseudoType == nsCSSPseudoElements::firstLine)
       mRuleWalker->Forward(mFirstLineRule);
   }
 }
 
 static PRBool
