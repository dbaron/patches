From: L. David Baron <dbaron@dbaron.org>

Implement the HTML5 algorithm for parsing a legacy color value:  add comment pointing out whitespace and emptiness issues.  (Bug 121738)

diff --git a/content/base/src/nsAttrValue.cpp b/content/base/src/nsAttrValue.cpp
--- a/content/base/src/nsAttrValue.cpp
+++ b/content/base/src/nsAttrValue.cpp
@@ -1120,16 +1120,20 @@ nsAttrValue::SetColorValue(nscolor aColo
   cont->mStringBits = reinterpret_cast<PtrBits>(buf) | eStringBase;
 }
 
 PRBool
 nsAttrValue::ParseColor(const nsAString& aString, nsIDocument* aDocument)
 {
   ResetIfSet();
 
+  // FIXME: HTML5's algorithm says we shouldn't do the whitespace
+  // compression, trimming, or the test for emptiness.  (I'm a little
+  // skeptical that we shouldn't do the whitespace trimming; WebKit also
+  // does it.)
   nsAutoString colorStr(aString);
   colorStr.CompressWhitespace(PR_TRUE, PR_TRUE);
   if (colorStr.IsEmpty()) {
     return PR_FALSE;
   }
 
   nscolor color;
   // No color names begin with a '#'; in standards mode, all acceptable
