# HG changeset patch
# User Thomas Wisniewski <wisniewskit@gmail.com>
# Date 1464054063 14400
#      Mon May 23 21:41:03 2016 -0400
# Node ID 62f131707a637b9ad428d6836b23a571845dfa86
# Parent  e7fa5cf0c2b7add4cff551905d5a546e6b774588
Bug 955857 - Add tests for overflow-wrap.  r=dbaron

diff --git a/layout/reftests/text/wordwrap-04.html b/layout/reftests/text/overflowwrap-04.html
copy from layout/reftests/text/wordwrap-04.html
copy to layout/reftests/text/overflowwrap-04.html
--- a/layout/reftests/text/wordwrap-04.html
+++ b/layout/reftests/text/overflowwrap-04.html
@@ -1,18 +1,18 @@
 <!DOCTYPE html>
-<!-- Test setting word-wrap: break-word dynamically -->
+<!-- Test setting overflow-wrap: break-word dynamically -->
 <html>
  <head>
   <meta http-equiv="content-type" content="text/html; charset=UTF-8">
-  <title>Test Wordwrap</title>
+  <title>Test Overflowwrap</title>
   <script type="text/javascript">
 function SwapStyle()
 {
   par = document.getElementById("pp");
-  par.style.wordWrap = "break-word";
+  par.style.overflowWrap = "break-word";
 }
   </script>
  </head>
  <body onload="SwapStyle()">
-  <p id="pp" style="width: 100px; word-wrap: normal;">It's lipsmackinthirstquenchinacetastinmotivatingoodbuzzincooltalkinhighwalkinfastlivinevergivincoolfizzin Firefox!</p>
+  <p id="pp" style="width: 100px; overflow-wrap: normal;">It's lipsmackinthirstquenchinacetastinmotivatingoodbuzzincooltalkinhighwalkinfastlivinevergivincoolfizzin Firefox!</p>
  </body>
 </html>
diff --git a/layout/reftests/text/wordwrap-05.html b/layout/reftests/text/overflowwrap-05.html
copy from layout/reftests/text/wordwrap-05.html
copy to layout/reftests/text/overflowwrap-05.html
--- a/layout/reftests/text/wordwrap-05.html
+++ b/layout/reftests/text/overflowwrap-05.html
@@ -1,18 +1,18 @@
 <!DOCTYPE html>
-<!-- Test unsetting word-wrap: break-word dynamically -->
+<!-- Test unsetting overflow-wrap: break-word dynamically -->
 <html>
  <head>
   <meta http-equiv="content-type" content="text/html; charset=UTF-8">
-  <title>Test Wordwrap</title>
+  <title>Test Overflowwrap</title>
   <script type="text/javascript">
 function SwapStyle()
 {
   par = document.getElementById("pp");
-  par.style.wordWrap = "normal";
+  par.style.overflowWrap = "normal";
 }
   </script>
  </head>
  <body onload="SwapStyle()">
-  <p id="pp" style="width: 100px; word-wrap: break-word;">It's lipsmackinthirstquenchinacetastinmotivatingoodbuzzincooltalkinhighwalkinfastlivinevergivincoolfizzin Firefox!</p>
+  <p id="pp" style="width: 100px; overflow-wrap: break-word;">It's lipsmackinthirstquenchinacetastinmotivatingoodbuzzincooltalkinhighwalkinfastlivinevergivincoolfizzin Firefox!</p>
  </body>
 </html>
diff --git a/layout/reftests/text/wordwrap-06.html b/layout/reftests/text/overflowwrap-06.html
copy from layout/reftests/text/wordwrap-06.html
copy to layout/reftests/text/overflowwrap-06.html
--- a/layout/reftests/text/wordwrap-06.html
+++ b/layout/reftests/text/overflowwrap-06.html
@@ -8,17 +8,17 @@
   font-family: -moz-fixed;
   font-weight: normal;
   font-size: 16px;
   color: black;
   white-space: pre;
 }
 #viewsource.wrap {
   white-space: pre-wrap;
-  word-wrap: break-word;
+  overflow-wrap: break-word;
 }
 pre {
   font: inherit;
   color: inherit;
   white-space: inherit; 
   margin: 0;
   width: 475px;
 }
@@ -30,9 +30,9 @@ pre {
  color: blue;
  font-weight: normal;
 }
   </style>
  </head>
  <body id="viewsource" class="wrap">
   <pre id="line1"><span class="attribute-name">href</span>=<span class="attribute-value">"../../css/cavendish/content.css" </span><span class="attribute-name">title</span>=<span class="attribute-value">"Cavendish"</span></pre>
  </body>
-</html>
\ No newline at end of file
+</html>
diff --git a/layout/reftests/text/wordwrap-07.html b/layout/reftests/text/overflowwrap-07.html
copy from layout/reftests/text/wordwrap-07.html
copy to layout/reftests/text/overflowwrap-07.html
--- a/layout/reftests/text/wordwrap-07.html
+++ b/layout/reftests/text/overflowwrap-07.html
@@ -1,13 +1,13 @@
 <!DOCTYPE html>
 <html>
  <head>
   <meta http-equiv="content-type" content="text/html; charset=UTF-8">
   <style type="text/css">
-div { width: 0px; word-wrap: break-word; }
+div { width: 0px; overflow-wrap: break-word; }
   </style>
-  <title>Test Wordwrap</title>
+  <title>Test Overflowwrap</title>
  </head>
  <body>
   <div><em>Hello</em>Kitty</div>
  </body>
 </html>
diff --git a/layout/reftests/text/wordwrap-09.html b/layout/reftests/text/overflowwrap-09.html
copy from layout/reftests/text/wordwrap-09.html
copy to layout/reftests/text/overflowwrap-09.html
--- a/layout/reftests/text/wordwrap-09.html
+++ b/layout/reftests/text/overflowwrap-09.html
@@ -1,13 +1,13 @@
 <!DOCTYPE html>
 <html>
  <head>
   <meta http-equiv="content-type" content="text/html; charset=UTF-8">
   <style type="text/css">
-textarea { overflow: scroll; word-wrap: normal; }
+textarea { overflow: scroll; overflow-wrap: normal; }
   </style>
-  <title>Test Wordwrap</title>
+  <title>Test Overflowwrap</title>
  </head>
  <body>
   <textarea rows="10" cols="20">It's lipsmackinthirstquenchinacetastinmotivatingoodbuzzincooltalkinhighwalkinfastlivinevergivincoolfizzin Firefox!</textarea>
  </body>
 </html>
diff --git a/layout/reftests/text/wordwrap-10.html b/layout/reftests/text/overflowwrap-10.html
copy from layout/reftests/text/wordwrap-10.html
copy to layout/reftests/text/overflowwrap-10.html
--- a/layout/reftests/text/wordwrap-10.html
+++ b/layout/reftests/text/overflowwrap-10.html
@@ -1,14 +1,14 @@
 <!DOCTYPE html>
 <html>
   <head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
-  <title>Test - word-wrap: break-word should respect clusters</title>
+  <title>Test - overflow-wrap: break-word should respect clusters</title>
   </head>
   <body>
-    <div style="width:0px; word-wrap:break-word">
+    <div style="width:0px; overflow-wrap:break-word">
       abc
       d&#x0325;e&#x0315;f&#x0323;
       &#x10400;&#x10401;&#x10402;
     </div>
   </body>
 </html>
diff --git a/layout/reftests/text/reftest.list b/layout/reftests/text/reftest.list
--- a/layout/reftests/text/reftest.list
+++ b/layout/reftests/text/reftest.list
@@ -120,24 +120,31 @@ fails-if(/^Windows\x20NT\x2010\.0/.test(
 skip-if(B2G||Mulet) HTTP(..) == wordbreak-7a.html wordbreak-7a-ref.html # Initial mulet triage: parity with B2G/B2G Desktop
 fails HTTP(..) == wordbreak-7b.html wordbreak-7b-ref.html # bug 479829
 == wordbreak-8.html wordbreak-8-ref.html
 pref(gfx.font_rendering.graphite.enabled,true) HTTP(..) == wordbreak-9.html wordbreak-9-ref.html
 == wordwrap-01.html wordwrap-01-ref.html
 HTTP(..) == wordwrap-02.html wordwrap-02-ref.html
 fuzzy-if(gtkWidget,1,177) fuzzy-if(skiaContent,1,50) skip-if(B2G||Mulet) HTTP(..) == wordwrap-03.html wordwrap-03-ref.html # Initial mulet triage: parity with B2G/B2G Desktop # Fuzzy on Linux because the native textbox gradient is painted in a slightly different position depending on the invalid area.
 == wordwrap-04.html wordwrap-04-ref.html
+== overflowwrap-04.html wordwrap-04.html
 == wordwrap-05.html wordwrap-05-ref.html
+== overflowwrap-05.html wordwrap-05-ref.html
 == wordwrap-06.html wordwrap-06-ref.html
+== overflowwrap-06.html wordwrap-06-ref.html
 == wordwrap-07.html wordwrap-07-ref.html
+== overflowwrap-07.html wordwrap-07-ref.html
 skip-if(B2G||Mulet) != wordwrap-08.html wordwrap-01-ref.html # Initial mulet triage: parity with B2G/B2G Desktop
 skip-if(B2G||Mulet) == wordwrap-08.html wordwrap-08-ref.html # Initial mulet triage: parity with B2G/B2G Desktop
 skip-if(B2G||Mulet) != wordwrap-09.html wordwrap-01-ref.html # Initial mulet triage: parity with B2G/B2G Desktop
+skip-if(B2G||Mulet) != overflowwrap-09.html wordwrap-01-ref.html # Initial mulet triage: parity with B2G/B2G Desktop
 skip-if(B2G||Mulet) == wordwrap-09.html wordwrap-09-ref.html # Initial mulet triage: parity with B2G/B2G Desktop
+skip-if(B2G||Mulet) == overflowwrap-09.html wordwrap-09.html # Initial mulet triage: parity with B2G/B2G Desktop
 == wordwrap-10.html wordwrap-10-ref.html # bug 752459
+== overflowwrap-10.html wordwrap-10-ref.html
 == word-spacing-01.html word-spacing-01-ref.html
 # the following will fail when rendering with Core Text (see bug 389074) due to what appears to be
 # an Apple bug: the presence of ZWNJ disturbs the positioning of an adjacent glyph. rdar://6427865
 random-if(cocoaWidget) HTTP(..) == zwnj-01.xhtml zwnj-01-ref.xhtml
 HTTP(..) == zwnj-02.xhtml zwnj-02-ref.xhtml # HTTP(..) for ../filters.svg
 != zwnj-01.html zwnj-01-notref.html
 == initial-zwj-1.html initial-zwj-1-ref.html
 == cgj-01.html cgj-01-ref.html
diff --git a/layout/style/test/property_database.js b/layout/style/test/property_database.js
--- a/layout/style/test/property_database.js
+++ b/layout/style/test/property_database.js
@@ -4016,18 +4016,18 @@ var gCSSProperties = {
       "calc(1em)", "calc(1em + 3px)",
       "calc(15px / 2)", "calc(15px/2)",
       "calc(-2em)", "calc(0% + 0px)",
       "calc(-10%/2 - 1em)"
     ],
     invalid_values: [],
     quirks_values: { "5": "5px" },
   },
-  "word-wrap": {
-    domProp: "wordWrap",
+  "overflow-wrap": {
+    domProp: "overflowWrap",
     inherited: true,
     type: CSS_TYPE_LONGHAND,
     initial_values: [ "normal" ],
     other_values: [ "break-word" ],
     invalid_values: []
   },
   "hyphens": {
     domProp: "hyphens",
@@ -4574,16 +4574,23 @@ var gCSSProperties = {
     inherited: false,
     type: CSS_TYPE_LONGHAND,
     initial_values: [ "0" ],
     other_values: [ "1", "99999", "-1", "-50" ],
     invalid_values: [ "0px", "1.0", "1.", "1%", "0.2", "3em", "stretch" ]
   },
 
   // Aliases
+  "word-wrap": {
+    domProp: "wordWrap",
+    inherited: true,
+    type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
+    alias_for: "overflow-wrap",
+    subproperties: [ "overflow-wrap" ],
+  },
   "-moz-transform": {
     domProp: "MozTransform",
     inherited: false,
     type: CSS_TYPE_SHORTHAND_AND_LONGHAND,
     alias_for: "transform",
     subproperties: [ "transform" ],
     // NOTE: We specify other_values & invalid_values explicitly here (instead
     // of deferring to "transform") because we accept some legacy syntax as
