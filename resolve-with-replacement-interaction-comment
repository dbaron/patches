From: L. David Baron <dbaron@dbaron.org>

Bug 996796 patch 17 - Add comment about how ResolveStyleWithReplacement interacts with nsTransitionManager and nsAnimationManager.

diff --git a/layout/style/nsStyleSet.cpp b/layout/style/nsStyleSet.cpp
--- a/layout/style/nsStyleSet.cpp
+++ b/layout/style/nsStyleSet.cpp
@@ -1361,31 +1361,35 @@ nsStyleSet::RuleNodeWithReplacement(Elem
        level != levelEnd; ++level) {
     ruleWalker.SetLevel(level->mLevel, level->mIsImportant, false);
 
     bool doReplace = level->mLevelReplacementHint & aReplacements;
     if (doReplace) {
       switch (level->mLevelReplacementHint) {
       case eRestyle_CSSAnimations:
         {
+          // FIXME: This should probably be more similar to what
+          // FileRules does.
           nsAnimationManager* animationManager =
             PresContext()->AnimationManager();
           ElementAnimationCollection* collection = animationManager->GetElementAnimations(
             aElement, aPseudoType, false);
           NS_ASSERTION(collection,
             "Rule has level eAnimationSheet without animation on manager");
 
           animationManager->UpdateStyleAndEvents(
             collection, PresContext()->RefreshDriver()->MostRecentRefresh(),
             EnsureStyleRule_IsNotThrottled);
           ruleWalker.ForwardOnPossiblyCSSRule(collection->mStyleRule);
         }
         break;
       case eRestyle_CSSTransitions:
         {
+          // FIXME: This should probably be more similar to what
+          // FileRules does.
           nsPresContext* presContext = PresContext();
           ElementAnimationCollection* collection =
             presContext->TransitionManager()->GetElementTransitions(
               aElement, aPseudoType, false);
           NS_ASSERTION(collection,
             "Rule has level eTransitionSheet without transition on manager");
 
           collection->EnsureStyleRuleFor(
