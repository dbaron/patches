From: L. David Baron <dbaron@dbaron.org>

Bug 996796 patch 17 - Add comment about how ResolveStyleWithReplacement interacts with nsTransitionManager and nsAnimationManager.

diff --git a/layout/style/nsStyleSet.cpp b/layout/style/nsStyleSet.cpp
--- a/layout/style/nsStyleSet.cpp
+++ b/layout/style/nsStyleSet.cpp
@@ -1361,16 +1361,18 @@ nsStyleSet::RuleNodeWithReplacement(Elem
        level != levelEnd; ++level) {
     ruleWalker.SetLevel(level->mLevel, level->mIsImportant, false);
 
     bool doReplace = level->mLevelReplacementHint & aReplacements;
     if (doReplace) {
       switch (level->mLevelReplacementHint) {
       case eRestyle_CSSAnimations:
         {
+          // FIXME: This should probably be more similar to what
+          // FileRules does.
           nsAnimationManager* animationManager =
             PresContext()->AnimationManager();
           ElementAnimationCollection* collection = animationManager->GetElementAnimations(
             aElement, aPseudoType, false);
 
           if (collection) {
             animationManager->UpdateStyleAndEvents(
               collection, PresContext()->RefreshDriver()->MostRecentRefresh(),
@@ -1378,16 +1380,18 @@ nsStyleSet::RuleNodeWithReplacement(Elem
             if (collection->mStyleRule) {
               ruleWalker.ForwardOnPossiblyCSSRule(collection->mStyleRule);
             }
           }
         }
         break;
       case eRestyle_CSSTransitions:
         {
+          // FIXME: This should probably be more similar to what
+          // FileRules does.
           nsPresContext* presContext = PresContext();
           ElementAnimationCollection* collection =
             presContext->TransitionManager()->GetElementTransitions(
               aElement, aPseudoType, false);
 
           if (collection) {
             collection->EnsureStyleRuleFor(
               presContext->RefreshDriver()->MostRecentRefresh(),
