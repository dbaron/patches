From: L. David Baron <dbaron@dbaron.org>

Remove non-working remnant of support for GLX versions less than 1.3.

diff --git a/gfx/thebes/GLContextProviderGLX.cpp b/gfx/thebes/GLContextProviderGLX.cpp
--- a/gfx/thebes/GLContextProviderGLX.cpp
+++ b/gfx/thebes/GLContextProviderGLX.cpp
@@ -58,17 +58,16 @@
 #include "gfxImageSurface.h"
 #include "gfxPlatform.h"
 
 namespace mozilla {
 namespace gl {
 
 static PRBool gIsATI = PR_FALSE;
 static PRBool gIsChromium = PR_FALSE;
-static int gGLXVersion = 0;
 
 PRBool
 GLXLibrary::EnsureInitialized()
 {
     if (mInitialized) {
         return PR_TRUE;
     }
 
@@ -129,19 +128,19 @@ GLXLibrary::EnsureInitialized()
     // FIXME: What about "2" or "1.10"?
     if (clientVersionStr &&
         strlen(clientVersionStr) >= 3 &&
         clientVersionStr[1] == '.')
     {
         clientVersion = (clientVersionStr[0] - '0') << 8 | (clientVersionStr[2] - '0');
     }
 
-    gGLXVersion = PR_MIN(clientVersion, serverVersion);
+    int glxVersion = PR_MIN(clientVersion, serverVersion);
 
-    if (gGLXVersion < 0x0103)
+    if (glxVersion < 0x0103)
         return PR_FALSE;
 
     gIsATI = vendor && DoesVendorStringMatch(vendor, "ATI");
     gIsChromium = (vendor && DoesVendorStringMatch(vendor, "Chromium")) ||
         (serverVersion && DoesVendorStringMatch(serverVersionStr, "Chromium"));
 
     mInitialized = PR_TRUE;
     return PR_TRUE;
@@ -181,28 +180,21 @@ public:
 
         ctxErrorOccurred = false;
         int (*oldHandler)(Display *, XErrorEvent *);
         GLXContext context;
 
 TRY_AGAIN_NO_SHARING:
         oldHandler = XSetErrorHandler(&ctxErrorHandler);
 
-        if (gGLXVersion >= 0x0103) {
-            context = sGLXLibrary.xCreateNewContext(display,
-                                                    cfg,
-                                                    GLX_RGBA_TYPE,
-                                                    shareContext ? shareContext->mContext : NULL,
-                                                    True);
-        } else {
-            context = sGLXLibrary.xCreateContext(display,
-                                                 vinfo,
-                                                 shareContext ? shareContext->mContext : NULL,
-                                                 True);
-        }
+        context = sGLXLibrary.xCreateNewContext(display,
+                                                cfg,
+                                                GLX_RGBA_TYPE,
+                                                shareContext ? shareContext->mContext : NULL,
+                                                True);
 
         XSync(display, False);
         XSetErrorHandler(oldHandler);
 
         if (!context || ctxErrorOccurred) {
             if (shareContext) {
                 shareContext = nsnull;
                 goto TRY_AGAIN_NO_SHARING;
