From: L. David Baron <dbaron@dbaron.org>

Back out temporary debugging code for bug 538462 (changesets 1e383909069b and f5c479a8f631).

diff --git a/js/src/xpconnect/src/nsXPConnect.cpp b/js/src/xpconnect/src/nsXPConnect.cpp
--- a/js/src/xpconnect/src/nsXPConnect.cpp
+++ b/js/src/xpconnect/src/nsXPConnect.cpp
@@ -223,29 +223,16 @@ nsXPConnect::ReleaseXPConnectSingleton()
 #ifdef XPC_TOOLS_SUPPORT
         if(xpc->mProfiler)
         {
             xpc->mProfiler->Stop();
             xpc->mProfiler->WriteResults(xpc->mProfilerOutputFile);
         }
 #endif
 
-        // Temporary code to debug a persistent leak on tinderbox
-        // unit tests (bug 538462).
-#if defined(DEBUG_cltbld) && defined(XP_MACOSX)
-        {
-            XPCCallContext ccx(NATIVE_CALLER);
-            if(ccx.IsValid())
-            {
-                printf("Dump of entire JS heap at shutdown:\n");
-                JS_DumpHeap(ccx, stdout, nsnull, 0, nsnull, size_t(-1), nsnull);
-            }
-        }
-#endif
-
 #ifdef DEBUG
         // force a dump of the JavaScript gc heap if JS is still alive
         // if requested through XPC_SHUTDOWN_HEAP_DUMP environment variable
         {
             // autoscope
             XPCCallContext ccx(NATIVE_CALLER);
             if(ccx.IsValid())
             {
