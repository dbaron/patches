Add some reftests for float behavior.

diff --git a/layout/reftests/floats/other-float-outside-rule-3-left-ref.html b/layout/reftests/floats/other-float-outside-rule-3-left-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/floats/other-float-outside-rule-3-left-ref.html
@@ -0,0 +1,6 @@
+<!DOCTYPE HTML>
+<title>Test for float placement around other float in BFC but outside containing block</title>
+
+<div style="float: left; width: 500px; height: 500px">
+  <div style="height: 10px; background: blue"></div>
+</div>
diff --git a/layout/reftests/floats/other-float-outside-rule-3-left.html b/layout/reftests/floats/other-float-outside-rule-3-left.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/floats/other-float-outside-rule-3-left.html
@@ -0,0 +1,25 @@
+<!DOCTYPE HTML>
+<title>Test for float placement around other float in BFC but outside containing block</title>
+
+<!--
+  CSS2.1 9.5.1 rule 3 says:
+
+    The right outer edge of a left-floating box may not be to the right
+    of the left outer edge of any right-floating box that is to the
+    right of it. Analogous rules hold for right-floating elements. 
+
+ -->
+
+<!-- the block formatting context inside which we're testing -->
+<div style="float: left; width: 500px; height: 500px">
+
+  <div style="float: right: width: 50px; height: 300px"></div>
+
+  <div style="margin-right: 100px"> <!-- 400px wide -->
+
+    <!-- we're testing the position of this float -->
+    <div style="float: left; width: 425px; height: 10px; background: blue"></div>
+
+  </div>
+
+</div>
diff --git a/layout/reftests/floats/other-float-outside-rule-3-right-ref.html b/layout/reftests/floats/other-float-outside-rule-3-right-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/floats/other-float-outside-rule-3-right-ref.html
@@ -0,0 +1,5 @@
+<!DOCTYPE HTML>
+<title>Test for float placement around other float in BFC but outside containing block</title>
+<div style="float: left; width: 500px; height: 500px">
+    <div style="margin-left: 75px; width: 425px; height: 10px; background: blue"></div>
+</div>
diff --git a/layout/reftests/floats/other-float-outside-rule-3-right.html b/layout/reftests/floats/other-float-outside-rule-3-right.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/floats/other-float-outside-rule-3-right.html
@@ -0,0 +1,25 @@
+<!DOCTYPE HTML>
+<title>Test for float placement around other float in BFC but outside containing block</title>
+
+<!--
+  CSS2.1 9.5.1 rule 3 says:
+
+    The right outer edge of a left-floating box may not be to the right
+    of the left outer edge of any right-floating box that is to the
+    right of it. Analogous rules hold for right-floating elements. 
+
+ -->
+
+<!-- the block formatting context inside which we're testing -->
+<div style="float: left; width: 500px; height: 500px">
+
+  <div style="float: left: width: 50px; height: 300px"></div>
+
+  <div style="margin-left: 100px"> <!-- 400px wide -->
+
+    <!-- we're testing the position of this float -->
+    <div style="float: right; width: 425px; height: 10px; background: blue"></div>
+
+  </div>
+
+</div>
diff --git a/layout/reftests/floats/other-float-outside-rule-7-left-ref.html b/layout/reftests/floats/other-float-outside-rule-7-left-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/floats/other-float-outside-rule-7-left-ref.html
@@ -0,0 +1,5 @@
+<!DOCTYPE HTML>
+<title>Test for float placement around other float in BFC but outside containing block</title>
+<div style="float: left; width: 500px; height: 500px">
+    <div style="margin-top: 300px; margin-left: 100px; width: 425px; height: 10px; background: blue"></div>
+</div>
diff --git a/layout/reftests/floats/other-float-outside-rule-7-left.html b/layout/reftests/floats/other-float-outside-rule-7-left.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/floats/other-float-outside-rule-7-left.html
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<title>Test for float placement around other float in BFC but outside containing block</title>
+
+<!--
+  CSS2.1 9.5.1 rule 7 says:
+
+    A left-floating box that has another left-floating box to its left
+    may not have its right outer edge to the right of its containing
+    block's right edge. (Loosely: a left float may not stick out at the
+    right edge, unless it is already as far to the left as possible.) An
+    analogous rule holds for right-floating elements. 
+
+ -->
+
+<!-- the block formatting context inside which we're testing -->
+<div style="float: left; width: 500px; height: 500px">
+
+  <div style="float: left: width: 50px; height: 300px"></div>
+
+  <div style="margin-left: 100px"> <!-- 400px wide -->
+
+    <!-- we're testing the position of this float -->
+    <div style="float: left; width: 425px; height: 10px; background: blue"></div>
+
+  </div>
+
+</div>
diff --git a/layout/reftests/floats/other-float-outside-rule-7-right-ref.html b/layout/reftests/floats/other-float-outside-rule-7-right-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/floats/other-float-outside-rule-7-right-ref.html
@@ -0,0 +1,5 @@
+<!DOCTYPE HTML>
+<title>Test for float placement around other float in BFC but outside containing block</title>
+<div style="float: left; width: 500px; height: 500px">
+    <div style="margin-top: 300px; margin-left: -25px; width: 425px; height: 10px; background: blue"></div>
+</div>
diff --git a/layout/reftests/floats/other-float-outside-rule-7-right.html b/layout/reftests/floats/other-float-outside-rule-7-right.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/floats/other-float-outside-rule-7-right.html
@@ -0,0 +1,27 @@
+<!DOCTYPE HTML>
+<title>Test for float placement around other float in BFC but outside containing block</title>
+
+<!--
+  CSS2.1 9.5.1 rule 7 says:
+
+    A left-floating box that has another left-floating box to its left
+    may not have its right outer edge to the right of its containing
+    block's right edge. (Loosely: a left float may not stick out at the
+    right edge, unless it is already as far to the left as possible.) An
+    analogous rule holds for right-floating elements. 
+
+ -->
+
+<!-- the block formatting context inside which we're testing -->
+<div style="float: left; width: 500px; height: 500px">
+
+  <div style="float: right: width: 50px; height: 300px"></div>
+
+  <div style="margin-right: 100px"> <!-- 400px wide -->
+
+    <!-- we're testing the position of this float -->
+    <div style="float: right; width: 425px; height: 10px; background: blue"></div>
+
+  </div>
+
+</div>
diff --git a/layout/reftests/floats/reftest.list b/layout/reftests/floats/reftest.list
new file mode 100644
--- /dev/null
+++ b/layout/reftests/floats/reftest.list
@@ -0,0 +1,5 @@
+# It's possible the spec should change here...
+fails == other-float-outside-rule-3-left.html other-float-outside-rule-3-left-ref.html
+fails == other-float-outside-rule-3-right.html other-float-outside-rule-3-right-ref.html
+== other-float-outside-rule-7-left.html other-float-outside-rule-7-left-ref.html
+== other-float-outside-rule-7-right.html other-float-outside-rule-7-right-ref.html
diff --git a/layout/reftests/reftest.list b/layout/reftests/reftest.list
--- a/layout/reftests/reftest.list
+++ b/layout/reftests/reftest.list
@@ -54,16 +54,19 @@ include counters/reftest.list
 include generated-content/reftest.list
 
 # first-letter/
 include first-letter/reftest.list
 
 # first-line/
 include first-line/reftest.list
 
+# floats/
+include floats/reftest.list
+
 # font-face
 include font-face/reftest.list
 
 # forms
 include forms/reftest.list
 
 # block-inside-inline splits
 include ib-split/reftest.list
