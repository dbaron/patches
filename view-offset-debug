From: L. David Baron <dbaron@dbaron.org>

Add assertion to detect case that bent caught in record-and-replay on privatebrowsing tests so we can learn what portion of orange (hangs) in those tests it's responsible for, and get stacks pointing to the problem.

diff --git a/view/src/nsView.cpp b/view/src/nsView.cpp
--- a/view/src/nsView.cpp
+++ b/view/src/nsView.cpp
@@ -989,16 +989,18 @@ nsPoint nsIView::GetOffsetTo(const nsIVi
 
 nsPoint nsView::GetOffsetTo(const nsView* aOther) const
 {
   return GetOffsetTo(aOther, GetViewManager()->AppUnitsPerDevPixel());
 }
 
 nsPoint nsView::GetOffsetTo(const nsView* aOther, const PRInt32 aAPD) const
 {
+  NS_ABORT_IF_FALSE(GetParent() || aOther->GetParent() || this == aOther,
+                    "caller of GetOffsetTo must not pass unrelated views");
   // We accumulate the final result in offset
   nsPoint offset(0, 0);
   // The offset currently accumulated at the current APD
   nsPoint docOffset(0, 0);
   const nsView* v = this;
   nsViewManager* currVM = v->GetViewManager();
   PRInt32 currAPD = currVM->AppUnitsPerDevPixel();
   const nsView* root = nsnull;
