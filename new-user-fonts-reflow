Handle dynamic changes to the set of user fonts by doing the necessary reflow.  (Bug 457821)

diff --git a/layout/base/nsPresContext.cpp b/layout/base/nsPresContext.cpp
--- a/layout/base/nsPresContext.cpp
+++ b/layout/base/nsPresContext.cpp
@@ -1772,16 +1772,22 @@ nsPresContext::GetUserFontSet()
             return nsnull;
           }
           mUserFontSet = fs;
           NS_ADDREF(mUserFontSet);
 
           for (PRUint32 i = 0, i_end = rules.Length(); i < i_end; ++i) {
             InsertFontFaceRule(rules[i], fs);
           }
+
+
+          // XXX If this wasn't the first time we've been asked for the
+          // user font set, we need to do a reflow and potentially other
+          // stuff!  (What do we need to rerun when the set of available
+          // fonts changes?)
         }
       }
 
 #ifdef DEBUG
       PRBool success =
 #endif
         rules.SwapElements(mFontFaceRules);
       NS_ASSERTION(success, "should never fail given both are heap arrays");
