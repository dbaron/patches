From: L. David Baron <dbaron@dbaron.org>

Remove StyleSheet::GetDocument in favor of the identical GetAssociatedDocument.  r?bz

(GetAssociatedDocument was recently renamed in bug 1332353.)

Note that the inconsistency between the Rule and CSSParser method names
is slightly bothersome.

MozReview-Commit-ID: L1SBIV86H4s

diff --git a/layout/style/Rule.h b/layout/style/Rule.h
--- a/layout/style/Rule.h
+++ b/layout/style/Rule.h
@@ -85,17 +85,17 @@ public:
   virtual int32_t GetType() const = 0;
 
   StyleSheet* GetStyleSheet() const { return mSheet; }
 
   // Return the document the rule lives in, if any
   nsIDocument* GetDocument() const
   {
     StyleSheet* sheet = GetStyleSheet();
-    return sheet ? sheet->GetDocument() : nullptr;
+    return sheet ? sheet->GetAssociatedDocument() : nullptr;
   }
 
   virtual void SetStyleSheet(StyleSheet* aSheet);
 
   void SetParentRule(GroupRule* aRule) {
     // We don't reference count this up reference. The group rule
     // will tell us when it's going away or when we're detached from
     // it.
diff --git a/layout/style/StyleSheet.h b/layout/style/StyleSheet.h
--- a/layout/style/StyleSheet.h
+++ b/layout/style/StyleSheet.h
@@ -57,19 +57,16 @@ public:
   void SetOwningNode(nsINode* aOwningNode)
   {
     mOwningNode = aOwningNode;
   }
 
   css::SheetParsingMode ParsingMode() { return mParsingMode; }
   mozilla::dom::CSSStyleSheetParsingMode ParsingModeDOM();
 
-  // The document this style sheet is associated with.  May be null
-  nsIDocument* GetDocument() const { return mDocument; }
-
   /**
    * Whether the sheet is complete.
    */
   bool IsComplete() const;
   void SetComplete();
 
   /**
    * Set the stylesheet to be enabled.  This may or may not make it
diff --git a/layout/style/nsCSSParser.cpp b/layout/style/nsCSSParser.cpp
--- a/layout/style/nsCSSParser.cpp
+++ b/layout/style/nsCSSParser.cpp
@@ -1645,17 +1645,17 @@ CSSParserImpl::SetStyleSheet(CSSStyleShe
 }
 
 nsIDocument*
 CSSParserImpl::GetDocument()
 {
   if (!mSheet) {
     return nullptr;
   }
-  return mSheet->GetDocument();
+  return mSheet->GetAssociatedDocument();
 }
 
 nsresult
 CSSParserImpl::SetQuirkMode(bool aQuirkMode)
 {
   mNavQuirkMode = aQuirkMode;
   return NS_OK;
 }
