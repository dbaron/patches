From: L. David Baron <dbaron@dbaron.org>

Add testcase to check that mIsTopOfPage is false when reflowing blocks that have clearance.  (There was originally a patch here, but it seems not to be needed, so now it's just tests.)  (Bug 563584, patch 27)

diff --git a/layout/reftests/bugs/563584-11-ref.html b/layout/reftests/bugs/563584-11-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/563584-11-ref.html
@@ -0,0 +1,6 @@
+<!DOCTYPE HTML>
+<html class="reftest-print">
+<title>Test that mIsTopOfPage is not set when clearing</title>
+<body style="margin: 0">
+<div style="background: aqua; height: 1in; width: 1in"></div>
+<div style="background: fuchsia; height: 1.5in; width: 1in; page-break-before: always"></div>
diff --git a/layout/reftests/bugs/563584-11.html b/layout/reftests/bugs/563584-11.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/563584-11.html
@@ -0,0 +1,8 @@
+<!DOCTYPE HTML>
+<html class="reftest-print">
+<title>Test that mIsTopOfPage is not set when clearing</title>
+<body style="margin: 0">
+<div style="float: left; background: aqua; height: 1in; width: 1in"></div>
+<div style="clear: left">
+  <div style="display:inline-block; vertical-align: top; background: fuchsia; height: 1.5in; width: 1in"></div>
+</div>
diff --git a/layout/reftests/bugs/reftest.list b/layout/reftests/bugs/reftest.list
--- a/layout/reftests/bugs/reftest.list
+++ b/layout/reftests/bugs/reftest.list
@@ -1453,16 +1453,17 @@ random-if(!haveTestPlugin) == 546071-1.h
 == 563584-8c.html 563584-8c-ref.html
 == 563584-8d.html 563584-8d-ref.html
 == 563584-9a.html 563584-9a-ref.html
 == 563584-9b.html 563584-9b-ref.html
 == 563584-9c.html 563584-9cd-ref.html
 == 563584-9d.html 563584-9cd-ref.html
 == 563584-10a.html 563584-10-ref.html
 == 563584-10b.html 563584-10-ref.html
+== 563584-11.html 563584-11-ref.html
 == 564054-1.html 564054-1-ref.html
 == 564991-1.html 564991-1-ref.html
 == 565819-1.html 565819-ref.html
 == 565819-2.html 565819-ref.html
 == 569006-1.html 569006-1-ref.html
 == 571281-1a.html 571281-1-ref.html
 == 571281-1b.html 571281-1-ref.html
 == 571281-1c.html 571281-1-ref.html
