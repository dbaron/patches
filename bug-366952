Handle padding and border correctly for reflow states constructed without a parent (reflow roots, things inside nsIBoxes).  b=366952

diff -r b0a1e4f6c746 layout/generic/nsHTMLReflowState.cpp
--- a/layout/generic/nsHTMLReflowState.cpp	Mon Jan 15 17:09:51 2007 -0800
+++ b/layout/generic/nsHTMLReflowState.cpp	Mon Jan 15 21:52:46 2007 -0800
@@ -1451,12 +1451,15 @@ nsHTMLReflowState::InitConstraints(nsPre
   // height equal to the available space
   if (nsnull == parentReflowState) {
     // XXXldb This doesn't mean what it used to!
-    mComputedWidth = availableWidth;
-    mComputedHeight = availableHeight;
+    InitOffsets(aContainingBlockWidth, aBorder, aPadding);
+    // Override mComputedMargin since reflow roots start from the
+    // frame's boundary, which is inside the margin.
     mComputedMargin.SizeTo(0, 0, 0, 0);
-    mComputedPadding.SizeTo(0, 0, 0, 0);
-    mComputedBorderPadding.SizeTo(0, 0, 0, 0);
     mComputedOffsets.SizeTo(0, 0, 0, 0);
+
+    mComputedWidth = availableWidth - mComputedBorderPadding.LeftRight();
+    mComputedHeight = availableHeight - mComputedBorderPadding.TopBottom();
+
     mComputedMinWidth = mComputedMinHeight = 0;
     mComputedMaxWidth = mComputedMaxHeight = NS_UNCONSTRAINEDSIZE;
   } else {
