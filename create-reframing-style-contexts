From: L. David Baron <dbaron@dbaron.org>

Bug 625289 patch 6 - Create a ReframingStyleContexts struct during restyling.

diff --git a/layout/base/RestyleManager.cpp b/layout/base/RestyleManager.cpp
--- a/layout/base/RestyleManager.cpp
+++ b/layout/base/RestyleManager.cpp
@@ -3054,16 +3054,22 @@ GetNextBlockInInlineSibling(FramePropert
 }
 
 void
 RestyleManager::ComputeAndProcessStyleChange(nsIFrame*          aFrame,
                                              nsChangeHint       aMinChange,
                                              RestyleTracker&    aRestyleTracker,
                                              nsRestyleHint      aRestyleHint)
 {
+  ReframingStyleContexts reframingStyleContexts;
+
+  // Set mReframingStyleContexts to non-null for the duration of the function.
+  AutoToggle<ReframingStyleContexts*> t(mReframingStyleContexts,
+                                        nullptr, &reframingStyleContexts);
+
   nsStyleChangeList changeList;
   ComputeStyleChangeFor(aFrame, &changeList, aMinChange,
                         aRestyleTracker, aRestyleHint);
   ProcessRestyledFrames(changeList);
 }
 
 void
 RestyleManager::ComputeStyleChangeFor(nsIFrame*          aFrame,
