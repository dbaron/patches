From: L. David Baron <dbaron@dbaron.org>

Bug 625289 patch 1 - Create nsStyleDisplay::HasTransitions helper function.

diff --git a/layout/style/nsStyleStruct.h b/layout/style/nsStyleStruct.h
--- a/layout/style/nsStyleStruct.h
+++ b/layout/style/nsStyleStruct.h
@@ -2159,16 +2159,22 @@ struct nsStyleDisplay {
   inline bool IsFloating(const nsIFrame* aContextFrame) const;
   inline bool IsPositioned(const nsIFrame* aContextFrame) const;
   inline bool IsRelativelyPositioned(const nsIFrame* aContextFrame) const;
   inline bool IsAbsolutelyPositioned(const nsIFrame* aContextFrame) const;
 
   /* Returns whether the element has the -moz-transform property
    * or a related property, and supports CSS transforms. */
   inline bool HasTransform(const nsIFrame* aContextFrame) const;
+
+  bool HasTransitions() const {
+    return mTransitionPropertyCount != 1 ||
+           mTransitions[0].GetDelay() != 0.0f ||
+           mTransitions[0].GetDuration() != 0.0f;
+  }
 };
 
 struct nsStyleTable {
   nsStyleTable(void);
   nsStyleTable(const nsStyleTable& aOther);
   ~nsStyleTable(void);
 
   void* operator new(size_t sz, nsPresContext* aContext) CPP_THROW_NEW {
diff --git a/layout/style/nsTransitionManager.cpp b/layout/style/nsTransitionManager.cpp
--- a/layout/style/nsTransitionManager.cpp
+++ b/layout/style/nsTransitionManager.cpp
@@ -168,24 +168,20 @@ nsTransitionManager::StyleContextChanged
 
     // Else the element we want to use from now on is the element the
     // :before or :after is attached to.
     aElement = aElement->GetParent()->AsElement();
   }
 
   ElementAnimationCollection* collection =
     GetElementTransitions(aElement, pseudoType, false);
-  if (!collection &&
-      disp->mTransitionPropertyCount == 1 &&
-      disp->mTransitions[0].GetDelay() == 0.0f &&
-      disp->mTransitions[0].GetDuration() == 0.0f) {
+  if (!collection && !disp->HasTransitions()) {
     return nullptr;
   }
 
-
   if (aNewStyleContext->PresContext()->IsProcessingAnimationStyleChange()) {
     return nullptr;
   }
 
   if (aNewStyleContext->GetParent() &&
       aNewStyleContext->GetParent()->HasPseudoElementData()) {
     // Ignore transitions on things that inherit properties from
     // pseudo-elements.
