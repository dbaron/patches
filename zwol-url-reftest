From: Zack Weinberg <zweinberg@mozilla.com>

Add reftest from http://lists.w3.org/Archives/Public/www-style/2009Jun/0164.html since it is also fixed by bug 476856.

diff --git a/layout/reftests/bugs/476856-1-ref.html b/layout/reftests/bugs/476856-1-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/476856-1-ref.html
@@ -0,0 +1,19 @@
+<!doctype html>
+<html><head><title>Handling of un-terminated long tokens in CSS</title>
+
+</head><body>
+
+<div>This CSS parser does not
+  backtrack for unterminated comments.</div>
+
+<div>It does not
+  backtrack for unterminated double-quoted url().</div>
+
+<div>It does not
+  backtrack for unterminated single-quoted url().</div>
+
+<div>It does not
+  backtrack for unterminated unquoted url().</div>
+
+</body></html>
+
diff --git a/layout/reftests/bugs/476856-1.html b/layout/reftests/bugs/476856-1.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/bugs/476856-1.html
@@ -0,0 +1,29 @@
+<!doctype html>
+<html><head><title>Handling of un-terminated long tokens in CSS</title>
+
+<style>#ax,#bx,#cx,#dx{display:none}</style>
+
+<style>#ad{color:/*}#ao{display:none}#ax{display:inline}</style>
+
+<style>#bd{background:url("xxx"}#bo{display:none}#bx{display:inline}</style>
+
+<style>#cd{background:url('xxx'}#co{display:none}#cx{display:inline}</style>
+
+<style>#dd{background:url(xxx}#do{display:none}#dx{display:inline}</style>
+
+</head><body>
+
+<div>This CSS parser <span id="ao">does not</span>
+  backtrack<span id="ax">s</span> for unterminated comments.</div>
+
+<div>It <span id="bo">does not</span>
+  backtrack<span id="bx">s</span> for unterminated double-quoted url().</div>
+
+<div>It <span id="co">does not</span>
+  backtrack<span id="cx">s</span> for unterminated single-quoted url().</div>
+
+<div>It <span id="do">does not</span>
+  backtrack<span id="dx">s</span> for unterminated unquoted url().</div>
+
+</body></html>
+
diff --git a/layout/reftests/bugs/reftest.list b/layout/reftests/bugs/reftest.list
--- a/layout/reftests/bugs/reftest.list
+++ b/layout/reftests/bugs/reftest.list
@@ -1190,16 +1190,17 @@ fails == 472020-2.xul 472020-2-ref.xul
 != 476063-3.html 476063-3-ref.html
 == 476063-4.xhtml 476063-4-ref.xhtml
 == 476357-1.html 476357-1-ref.html
 == 476598-1a.html 476598-1-ref.html
 == 476598-1a.html 476598-1-ref2.html
 == 476598-1b.html 476598-1-ref.html
 == 476598-1b.html 476598-1-ref2.html
 != 476598-1-ref.html about:blank
+== 476856-1.html 476856-1-ref.html
 == 478614-1.html 478614-1-ref.html
 == 478614-2.html 478614-1-ref.html
 == 478614-3.html 478614-3-ref.html
 == 478614-4.html 478614-4-ref.html
 == 478614-5.html 478614-5-ref.html
 == 478614-6.html 478614-6-ref.html
 == 478614-7.html 478614-7-ref.html
 == 478377-1.xul 478377-1-ref.xul
