From: L. David Baron <dbaron@dbaron.org>

Bug 1047928 patch 4 - Don't rerun selector matching when enabling MathML style sheet.

diff --git a/dom/mathml/nsMathMLElement.cpp b/dom/mathml/nsMathMLElement.cpp
--- a/dom/mathml/nsMathMLElement.cpp
+++ b/dom/mathml/nsMathMLElement.cpp
@@ -115,17 +115,18 @@ nsMathMLElement::BindToTree(nsIDocument*
         EnsureOnDemandBuiltInUASheet(nsLayoutStylesheetCache::MathMLSheet());
 
       // Rebuild style data for the presshell, because style system
       // optimizations may have taken place assuming MathML was disabled.
       // (See nsRuleNode::CheckSpecifiedProperties.)
       nsCOMPtr<nsIPresShell> shell = doc->GetShell();
       if (shell) {
         shell->GetPresContext()->
-          PostRebuildAllStyleDataEvent(nsChangeHint(0), eRestyle_Subtree);
+          PostRebuildAllStyleDataEvent(nsChangeHint(0),
+                                       eRestyle_ForceDescendants);
       }
     }
   }
 
   return rv;
 }
 
 void
