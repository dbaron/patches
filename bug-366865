Subtract allocated parts before repeating division used for allocation to avoid rounding error of total.  b=366865

diff -r 7c4e61858cdb layout/tables/BasicTableLayoutStrategy.cpp
--- a/layout/tables/BasicTableLayoutStrategy.cpp	Tue Jan 30 21:30:37 2007 -0800
+++ b/layout/tables/BasicTableLayoutStrategy.cpp	Tue Jan 30 21:30:40 2007 -0800
@@ -337,8 +337,8 @@ BasicTableLayoutStrategy::ComputeColumnI
 
             // Before looping over the spanned columns to distribute
             // this cell's width over the columns it spans, we first
-            // compute that loop's invariants, which include totals over
-            // the spanned columns and ratios derived from those totals.
+            // compute totals over the spanned columns so we know how to
+            // allocate the space.
 
             // Accumulate information about the spanned columns, and
             // subtract the already-used space from |info|.
@@ -383,6 +383,7 @@ BasicTableLayoutStrategy::ComputeColumnI
 
             // Compute the ratios used to distribute this cell's width
             // appropriately among the spanned columns.
+            // XXX MOVE DOWN
             float pctRatio = 0.0f;
             if (nonPctCount && info.prefPercent > 0.0f) {
                 if (totalSNonPctPref > 0) {
@@ -748,6 +749,8 @@ BasicTableLayoutStrategy::ComputeColumnW
     };
 
     Loop2Type l2t;
+    // XXX Should this actually not be a constant to avoid rounding
+    // error?
     float c; // the constant (over columns) for each case's math
     if (width < guess_pref) {
         NS_ASSERTION(width >= guess_min, "bad width");
