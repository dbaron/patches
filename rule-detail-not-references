Make aRuleDetail parameters to Compute*Data not be references.  b=388546  r+sr=bzbarsky

diff --git a/layout/style/nsRuleNode.cpp b/layout/style/nsRuleNode.cpp
--- a/layout/style/nsRuleNode.cpp
+++ b/layout/style/nsRuleNode.cpp
@@ -2286,7 +2286,7 @@ nsRuleNode::ComputeFontData(nsStyleStruc
                             const nsRuleDataStruct& aData, 
                             nsStyleContext* aContext, 
                             nsRuleNode* aHighestNode,
-                            const RuleDetail& aRuleDetail, PRBool aInherited)
+                            const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_INHERITED(Font, (mPresContext), font, parentFont,
                           Font, fontData)
@@ -2375,7 +2375,7 @@ nsRuleNode::ComputeTextData(nsStyleStruc
                             const nsRuleDataStruct& aData, 
                             nsStyleContext* aContext, 
                             nsRuleNode* aHighestNode,
-                            const RuleDetail& aRuleDetail, PRBool aInherited)
+                            const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_INHERITED(Text, (), text, parentText, Text, textData)
 
@@ -2477,7 +2477,7 @@ nsRuleNode::ComputeTextResetData(nsStyle
                                  const nsRuleDataStruct& aData, 
                                  nsStyleContext* aContext, 
                                  nsRuleNode* aHighestNode,
-                                 const RuleDetail& aRuleDetail, PRBool aInherited)
+                                 const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(TextReset, (), text, parentText, Text, textData)
   
@@ -2528,7 +2528,7 @@ nsRuleNode::ComputeUserInterfaceData(nsS
                                      const nsRuleDataStruct& aData, 
                                      nsStyleContext* aContext, 
                                      nsRuleNode* aHighestNode,
-                                     const RuleDetail& aRuleDetail,
+                                     const RuleDetail aRuleDetail,
                                      PRBool aInherited)
 {
   COMPUTE_START_INHERITED(UserInterface, (), ui, parentUI,
@@ -2642,7 +2642,7 @@ nsRuleNode::ComputeUIResetData(nsStyleSt
                                const nsRuleDataStruct& aData, 
                                nsStyleContext* aContext, 
                                nsRuleNode* aHighestNode,
-                               const RuleDetail& aRuleDetail, PRBool aInherited)
+                               const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(UIReset, (), ui, parentUI, UserInterface, uiData)
   
@@ -2691,7 +2691,7 @@ nsRuleNode::ComputeDisplayData(nsStyleSt
                                const nsRuleDataStruct& aData, 
                                nsStyleContext* aContext, 
                                nsRuleNode* aHighestNode,
-                               const RuleDetail& aRuleDetail, PRBool aInherited)
+                               const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(Display, (), display, parentDisplay,
                       Display, displayData)
@@ -3005,7 +3005,7 @@ nsRuleNode::ComputeVisibilityData(nsStyl
                                   const nsRuleDataStruct& aData, 
                                   nsStyleContext* aContext, 
                                   nsRuleNode* aHighestNode,
-                                  const RuleDetail& aRuleDetail, PRBool aInherited)
+                                  const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_INHERITED(Visibility, (mPresContext),
                           visibility, parentVisibility,
@@ -3053,7 +3053,7 @@ nsRuleNode::ComputeColorData(nsStyleStru
                              const nsRuleDataStruct& aData, 
                              nsStyleContext* aContext, 
                              nsRuleNode* aHighestNode,
-                             const RuleDetail& aRuleDetail, PRBool aInherited)
+                             const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_INHERITED(Color, (mPresContext), color, parentColor,
                           Color, colorData)
@@ -3078,7 +3078,7 @@ nsRuleNode::ComputeBackgroundData(nsStyl
                                   const nsRuleDataStruct& aData, 
                                   nsStyleContext* aContext, 
                                   nsRuleNode* aHighestNode,
-                                  const RuleDetail& aRuleDetail, PRBool aInherited)
+                                  const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(Background, (mPresContext), bg, parentBG,
                       Color, colorData)
@@ -3265,7 +3265,7 @@ nsRuleNode::ComputeMarginData(nsStyleStr
                               const nsRuleDataStruct& aData, 
                               nsStyleContext* aContext, 
                               nsRuleNode* aHighestNode,
-                              const RuleDetail& aRuleDetail, PRBool aInherited)
+                              const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(Margin, (), margin, parentMargin, Margin, marginData)
 
@@ -3301,7 +3301,7 @@ nsRuleNode::ComputeBorderData(nsStyleStr
                               const nsRuleDataStruct& aData, 
                               nsStyleContext* aContext, 
                               nsRuleNode* aHighestNode,
-                              const RuleDetail& aRuleDetail, PRBool aInherited)
+                              const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(Border, (mPresContext), border, parentBorder,
                       Margin, marginData)
@@ -3499,7 +3499,7 @@ nsRuleNode::ComputePaddingData(nsStyleSt
                                const nsRuleDataStruct& aData, 
                                nsStyleContext* aContext, 
                                nsRuleNode* aHighestNode,
-                               const RuleDetail& aRuleDetail, PRBool aInherited)
+                               const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(Padding, (), padding, parentPadding, Margin, marginData)
 
@@ -3535,7 +3535,7 @@ nsRuleNode::ComputeOutlineData(nsStyleSt
                                const nsRuleDataStruct& aData, 
                                nsStyleContext* aContext, 
                                nsRuleNode* aHighestNode,
-                               const RuleDetail& aRuleDetail, PRBool aInherited)
+                               const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(Outline, (mPresContext), outline, parentOutline,
                       Margin, marginData)
@@ -3612,7 +3612,7 @@ nsRuleNode::ComputeListData(nsStyleStruc
                             const nsRuleDataStruct& aData, 
                             nsStyleContext* aContext, 
                             nsRuleNode* aHighestNode,
-                            const RuleDetail& aRuleDetail, PRBool aInherited)
+                            const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_INHERITED(List, (), list, parentList, List, listData)
 
@@ -3686,7 +3686,7 @@ nsRuleNode::ComputePositionData(nsStyleS
                                 const nsRuleDataStruct& aData, 
                                 nsStyleContext* aContext, 
                                 nsRuleNode* aHighestNode,
-                                const RuleDetail& aRuleDetail, PRBool aInherited)
+                                const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(Position, (), pos, parentPos, Position, posData)
 
@@ -3743,7 +3743,7 @@ nsRuleNode::ComputeTableData(nsStyleStru
                              const nsRuleDataStruct& aData, 
                              nsStyleContext* aContext, 
                              nsRuleNode* aHighestNode,
-                             const RuleDetail& aRuleDetail, PRBool aInherited)
+                             const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(Table, (), table, parentTable, Table, tableData)
 
@@ -3783,7 +3783,7 @@ nsRuleNode::ComputeTableBorderData(nsSty
                                    const nsRuleDataStruct& aData, 
                                    nsStyleContext* aContext, 
                                    nsRuleNode* aHighestNode,
-                                   const RuleDetail& aRuleDetail, PRBool aInherited)
+                                   const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_INHERITED(TableBorder, (mPresContext), table, parentTable,
                           Table, tableData)
@@ -3832,7 +3832,7 @@ nsRuleNode::ComputeContentData(nsStyleSt
                                const nsRuleDataStruct& aData, 
                                nsStyleContext* aContext, 
                                nsRuleNode* aHighestNode,
-                               const RuleDetail& aRuleDetail, PRBool aInherited)
+                               const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(Content, (), content, parentContent,
                       Content, contentData)
@@ -4018,7 +4018,7 @@ nsRuleNode::ComputeQuotesData(nsStyleStr
                               const nsRuleDataStruct& aData, 
                               nsStyleContext* aContext, 
                               nsRuleNode* aHighestNode,
-                              const RuleDetail& aRuleDetail, PRBool aInherited)
+                              const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_INHERITED(Quotes, (), quotes, parentQuotes,
                           Content, contentData)
@@ -4071,7 +4071,7 @@ nsRuleNode::ComputeXULData(nsStyleStruct
                            const nsRuleDataStruct& aData, 
                            nsStyleContext* aContext, 
                            nsRuleNode* aHighestNode,
-                           const RuleDetail& aRuleDetail, PRBool aInherited)
+                           const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(XUL, (), xul, parentXUL, XUL, xulData)
 
@@ -4138,7 +4138,7 @@ nsRuleNode::ComputeColumnData(nsStyleStr
                               const nsRuleDataStruct& aData, 
                               nsStyleContext* aContext, 
                               nsRuleNode* aHighestNode,
-                              const RuleDetail& aRuleDetail, PRBool aInherited)
+                              const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(Column, (), column, parent, Column, columnData)
 
@@ -4220,7 +4220,7 @@ nsRuleNode::ComputeSVGData(nsStyleStruct
                            const nsRuleDataStruct& aData, 
                            nsStyleContext* aContext, 
                            nsRuleNode* aHighestNode,
-                           const RuleDetail& aRuleDetail, PRBool aInherited)
+                           const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_INHERITED(SVG, (), svg, parentSVG, SVG, SVGData)
 
@@ -4485,7 +4485,7 @@ nsRuleNode::ComputeSVGResetData(nsStyleS
                                 const nsRuleDataStruct& aData,
                                 nsStyleContext* aContext, 
                                 nsRuleNode* aHighestNode,
-                                const RuleDetail& aRuleDetail, PRBool aInherited)
+                                const RuleDetail aRuleDetail, PRBool aInherited)
 {
   COMPUTE_START_RESET(SVGReset, (), svgReset, parentSVGReset, SVG, SVGData)
 
diff --git a/layout/style/nsRuleNode.h b/layout/style/nsRuleNode.h
--- a/layout/style/nsRuleNode.h
+++ b/layout/style/nsRuleNode.h
@@ -462,141 +462,141 @@ protected:
     ComputeDisplayData(nsStyleStruct* aStartStruct,
                        const nsRuleDataStruct& aData,
                        nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                       const RuleDetail& aRuleDetail, PRBool aInherited);
+                       RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeVisibilityData(nsStyleStruct* aStartStruct,
                           const nsRuleDataStruct& aData,
                           nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                          const RuleDetail& aRuleDetail, PRBool aInherited);
+                          RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeFontData(nsStyleStruct* aStartStruct,
                     const nsRuleDataStruct& aData,
                     nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                    const RuleDetail& aRuleDetail, PRBool aInherited);
+                    RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeColorData(nsStyleStruct* aStartStruct,
                      const nsRuleDataStruct& aData,
                      nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                     const RuleDetail& aRuleDetail, PRBool aInherited);
+                     RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeBackgroundData(nsStyleStruct* aStartStruct,
                           const nsRuleDataStruct& aData, 
                           nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                          const RuleDetail& aRuleDetail, PRBool aInherited);
+                          RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeMarginData(nsStyleStruct* aStartStruct,
                       const nsRuleDataStruct& aData, 
                       nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                      const RuleDetail& aRuleDetail, PRBool aInherited);
+                      RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeBorderData(nsStyleStruct* aStartStruct,
                       const nsRuleDataStruct& aData, 
                       nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                      const RuleDetail& aRuleDetail, PRBool aInherited);
+                      RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputePaddingData(nsStyleStruct* aStartStruct,
                        const nsRuleDataStruct& aData, 
                        nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                       const RuleDetail& aRuleDetail, PRBool aInherited);
+                       RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeOutlineData(nsStyleStruct* aStartStruct,
                        const nsRuleDataStruct& aData, 
                        nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                       const RuleDetail& aRuleDetail, PRBool aInherited);
+                       RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeListData(nsStyleStruct* aStartStruct,
                     const nsRuleDataStruct& aData,
                     nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                    const RuleDetail& aRuleDetail, PRBool aInherited);
+                    RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputePositionData(nsStyleStruct* aStartStruct,
                         const nsRuleDataStruct& aData, 
                         nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                        const RuleDetail& aRuleDetail, PRBool aInherited);
+                        RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeTableData(nsStyleStruct* aStartStruct,
                      const nsRuleDataStruct& aData, 
                      nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                     const RuleDetail& aRuleDetail, PRBool aInherited);
+                     RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeTableBorderData(nsStyleStruct* aStartStruct,
                            const nsRuleDataStruct& aData, 
                            nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                           const RuleDetail& aRuleDetail, PRBool aInherited);
+                           RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeContentData(nsStyleStruct* aStartStruct,
                        const nsRuleDataStruct& aData,
                        nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                       const RuleDetail& aRuleDetail, PRBool aInherited);
+                       RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeQuotesData(nsStyleStruct* aStartStruct,
                       const nsRuleDataStruct& aData, 
                       nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                      const RuleDetail& aRuleDetail, PRBool aInherited);
+                      RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeTextData(nsStyleStruct* aStartStruct,
                     const nsRuleDataStruct& aData, 
                     nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                    const RuleDetail& aRuleDetail, PRBool aInherited);
+                    RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeTextResetData(nsStyleStruct* aStartStruct,
                          const nsRuleDataStruct& aData,
                          nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                         const RuleDetail& aRuleDetail, PRBool aInherited);
+                         RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeUserInterfaceData(nsStyleStruct* aStartStruct,
                              const nsRuleDataStruct& aData, 
                              nsStyleContext* aContext,
                              nsRuleNode* aHighestNode,
-                             const RuleDetail& aRuleDetail, PRBool aInherited);
+                             RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeUIResetData(nsStyleStruct* aStartStruct,
                        const nsRuleDataStruct& aData,
                        nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                       const RuleDetail& aRuleDetail, PRBool aInherited);
+                       RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeXULData(nsStyleStruct* aStartStruct,
                    const nsRuleDataStruct& aData, 
                    nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                   const RuleDetail& aRuleDetail, PRBool aInherited);
+                   RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeColumnData(nsStyleStruct* aStartStruct,
                       const nsRuleDataStruct& aData,
                       nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                      const RuleDetail& aRuleDetail, PRBool aInherited);
+                      RuleDetail aRuleDetail, PRBool aInherited);
 
 #ifdef MOZ_SVG
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeSVGData(nsStyleStruct* aStartStruct,
                    const nsRuleDataStruct& aData, 
                    nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                   const RuleDetail& aRuleDetail, PRBool aInherited);
+                   RuleDetail aRuleDetail, PRBool aInherited);
 
   NS_HIDDEN_(const nsStyleStruct*)
     ComputeSVGResetData(nsStyleStruct* aStartStruct,
                         const nsRuleDataStruct& aData, 
                         nsStyleContext* aContext, nsRuleNode* aHighestNode,
-                        const RuleDetail& aRuleDetail, PRBool aInherited);
+                        RuleDetail aRuleDetail, PRBool aInherited);
 #endif
 
   // helpers for |ComputeFontData| that need access to |mNoneBits|:
