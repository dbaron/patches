From: L. David Baron <dbaron@dbaron.org>

Bug 1121738 patch 2 - Add reftest for transform not being supported.  r=xidorn

This fails without the patch; I'm hoping it will be fixed by the
combination of patch 1 in this bug and bug 1055667 patch 5.

(Interestingly, it fails both due to mispositioning as expected, and
also due to bad overflow area computation causing failure to paint the
ruby text.)

diff --git a/layout/reftests/css-ruby/no-transform-ref.html b/layout/reftests/css-ruby/no-transform-ref.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-ruby/no-transform-ref.html
@@ -0,0 +1,14 @@
+<!DOCTYPE html>
+<html lang="en">
+<head>
+  <meta charset="UTF-8">
+  <title>Bug 1121738 - Ruby should not support transform</title>
+  <link rel="stylesheet" href="common.css">
+</head>
+<body>
+  <ruby>
+    <rbc><rb>a</rb><rb>b</rb></rbc>
+    <rtc><rt>A</rt><rt>B</rt></rtc>
+  </ruby>
+</body>
+</html>
diff --git a/layout/reftests/css-ruby/no-transform.html b/layout/reftests/css-ruby/no-transform.html
new file mode 100644
--- /dev/null
+++ b/layout/reftests/css-ruby/no-transform.html
@@ -0,0 +1,19 @@
+<!DOCTYPE html>
+<html lang="en">
+<head>
+  <meta charset="UTF-8">
+  <title>Bug 1121738 - Ruby should not support transform</title>
+  <link rel="stylesheet" href="common.css">
+  <style>
+  ruby, rbc, rb, rtc, rt {
+    transform: translateX(50px);
+  }
+  </style>
+</head>
+<body>
+  <ruby>
+    <rbc><rb>a</rb><rb>b</rb></rbc>
+    <rtc><rt>A</rt><rt>B</rt></rtc>
+  </ruby>
+</body>
+</html>
diff --git a/layout/reftests/css-ruby/reftest.list b/layout/reftests/css-ruby/reftest.list
--- a/layout/reftests/css-ruby/reftest.list
+++ b/layout/reftests/css-ruby/reftest.list
@@ -28,16 +28,17 @@ fuzzy-if(winWidget,35,1) == dynamic-remo
 == intra-level-whitespace-2.html intra-level-whitespace-2-ref.html
 == intra-level-whitespace-3.html intra-level-whitespace-3-ref.html
 == justification-1.html justification-1-ref.html
 == justification-2.html justification-2-ref.html
 == line-height-1.html line-height-1-ref.html
 == line-height-2.html line-height-2-ref.html
 == line-height-3.html line-height-3-ref.html
 load nested-ruby-1.html
+== no-transform.html no-transform-ref.html
 fails-if(cocoaWidget) == relative-positioning-1.html relative-positioning-1-ref.html # bug 1120280
 == relative-positioning-2.html relative-positioning-2-ref.html
 == ruby-position-horizontal.html ruby-position-horizontal-ref.html
 pref(layout.css.vertical-text.enabled,true) fails == ruby-position-vertical-lr.html ruby-position-vertical-lr-ref.html # bug 1112474
 pref(layout.css.vertical-text.enabled,true) fails == ruby-position-vertical-rl.html ruby-position-vertical-rl-ref.html # bug 1112474
 != ruby-reflow-1-opaqueruby.html ruby-reflow-1-noruby.html
 == ruby-reflow-1-transparentruby.html ruby-reflow-1-noruby.html
 == ruby-span-1.html ruby-span-1-ref.html
