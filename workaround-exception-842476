From: L. David Baron <dbaron@dbaron.org>

Bug 842476: Work around leak resulting from exception that happens during unload by propagating only the prompts we expect and not the later ones.

diff --git a/dom/browser-element/mochitest/file_browserElement_SetVisibleFrames_Outer.html b/dom/browser-element/mochitest/file_browserElement_SetVisibleFrames_Outer.html
--- a/dom/browser-element/mochitest/file_browserElement_SetVisibleFrames_Outer.html
+++ b/dom/browser-element/mochitest/file_browserElement_SetVisibleFrames_Outer.html
@@ -16,17 +16,17 @@ function handlePrompt(e) {
   }
   else if (numPrompts == 3) {
     if (e.detail.message != 'child2:hidden') {
       alert("parent:fail Didn't get expected 'child2:hidden'.");
     }
 
     alert('parent:ready');
   }
-  else if (numPrompts > 3) {
+  else if (numPrompts == 4 || numPrompts == 5) {
     alert(e.detail.message);
   }
 }
 
 var iframe1 = document.createElement('iframe');
 iframe1.mozbrowser = true;
 iframe1.addEventListener('mozbrowsershowmodalprompt', handlePrompt);
 
