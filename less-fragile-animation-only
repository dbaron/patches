From: L. David Baron <dbaron@dbaron.org>

Fix fragile use of hints to determine when we need an animation-only style flush.

diff --git a/layout/base/GeckoRestyleManager.cpp b/layout/base/GeckoRestyleManager.cpp
--- a/layout/base/GeckoRestyleManager.cpp
+++ b/layout/base/GeckoRestyleManager.cpp
@@ -717,16 +717,18 @@ GeckoRestyleManager::PostRestyleEvent(El
 
   mPendingRestyles.AddPendingRestyle(aElement, aRestyleHint, aMinChangeHint,
                                      aRestyleHintData);
 
   // Set mHavePendingNonAnimationRestyles for any restyle that could
   // possibly contain non-animation styles (i.e., those that require us
   // to do an animation-only style flush before processing style changes
   // to ensure correct initialization of CSS transitions).
+  // FIXME: This is fragile; it assumes we never use these hints for
+  // things that require the animation-only style flush.
   if (aRestyleHint & ~eRestyle_AllHintsWithAnimations) {
     mHavePendingNonAnimationRestyles = true;
   }
 
   PostRestyleEventInternal();
 }
 
 void
