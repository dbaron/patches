Suppress serialization of -moz-use-text-color in border shorthand in property getters just like we do in declaration serialization.  (Bug 376075)
diff --git a/layout/style/test/test_shorthand_property_getters.html b/layout/style/test/test_shorthand_property_getters.html
--- a/layout/style/test/test_shorthand_property_getters.html
+++ b/layout/style/test/test_shorthand_property_getters.html
@@ -37,13 +37,35 @@ e.setAttribute("style", "border-width: 3
 is(e.style.border, "", "should not be able to serialize border");
 e.setAttribute("style", "border-width: 3px 3px 3px 3px; border-style: solid; border-color: blue blue blue green");
 is(e.style.border, "", "should not be able to serialize border");
 e.setAttribute("style", "border-width: 3px 2px 3px 3px; border-style: solid; border-color: green");
 is(e.style.border, "", "should not be able to serialize border");
 e.setAttribute("style", "border-width: 3px 3px 3px 3px; border-style: solid dashed; border-color: green");
 is(e.style.border, "", "should not be able to serialize border");
 
+// Test suppression of -moz-use-text-color in border shorthands.
+e.setAttribute("style", "border: medium solid");
+ok(e.style.border == "medium solid" ||
+   e.style.border == "solid medium",
+   "implied default color omitted serializing border");
+ok(e.style.borderLeft == "medium solid" ||
+   e.style.borderLeft == "solid medium",
+   "implied default color omitted serializing border-left");
+ok(e.style.cssText == "border: medium solid" ||
+   e.style.cssText == "border: solid medium",
+   "implied default color omitted serializing declaration");
+e.setAttribute("style", "border-right: medium solid");
+ok(e.style.borderRight == "medium solid" ||
+   e.style.borderRight == "solid medium",
+   "implied default color omitted serializing border-right");
+ok(e.style.borderRight == "medium solid" ||
+   e.style.borderRight == "solid medium",
+   "implied default color omitted serializing border-right");
+ok(e.style.cssText == "border: medium solid" ||
+   e.style.cssText == "border: solid medium",
+   "implied default color omitted serializing declaration");
+
 
 </script>
 </pre>
 </body>
 </html>
diff --git a/layout/style/test/test_value_storage.html b/layout/style/test/test_value_storage.html
--- a/layout/style/test/test_value_storage.html
+++ b/layout/style/test/test_value_storage.html
@@ -104,25 +104,16 @@ function xfail_ser_val(property, value)
   if (property != "font" && xfail_accepted(property, value))
     // We already failed the first test, which will make us always pass this
     // one.
     return false;
 
   if (property in gShorthandsWithoutCondensingSerialize)
     return true;
 
-  // We output unneeded -moz-use-text-color only in the value getter and
-  // not the serialization.
-  // XXXbz is there any way we could actually filter for that, so that colors
-  // other than green could be used in the property database here?
-  if ((property.match(/^border(|-bottom|-left|-right|-top)$/) ||
-       property.match(/^-moz-border(|-start|-end)$/)) &&
-      !value.match(/(green|currentcolor)/i))
-    return true;
-
   // We condense multiple values in the serialization, but not in the
   // value getter.
   if (property.match(/^(border-(color|style|width)|margin|padding)$/) &&
       value.split(" ").length != 4)
     return true;
   if (property in gShortenableValues &&
       gShortenableValues[property].indexOf(value) != -1)
     return true;
