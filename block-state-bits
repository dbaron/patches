From: L. David Baron <dbaron@dbaron.org>

Add a separate word of bits to nsBlockFrame (so we can eventually reduce the number of class-private frame state bits).  (Bug 563584)

diff --git a/layout/generic/nsBlockFrame.h b/layout/generic/nsBlockFrame.h
--- a/layout/generic/nsBlockFrame.h
+++ b/layout/generic/nsBlockFrame.h
@@ -200,16 +200,28 @@ public:
   NS_IMETHOD_(nsFrameState) GetDebugStateBits() const;
   NS_IMETHOD GetFrameName(nsAString& aResult) const;
 #endif
 
 #ifdef ACCESSIBILITY
   NS_IMETHOD GetAccessible(nsIAccessible** aAccessible);
 #endif
 
+ /**
+   * An extra set of bits for nsBlockFrame, like nsIFrame::GetStateBits,
+   * AddStateBits, and RemoveStateBits.
+   *
+   * WARNING: nsBlockFrame still uses some NS_BLOCK_* constants for
+   * nsIFrame's class-private bits.  Those bits should be moved here,
+   * and then nsIFrame::GetStateBits can have fewer class-private bits.
+   */
+  nsFrameState GetBlockStateBits() const { return mBlockState; }
+  void AddBlockStateBits(nsFrameState aBits) { mBlockState |= aBits; }
+  void RemoveBlockStateBits(nsFrameState aBits) { mBlockState &= ~aBits; }
+
   // line cursor methods to speed up searching for the line(s)
   // containing a point. The basic idea is that we set the cursor
   // property if the lines' combinedArea.ys and combinedArea.yMosts
   // are non-decreasing (considering only non-empty combinedAreas;
   // empty combinedAreas never participate in event handling or
   // painting), and the block has sufficient number of lines. The
   // cursor property points to a "recently used" line. If we get a
   // series of requests that work on lines
@@ -730,16 +742,18 @@ protected:
 
   // List of all floats in this block
   nsFrameList mFloats;
 
   // XXX_fix_me: subclass one more time!
   // For list-item frames, this is the bullet frame.
   nsBulletFrame* mBullet;
 
+  nsFrameState mBlockBits;
+
   friend class nsBlockReflowState;
   friend class nsBlockInFlowLineIterator;
 
 private:
   nsAbsoluteContainingBlock mAbsoluteContainer;
 
 
 #ifdef DEBUG
