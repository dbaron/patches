From: Craig Topper <craig.topper@gmail.com>

Remove QueryFrame support for nsICSSPseudoComparator.  (Bug 576794)  r=bzbarsky  a2.0=bsmedberg

diff --git a/layout/generic/nsQueryFrame.h b/layout/generic/nsQueryFrame.h
--- a/layout/generic/nsQueryFrame.h
+++ b/layout/generic/nsQueryFrame.h
@@ -105,17 +105,16 @@ public:
     nsHTMLButtonControlFrame_id,
     nsHTMLCanvasFrame_id,
     nsHTMLContainerFrame_id,
     nsHTMLFramesetBlankFrame_id,
     nsHTMLFramesetBorderFrame_id,
     nsHTMLFramesetFrame_id,
     nsHTMLScrollFrame_id,
     nsIAnonymousContentCreator_id,
-    nsICSSPseudoComparator_id,
     nsIComboboxControlFrame_id,
     nsIFormControlFrame_id,
     nsIFrame_id,
     nsIFrameFrame_id,
     nsIImageFrame_id,
     nsIListControlFrame_id,
     nsIMathMLFrame_id,
     nsIMenuFrame_id,
diff --git a/layout/style/nsICSSPseudoComparator.h b/layout/style/nsICSSPseudoComparator.h
--- a/layout/style/nsICSSPseudoComparator.h
+++ b/layout/style/nsICSSPseudoComparator.h
@@ -35,22 +35,18 @@
  *
  * ***** END LICENSE BLOCK ***** */
 
 /* internal interface for implementing complex pseudo-classes */
 
 #ifndef nsICSSPseudoComparator_h___
 #define nsICSSPseudoComparator_h___
 
-#include "nsQueryFrame.h"
-
 class nsIAtom;
 struct nsCSSSelector;
 
 class nsICSSPseudoComparator
 {
 public:
-  NS_DECL_QUERYFRAME_TARGET(nsICSSPseudoComparator)
-
   virtual PRBool PseudoMatches(nsIAtom* aTag, nsCSSSelector* aSelector)=0;
 };
 
 #endif /* nsICSSPseudoComparator_h___ */
diff --git a/layout/xul/base/src/tree/src/nsTreeBodyFrame.cpp b/layout/xul/base/src/tree/src/nsTreeBodyFrame.cpp
--- a/layout/xul/base/src/tree/src/nsTreeBodyFrame.cpp
+++ b/layout/xul/base/src/tree/src/nsTreeBodyFrame.cpp
@@ -129,17 +129,16 @@ nsIFrame*
 NS_NewTreeBodyFrame(nsIPresShell* aPresShell, nsStyleContext* aContext)
 {
   return new (aPresShell) nsTreeBodyFrame(aPresShell, aContext);
 }
 
 NS_IMPL_FRAMEARENA_HELPERS(nsTreeBodyFrame)
 
 NS_QUERYFRAME_HEAD(nsTreeBodyFrame)
-  NS_QUERYFRAME_ENTRY(nsICSSPseudoComparator)
   NS_QUERYFRAME_ENTRY(nsIScrollbarMediator)
   NS_QUERYFRAME_ENTRY(nsTreeBodyFrame)
 NS_QUERYFRAME_TAIL_INHERITING(nsLeafBoxFrame)
 
 // Constructor
 nsTreeBodyFrame::nsTreeBodyFrame(nsIPresShell* aPresShell, nsStyleContext* aContext)
 :nsLeafBoxFrame(aPresShell, aContext),
  mSlots(nsnull),
