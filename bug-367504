Give inline-blocks NS_BLOCK_SPACE_MGR and NS_BLOCK_MARGIN_ROOT.

diff -r 709c315d144f layout/base/nsCSSFrameConstructor.cpp
--- a/layout/base/nsCSSFrameConstructor.cpp	Sat Jan 20 01:09:20 2007 -0800
+++ b/layout/base/nsCSSFrameConstructor.cpp	Sat Jan 20 01:11:04 2007 -0800
@@ -6501,8 +6501,12 @@ nsCSSFrameConstructor::ConstructFrameByD
     if (!aHasPseudoParent && !aState.mPseudoFrames.IsEmpty()) {
       ProcessPseudoFrames(aState, aFrameItems); 
     }
+    PRUint32 flags = 0;
+    if (NS_STYLE_DISPLAY_INLINE_BLOCK == aDisplay->mDisplay) {
+      flags = NS_BLOCK_SPACE_MGR | NS_BLOCK_MARGIN_ROOT;
+    }
     // Create the block frame
-    newFrame = NS_NewBlockFrame(mPresShell, aStyleContext);
+    newFrame = NS_NewBlockFrame(mPresShell, aStyleContext, flags);
     if (newFrame) { // That worked so construct the block and its children
       // XXXbz should we be passing in a non-null aContentParentFrame?
       rv = ConstructBlock(aState, aDisplay, aContent,
