From: Chris Double <chris.double@double.co.nz>

Bug 463627 and 464457:  fix sa_stream_get_write_size so we keep writing to the audio buffer and sound works with ogg video + ALSA.

diff --git a/media/libsydneyaudio/README_MOZILLA b/media/libsydneyaudio/README_MOZILLA
--- a/media/libsydneyaudio/README_MOZILLA
+++ b/media/libsydneyaudio/README_MOZILLA
@@ -1,8 +1,8 @@
 The source from this directory was copied from the libsydneyaudio svn
 source using the update.sh script. The only changes made were those
 applied by update.sh and the addition/upate of Makefile.in files for
 the Mozilla build system.
 
 http://svn.annodex.net/libsydneyaudio/trunk
 
-The svn revision number used was r3760.
+The svn revision number used was r3808.
diff --git a/media/libsydneyaudio/src/sydney_audio_alsa.c b/media/libsydneyaudio/src/sydney_audio_alsa.c
--- a/media/libsydneyaudio/src/sydney_audio_alsa.c
+++ b/media/libsydneyaudio/src/sydney_audio_alsa.c
@@ -243,17 +243,17 @@ sa_stream_get_write_size(sa_stream_t *s,
   snd_pcm_sframes_t avail;
 
   if (s == NULL || s->output_unit == NULL) {
     return SA_ERROR_NO_INIT;
   }
 
   avail = snd_pcm_avail_update(s->output_unit);
 
-  *size = snd_pcm_frames_to_bytes(s->output_unit, avail);
+  *size = snd_pcm_frames_to_bytes(s->output_unit, avail) + s->period_bytes;
 
   return SA_SUCCESS;
 }
 
 int
 sa_stream_get_position(sa_stream_t *s, sa_position_t position, int64_t *pos) {
   int err;
   snd_pcm_sframes_t delay;
