From: L. David Baron <dbaron@dbaron.org>

Bug 1367830 - Mark hidden window as inactive.  r=mystor

MozReview-Commit-ID: GJOFjU6WcfG

diff --git a/xpfe/appshell/nsAppShellService.cpp b/xpfe/appshell/nsAppShellService.cpp
--- a/xpfe/appshell/nsAppShellService.cpp
+++ b/xpfe/appshell/nsAppShellService.cpp
@@ -139,16 +139,17 @@ nsAppShellService::CreateHiddenWindowHel
   rv = JustCreateTopWindow(nullptr, url,
                            chromeMask, initialWidth, initialHeight,
                            true, nullptr, nullptr, getter_AddRefs(newWindow));
   NS_ENSURE_SUCCESS(rv, rv);
 
   nsCOMPtr<nsIDocShell> docShell;
   newWindow->GetDocShell(getter_AddRefs(docShell));
   if (docShell) {
+    docShell->SetIsActive(false);
     if (aIsPrivate) {
       docShell->SetAffectPrivateSessionLifetime(false);
     }
   }
 
   if (aIsPrivate) {
     mHiddenPrivateWindow.swap(newWindow);
   } else {
